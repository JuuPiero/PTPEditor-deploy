(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function o(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(r){if(r.ep)return;r.ep=!0;const u=o(r);fetch(r.href,u)}})();function bg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xu={exports:{}},Vl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ih;function sx(){if(Ih)return Vl;Ih=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function o(s,r,u){var f=null;if(u!==void 0&&(f=""+u),r.key!==void 0&&(f=""+r.key),"key"in r){u={};for(var h in r)h!=="key"&&(u[h]=r[h])}else u=r;return r=u.ref,{$$typeof:e,type:s,key:f,ref:r!==void 0?r:null,props:u}}return Vl.Fragment=n,Vl.jsx=o,Vl.jsxs=o,Vl}var Dh;function rx(){return Dh||(Dh=1,Xu.exports=sx()),Xu.exports}var S=rx(),Qu={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wh;function ax(){if(wh)return be;wh=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),T=Symbol.iterator;function E(I){return I===null||typeof I!="object"?null:(I=T&&I[T]||I["@@iterator"],typeof I=="function"?I:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,q={};function w(I,j,re){this.props=I,this.context=j,this.refs=q,this.updater=re||b}w.prototype.isReactComponent={},w.prototype.setState=function(I,j){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,j,"setState")},w.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function M(){}M.prototype=w.prototype;function k(I,j,re){this.props=I,this.context=j,this.refs=q,this.updater=re||b}var P=k.prototype=new M;P.constructor=k,A(P,w.prototype),P.isPureReactComponent=!0;var N=Array.isArray;function $(){}var oe={H:null,A:null,T:null,S:null},ce=Object.prototype.hasOwnProperty;function Y(I,j,re){var ue=re.ref;return{$$typeof:e,type:I,key:j,ref:ue!==void 0?ue:null,props:re}}function de(I,j){return Y(I.type,j,I.props)}function Ee(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function O(I){var j={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(re){return j[re]})}var Ce=/\/+/g;function Oe(I,j){return typeof I=="object"&&I!==null&&I.key!=null?O(""+I.key):j.toString(36)}function Le(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then($,$):(I.status="pending",I.then(function(j){I.status==="pending"&&(I.status="fulfilled",I.value=j)},function(j){I.status==="pending"&&(I.status="rejected",I.reason=j)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function G(I,j,re,ue,L){var X=typeof I;(X==="undefined"||X==="boolean")&&(I=null);var K=!1;if(I===null)K=!0;else switch(X){case"bigint":case"string":case"number":K=!0;break;case"object":switch(I.$$typeof){case e:case n:K=!0;break;case v:return K=I._init,G(K(I._payload),j,re,ue,L)}}if(K)return L=L(I),K=ue===""?"."+Oe(I,0):ue,N(L)?(re="",K!=null&&(re=K.replace(Ce,"$&/")+"/"),G(L,j,re,"",function(Ie){return Ie})):L!=null&&(Ee(L)&&(L=de(L,re+(L.key==null||I&&I.key===L.key?"":(""+L.key).replace(Ce,"$&/")+"/")+K)),j.push(L)),1;K=0;var ve=ue===""?".":ue+":";if(N(I))for(var _e=0;_e<I.length;_e++)ue=I[_e],X=ve+Oe(ue,_e),K+=G(ue,j,re,X,L);else if(_e=E(I),typeof _e=="function")for(I=_e.call(I),_e=0;!(ue=I.next()).done;)ue=ue.value,X=ve+Oe(ue,_e++),K+=G(ue,j,re,X,L);else if(X==="object"){if(typeof I.then=="function")return G(Le(I),j,re,ue,L);throw j=String(I),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return K}function se(I,j,re){if(I==null)return I;var ue=[],L=0;return G(I,ue,"","",function(X){return j.call(re,X,L++)}),ue}function pe(I){if(I._status===-1){var j=I._result;j=j(),j.then(function(re){(I._status===0||I._status===-1)&&(I._status=1,I._result=re)},function(re){(I._status===0||I._status===-1)&&(I._status=2,I._result=re)}),I._status===-1&&(I._status=0,I._result=j)}if(I._status===1)return I._result.default;throw I._result}var ke=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},Ge={map:se,forEach:function(I,j,re){se(I,function(){j.apply(this,arguments)},re)},count:function(I){var j=0;return se(I,function(){j++}),j},toArray:function(I){return se(I,function(j){return j})||[]},only:function(I){if(!Ee(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return be.Activity=x,be.Children=Ge,be.Component=w,be.Fragment=o,be.Profiler=r,be.PureComponent=k,be.StrictMode=s,be.Suspense=g,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=oe,be.__COMPILER_RUNTIME={__proto__:null,c:function(I){return oe.H.useMemoCache(I)}},be.cache=function(I){return function(){return I.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(I,j,re){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var ue=A({},I.props),L=I.key;if(j!=null)for(X in j.key!==void 0&&(L=""+j.key),j)!ce.call(j,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&j.ref===void 0||(ue[X]=j[X]);var X=arguments.length-2;if(X===1)ue.children=re;else if(1<X){for(var K=Array(X),ve=0;ve<X;ve++)K[ve]=arguments[ve+2];ue.children=K}return Y(I.type,L,ue)},be.createContext=function(I){return I={$$typeof:f,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:u,_context:I},I},be.createElement=function(I,j,re){var ue,L={},X=null;if(j!=null)for(ue in j.key!==void 0&&(X=""+j.key),j)ce.call(j,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(L[ue]=j[ue]);var K=arguments.length-2;if(K===1)L.children=re;else if(1<K){for(var ve=Array(K),_e=0;_e<K;_e++)ve[_e]=arguments[_e+2];L.children=ve}if(I&&I.defaultProps)for(ue in K=I.defaultProps,K)L[ue]===void 0&&(L[ue]=K[ue]);return Y(I,X,L)},be.createRef=function(){return{current:null}},be.forwardRef=function(I){return{$$typeof:h,render:I}},be.isValidElement=Ee,be.lazy=function(I){return{$$typeof:v,_payload:{_status:-1,_result:I},_init:pe}},be.memo=function(I,j){return{$$typeof:m,type:I,compare:j===void 0?null:j}},be.startTransition=function(I){var j=oe.T,re={};oe.T=re;try{var ue=I(),L=oe.S;L!==null&&L(re,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then($,ke)}catch(X){ke(X)}finally{j!==null&&re.types!==null&&(j.types=re.types),oe.T=j}},be.unstable_useCacheRefresh=function(){return oe.H.useCacheRefresh()},be.use=function(I){return oe.H.use(I)},be.useActionState=function(I,j,re){return oe.H.useActionState(I,j,re)},be.useCallback=function(I,j){return oe.H.useCallback(I,j)},be.useContext=function(I){return oe.H.useContext(I)},be.useDebugValue=function(){},be.useDeferredValue=function(I,j){return oe.H.useDeferredValue(I,j)},be.useEffect=function(I,j){return oe.H.useEffect(I,j)},be.useEffectEvent=function(I){return oe.H.useEffectEvent(I)},be.useId=function(){return oe.H.useId()},be.useImperativeHandle=function(I,j,re){return oe.H.useImperativeHandle(I,j,re)},be.useInsertionEffect=function(I,j){return oe.H.useInsertionEffect(I,j)},be.useLayoutEffect=function(I,j){return oe.H.useLayoutEffect(I,j)},be.useMemo=function(I,j){return oe.H.useMemo(I,j)},be.useOptimistic=function(I,j){return oe.H.useOptimistic(I,j)},be.useReducer=function(I,j,re){return oe.H.useReducer(I,j,re)},be.useRef=function(I){return oe.H.useRef(I)},be.useState=function(I){return oe.H.useState(I)},be.useSyncExternalStore=function(I,j,re){return oe.H.useSyncExternalStore(I,j,re)},be.useTransition=function(){return oe.H.useTransition()},be.version="19.2.0",be}var kh;function Ec(){return kh||(kh=1,Qu.exports=ax()),Qu.exports}var ae=Ec();const ux=bg(ae);var Zu={exports:{}},Ol={},Wu={exports:{}},ju={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uh;function cx(){return Uh||(Uh=1,(function(e){function n(G,se){var pe=G.length;G.push(se);e:for(;0<pe;){var ke=pe-1>>>1,Ge=G[ke];if(0<r(Ge,se))G[ke]=se,G[pe]=Ge,pe=ke;else break e}}function o(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var se=G[0],pe=G.pop();if(pe!==se){G[0]=pe;e:for(var ke=0,Ge=G.length,I=Ge>>>1;ke<I;){var j=2*(ke+1)-1,re=G[j],ue=j+1,L=G[ue];if(0>r(re,pe))ue<Ge&&0>r(L,re)?(G[ke]=L,G[ue]=pe,ke=ue):(G[ke]=re,G[j]=pe,ke=j);else if(ue<Ge&&0>r(L,pe))G[ke]=L,G[ue]=pe,ke=ue;else break e}}return se}function r(G,se){var pe=G.sortIndex-se.sortIndex;return pe!==0?pe:G.id-se.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var f=Date,h=f.now();e.unstable_now=function(){return f.now()-h}}var g=[],m=[],v=1,x=null,T=3,E=!1,b=!1,A=!1,q=!1,w=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function P(G){for(var se=o(m);se!==null;){if(se.callback===null)s(m);else if(se.startTime<=G)s(m),se.sortIndex=se.expirationTime,n(g,se);else break;se=o(m)}}function N(G){if(A=!1,P(G),!b)if(o(g)!==null)b=!0,$||($=!0,O());else{var se=o(m);se!==null&&Le(N,se.startTime-G)}}var $=!1,oe=-1,ce=5,Y=-1;function de(){return q?!0:!(e.unstable_now()-Y<ce)}function Ee(){if(q=!1,$){var G=e.unstable_now();Y=G;var se=!0;try{e:{b=!1,A&&(A=!1,M(oe),oe=-1),E=!0;var pe=T;try{t:{for(P(G),x=o(g);x!==null&&!(x.expirationTime>G&&de());){var ke=x.callback;if(typeof ke=="function"){x.callback=null,T=x.priorityLevel;var Ge=ke(x.expirationTime<=G);if(G=e.unstable_now(),typeof Ge=="function"){x.callback=Ge,P(G),se=!0;break t}x===o(g)&&s(g),P(G)}else s(g);x=o(g)}if(x!==null)se=!0;else{var I=o(m);I!==null&&Le(N,I.startTime-G),se=!1}}break e}finally{x=null,T=pe,E=!1}se=void 0}}finally{se?O():$=!1}}}var O;if(typeof k=="function")O=function(){k(Ee)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Oe=Ce.port2;Ce.port1.onmessage=Ee,O=function(){Oe.postMessage(null)}}else O=function(){w(Ee,0)};function Le(G,se){oe=w(function(){G(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_next=function(G){switch(T){case 1:case 2:case 3:var se=3;break;default:se=T}var pe=T;T=se;try{return G()}finally{T=pe}},e.unstable_requestPaint=function(){q=!0},e.unstable_runWithPriority=function(G,se){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var pe=T;T=G;try{return se()}finally{T=pe}},e.unstable_scheduleCallback=function(G,se,pe){var ke=e.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?ke+pe:ke):pe=ke,G){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=pe+Ge,G={id:v++,callback:se,priorityLevel:G,startTime:pe,expirationTime:Ge,sortIndex:-1},pe>ke?(G.sortIndex=pe,n(m,G),o(g)===null&&G===o(m)&&(A?(M(oe),oe=-1):A=!0,Le(N,pe-ke))):(G.sortIndex=Ge,n(g,G),b||E||(b=!0,$||($=!0,O()))),G},e.unstable_shouldYield=de,e.unstable_wrapCallback=function(G){var se=T;return function(){var pe=T;T=se;try{return G.apply(this,arguments)}finally{T=pe}}}})(ju)),ju}var Ph;function fx(){return Ph||(Ph=1,Wu.exports=cx()),Wu.exports}var ec={exports:{}},Rt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lh;function dx(){if(Lh)return Rt;Lh=1;var e=Ec();function n(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(n(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},r=Symbol.for("react.portal");function u(g,m,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:x==null?null:""+x,children:g,containerInfo:m,implementation:v}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Rt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Rt.createPortal=function(g,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(n(299));return u(g,m,null,v)},Rt.flushSync=function(g){var m=f.T,v=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=m,s.p=v,s.d.f()}},Rt.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(g,m))},Rt.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Rt.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var v=m.as,x=h(v,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,E=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:x,integrity:T,fetchPriority:E}):v==="script"&&s.d.X(g,{crossOrigin:x,integrity:T,fetchPriority:E,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Rt.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(g)},Rt.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,x=h(v,m.crossOrigin);s.d.L(g,v,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Rt.preloadModule=function(g,m){if(typeof g=="string")if(m){var v=h(m.as,m.crossOrigin);s.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(g)},Rt.requestFormReset=function(g){s.d.r(g)},Rt.unstable_batchedUpdates=function(g,m){return g(m)},Rt.useFormState=function(g,m,v){return f.H.useFormState(g,m,v)},Rt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Rt.version="19.2.0",Rt}var Gh;function px(){if(Gh)return ec.exports;Gh=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),ec.exports=dx(),ec.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hh;function hx(){if(Hh)return Ol;Hh=1;var e=fx(),n=Ec(),o=px();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,l=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(l=i.return),t=i.return;while(t)}return i.tag===3?l:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function h(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(s(188))}function m(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var l=t,a=i;;){var d=l.return;if(d===null)break;var y=d.alternate;if(y===null){if(a=d.return,a!==null){l=a;continue}break}if(d.child===y.child){for(y=d.child;y;){if(y===l)return g(d),t;if(y===a)return g(d),i;y=y.sibling}throw Error(s(188))}if(l.return!==a.return)l=d,a=y;else{for(var C=!1,_=d.child;_;){if(_===l){C=!0,l=d,a=y;break}if(_===a){C=!0,a=d,l=y;break}_=_.sibling}if(!C){for(_=y.child;_;){if(_===l){C=!0,l=y,a=d;break}if(_===a){C=!0,a=y,l=d;break}_=_.sibling}if(!C)throw Error(s(189))}}if(l.alternate!==a)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?t:i}function v(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=v(t),i!==null)return i;t=t.sibling}return null}var x=Object.assign,T=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),k=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),Ee=Symbol.iterator;function O(t){return t===null||typeof t!="object"?null:(t=Ee&&t[Ee]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Symbol.for("react.client.reference");function Oe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Ce?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case A:return"Fragment";case w:return"Profiler";case q:return"StrictMode";case N:return"Suspense";case $:return"SuspenseList";case Y:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case b:return"Portal";case k:return t.displayName||"Context";case M:return(t._context.displayName||"Context")+".Consumer";case P:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case oe:return i=t.displayName||null,i!==null?i:Oe(t.type)||"Memo";case ce:i=t._payload,t=t._init;try{return Oe(t(i))}catch{}}return null}var Le=Array.isArray,G=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},ke=[],Ge=-1;function I(t){return{current:t}}function j(t){0>Ge||(t.current=ke[Ge],ke[Ge]=null,Ge--)}function re(t,i){Ge++,ke[Ge]=t.current,t.current=i}var ue=I(null),L=I(null),X=I(null),K=I(null);function ve(t,i){switch(re(X,i),re(L,t),re(ue,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?jp(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=jp(i),t=eh(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}j(ue),re(ue,t)}function _e(){j(ue),j(L),j(X)}function Ie(t){t.memoizedState!==null&&re(K,t);var i=ue.current,l=eh(i,t.type);i!==l&&(re(L,t),re(ue,l))}function Ae(t){L.current===t&&(j(ue),j(L)),K.current===t&&(j(K),Hl._currentValue=pe)}var Cn,Sn;function en(t){if(Cn===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Cn=i&&i[1]||"",Sn=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cn+t+Sn}var tn=!1;function He(t,i){if(!t||tn)return"";tn=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(i){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(F){var V=F}Reflect.construct(t,[],ne)}else{try{ne.call()}catch(F){V=F}t.call(ne.prototype)}}else{try{throw Error()}catch(F){V=F}(ne=t())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(F){if(F&&V&&typeof F.stack=="string")return[F.stack,V.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=a.DetermineComponentFrameRoot(),C=y[0],_=y[1];if(C&&_){var R=C.split(`
`),B=_.split(`
`);for(d=a=0;a<R.length&&!R[a].includes("DetermineComponentFrameRoot");)a++;for(;d<B.length&&!B[d].includes("DetermineComponentFrameRoot");)d++;if(a===R.length||d===B.length)for(a=R.length-1,d=B.length-1;1<=a&&0<=d&&R[a]!==B[d];)d--;for(;1<=a&&0<=d;a--,d--)if(R[a]!==B[d]){if(a!==1||d!==1)do if(a--,d--,0>d||R[a]!==B[d]){var Q=`
`+R[a].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=a&&0<=d);break}}}finally{tn=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?en(l):""}function lt(t,i){switch(t.tag){case 26:case 27:case 5:return en(t.type);case 16:return en("Lazy");case 13:return t.child!==i&&i!==null?en("Suspense Fallback"):en("Suspense");case 19:return en("SuspenseList");case 0:case 15:return He(t.type,!1);case 11:return He(t.type.render,!1);case 1:return He(t.type,!0);case 31:return en("Activity");default:return""}}function rt(t){try{var i="",l=null;do i+=lt(t,l),l=t,t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var St=Object.prototype.hasOwnProperty,mn=e.unstable_scheduleCallback,Qe=e.unstable_cancelCallback,Zn=e.unstable_shouldYield,Ur=e.unstable_requestPaint,wt=e.unstable_now,Pr=e.unstable_getCurrentPriorityLevel,ts=e.unstable_ImmediatePriority,ns=e.unstable_UserBlockingPriority,Ji=e.unstable_NormalPriority,Lr=e.unstable_LowPriority,Ai=e.unstable_IdlePriority,Gr=e.log,Zo=e.unstable_setDisableYieldValue,bi=null,kt=null;function En(t){if(typeof Gr=="function"&&Zo(t),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(bi,t)}catch{}}var Nt=Math.clz32?Math.clz32:Br,Wo=Math.log,Hr=Math.LN2;function Br(t){return t>>>=0,t===0?32:31-(Wo(t)/Hr|0)|0}var Ki=256,Xi=262144,Qi=4194304;function In(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ie(t,i,l){var a=t.pendingLanes;if(a===0)return 0;var d=0,y=t.suspendedLanes,C=t.pingedLanes;t=t.warmLanes;var _=a&134217727;return _!==0?(a=_&~y,a!==0?d=In(a):(C&=_,C!==0?d=In(C):l||(l=_&~t,l!==0&&(d=In(l))))):(_=a&~y,_!==0?d=In(_):C!==0?d=In(C):l||(l=a&~t,l!==0&&(d=In(l)))),d===0?0:i!==0&&i!==d&&(i&y)===0&&(y=d&-d,l=i&-i,y>=l||y===32&&(l&4194048)!==0)?i:d}function le(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function z(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ee(){var t=Qi;return Qi<<=1,(Qi&62914560)===0&&(Qi=4194304),t}function J(t){for(var i=[],l=0;31>l;l++)i.push(t);return i}function fe(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Z(t,i,l,a,d,y){var C=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var _=t.entanglements,R=t.expirationTimes,B=t.hiddenUpdates;for(l=C&~l;0<l;){var Q=31-Nt(l),ne=1<<Q;_[Q]=0,R[Q]=-1;var V=B[Q];if(V!==null)for(B[Q]=null,Q=0;Q<V.length;Q++){var F=V[Q];F!==null&&(F.lane&=-536870913)}l&=~ne}a!==0&&W(t,a,0),y!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=y&~(C&~i))}function W(t,i,l){t.pendingLanes|=i,t.suspendedLanes&=~i;var a=31-Nt(i);t.entangledLanes|=i,t.entanglements[a]=t.entanglements[a]|1073741824|l&261930}function Me(t,i){var l=t.entangledLanes|=i;for(t=t.entanglements;l;){var a=31-Nt(l),d=1<<a;d&i|t[a]&i&&(t[a]|=i),l&=~d}}function We(t,i){var l=i&-i;return l=(l&42)!==0?1:ye(l),(l&(t.suspendedLanes|i))!==0?0:l}function ye(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function it(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function nn(){var t=se.p;return t!==0?t:(t=window.event,t===void 0?32:Eh(t.type))}function xt(t,i){var l=se.p;try{return se.p=t,i()}finally{se.p=l}}var Gt=Math.random().toString(36).slice(2),st="__reactFiber$"+Gt,Ht="__reactProps$"+Gt,Zi="__reactContainer$"+Gt,qr="__reactEvents$"+Gt,Xy="__reactListeners$"+Gt,Qy="__reactHandles$"+Gt,Bc="__reactResources$"+Gt,jo="__reactMarker$"+Gt;function zr(t){delete t[st],delete t[Ht],delete t[qr],delete t[Xy],delete t[Qy]}function Wi(t){var i=t[st];if(i)return i;for(var l=t.parentNode;l;){if(i=l[Zi]||l[st]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(t=rh(t);t!==null;){if(l=t[st])return l;t=rh(t)}return i}t=l,l=t.parentNode}return null}function ji(t){if(t=t[st]||t[Zi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function el(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function eo(t){var i=t[Bc];return i||(i=t[Bc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Tt(t){t[jo]=!0}var qc=new Set,zc={};function Mi(t,i){to(t,i),to(t+"Capture",i)}function to(t,i){for(zc[t]=i,t=0;t<i.length;t++)qc.add(i[t])}var Zy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vc={},Oc={};function Wy(t){return St.call(Oc,t)?!0:St.call(Vc,t)?!1:Zy.test(t)?Oc[t]=!0:(Vc[t]=!0,!1)}function is(t,i,l){if(Wy(i))if(l===null)t.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var a=i.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+l)}}function os(t,i,l){if(l===null)t.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+l)}}function Dn(t,i,l,a){if(a===null)t.removeAttribute(l);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(i,l,""+a)}}function on(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fc(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function jy(t,i,l){var a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,y=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return d.call(this)},set:function(C){l=""+C,y.call(this,C)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(C){l=""+C},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Vr(t){if(!t._valueTracker){var i=Fc(t)?"checked":"value";t._valueTracker=jy(t,i,""+t[i])}}function $c(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var l=i.getValue(),a="";return t&&(a=Fc(t)?t.checked?"true":"false":t.value),t=a,t!==l?(i.setValue(t),!0):!1}function ls(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var e0=/[\n"\\]/g;function ln(t){return t.replace(e0,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Or(t,i,l,a,d,y,C,_){t.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?t.type=C:t.removeAttribute("type"),i!=null?C==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+on(i)):t.value!==""+on(i)&&(t.value=""+on(i)):C!=="submit"&&C!=="reset"||t.removeAttribute("value"),i!=null?Fr(t,C,on(i)):l!=null?Fr(t,C,on(l)):a!=null&&t.removeAttribute("value"),d==null&&y!=null&&(t.defaultChecked=!!y),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.name=""+on(_):t.removeAttribute("name")}function Yc(t,i,l,a,d,y,C,_){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.type=y),i!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){Vr(t);return}l=l!=null?""+on(l):"",i=i!=null?""+on(i):l,_||i===t.value||(t.value=i),t.defaultValue=i}a=a??d,a=typeof a!="function"&&typeof a!="symbol"&&!!a,t.checked=_?t.checked:!!a,t.defaultChecked=!!a,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(t.name=C),Vr(t)}function Fr(t,i,l){i==="number"&&ls(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function no(t,i,l,a){if(t=t.options,i){i={};for(var d=0;d<l.length;d++)i["$"+l[d]]=!0;for(l=0;l<t.length;l++)d=i.hasOwnProperty("$"+t[l].value),t[l].selected!==d&&(t[l].selected=d),d&&a&&(t[l].defaultSelected=!0)}else{for(l=""+on(l),i=null,d=0;d<t.length;d++){if(t[d].value===l){t[d].selected=!0,a&&(t[d].defaultSelected=!0);return}i!==null||t[d].disabled||(i=t[d])}i!==null&&(i.selected=!0)}}function Jc(t,i,l){if(i!=null&&(i=""+on(i),i!==t.value&&(t.value=i),l==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=l!=null?""+on(l):""}function Kc(t,i,l,a){if(i==null){if(a!=null){if(l!=null)throw Error(s(92));if(Le(a)){if(1<a.length)throw Error(s(93));a=a[0]}l=a}l==null&&(l=""),i=l}l=on(i),t.defaultValue=l,a=t.textContent,a===l&&a!==""&&a!==null&&(t.value=a),Vr(t)}function io(t,i){if(i){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=i;return}}t.textContent=i}var t0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xc(t,i,l){var a=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?a?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":a?t.setProperty(i,l):typeof l!="number"||l===0||t0.has(i)?i==="float"?t.cssFloat=l:t[i]=(""+l).trim():t[i]=l+"px"}function Qc(t,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,l!=null){for(var a in l)!l.hasOwnProperty(a)||i!=null&&i.hasOwnProperty(a)||(a.indexOf("--")===0?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="");for(var d in i)a=i[d],i.hasOwnProperty(d)&&l[d]!==a&&Xc(t,d,a)}else for(var y in i)i.hasOwnProperty(y)&&Xc(t,y,i[y])}function $r(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),i0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ss(t){return i0.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function wn(){}var Yr=null;function Jr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var oo=null,lo=null;function Zc(t){var i=ji(t);if(i&&(t=i.stateNode)){var l=t[Ht]||null;e:switch(t=i.stateNode,i.type){case"input":if(Or(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+ln(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var a=l[i];if(a!==t&&a.form===t.form){var d=a[Ht]||null;if(!d)throw Error(s(90));Or(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<l.length;i++)a=l[i],a.form===t.form&&$c(a)}break e;case"textarea":Jc(t,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&no(t,!!l.multiple,i,!1)}}}var Kr=!1;function Wc(t,i,l){if(Kr)return t(i,l);Kr=!0;try{var a=t(i);return a}finally{if(Kr=!1,(oo!==null||lo!==null)&&(Js(),oo&&(i=oo,t=lo,lo=oo=null,Zc(i),t)))for(i=0;i<t.length;i++)Zc(t[i])}}function tl(t,i){var l=t.stateNode;if(l===null)return null;var a=l[Ht]||null;if(a===null)return null;l=a[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xr=!1;if(kn)try{var nl={};Object.defineProperty(nl,"passive",{get:function(){Xr=!0}}),window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch{Xr=!1}var Wn=null,Qr=null,rs=null;function jc(){if(rs)return rs;var t,i=Qr,l=i.length,a,d="value"in Wn?Wn.value:Wn.textContent,y=d.length;for(t=0;t<l&&i[t]===d[t];t++);var C=l-t;for(a=1;a<=C&&i[l-a]===d[y-a];a++);return rs=d.slice(t,1<a?1-a:void 0)}function as(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function us(){return!0}function ef(){return!1}function Bt(t){function i(l,a,d,y,C){this._reactName=l,this._targetInst=d,this.type=a,this.nativeEvent=y,this.target=C,this.currentTarget=null;for(var _ in t)t.hasOwnProperty(_)&&(l=t[_],this[_]=l?l(y):y[_]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?us:ef,this.isPropagationStopped=ef,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=us)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=us)},persist:function(){},isPersistent:us}),i}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cs=Bt(Ni),il=x({},Ni,{view:0,detail:0}),o0=Bt(il),Zr,Wr,ol,fs=x({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ea,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ol&&(ol&&t.type==="mousemove"?(Zr=t.screenX-ol.screenX,Wr=t.screenY-ol.screenY):Wr=Zr=0,ol=t),Zr)},movementY:function(t){return"movementY"in t?t.movementY:Wr}}),tf=Bt(fs),l0=x({},fs,{dataTransfer:0}),s0=Bt(l0),r0=x({},il,{relatedTarget:0}),jr=Bt(r0),a0=x({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),u0=Bt(a0),c0=x({},Ni,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),f0=Bt(c0),d0=x({},Ni,{data:0}),nf=Bt(d0),p0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},m0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g0(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=m0[t])?!!i[t]:!1}function ea(){return g0}var y0=x({},il,{key:function(t){if(t.key){var i=p0[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=as(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?h0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ea,charCode:function(t){return t.type==="keypress"?as(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?as(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),v0=Bt(y0),x0=x({},fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),of=Bt(x0),T0=x({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ea}),C0=Bt(T0),S0=x({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),E0=Bt(S0),_0=x({},fs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),A0=Bt(_0),b0=x({},Ni,{newState:0,oldState:0}),M0=Bt(b0),N0=[9,13,27,32],ta=kn&&"CompositionEvent"in window,ll=null;kn&&"documentMode"in document&&(ll=document.documentMode);var R0=kn&&"TextEvent"in window&&!ll,lf=kn&&(!ta||ll&&8<ll&&11>=ll),sf=" ",rf=!1;function af(t,i){switch(t){case"keyup":return N0.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var so=!1;function I0(t,i){switch(t){case"compositionend":return uf(i);case"keypress":return i.which!==32?null:(rf=!0,sf);case"textInput":return t=i.data,t===sf&&rf?null:t;default:return null}}function D0(t,i){if(so)return t==="compositionend"||!ta&&af(t,i)?(t=jc(),rs=Qr=Wn=null,so=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return lf&&i.locale!=="ko"?null:i.data;default:return null}}var w0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!w0[t.type]:i==="textarea"}function ff(t,i,l,a){oo?lo?lo.push(a):lo=[a]:oo=a,i=er(i,"onChange"),0<i.length&&(l=new cs("onChange","change",null,l,a),t.push({event:l,listeners:i}))}var sl=null,rl=null;function k0(t){Jp(t,0)}function ds(t){var i=el(t);if($c(i))return t}function df(t,i){if(t==="change")return i}var pf=!1;if(kn){var na;if(kn){var ia="oninput"in document;if(!ia){var hf=document.createElement("div");hf.setAttribute("oninput","return;"),ia=typeof hf.oninput=="function"}na=ia}else na=!1;pf=na&&(!document.documentMode||9<document.documentMode)}function mf(){sl&&(sl.detachEvent("onpropertychange",gf),rl=sl=null)}function gf(t){if(t.propertyName==="value"&&ds(rl)){var i=[];ff(i,rl,t,Jr(t)),Wc(k0,i)}}function U0(t,i,l){t==="focusin"?(mf(),sl=i,rl=l,sl.attachEvent("onpropertychange",gf)):t==="focusout"&&mf()}function P0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ds(rl)}function L0(t,i){if(t==="click")return ds(i)}function G0(t,i){if(t==="input"||t==="change")return ds(i)}function H0(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Yt=typeof Object.is=="function"?Object.is:H0;function al(t,i){if(Yt(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var l=Object.keys(t),a=Object.keys(i);if(l.length!==a.length)return!1;for(a=0;a<l.length;a++){var d=l[a];if(!St.call(i,d)||!Yt(t[d],i[d]))return!1}return!0}function yf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vf(t,i){var l=yf(t);t=0;for(var a;l;){if(l.nodeType===3){if(a=t+l.textContent.length,t<=i&&a>=i)return{node:l,offset:i-t};t=a}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=yf(l)}}function xf(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?xf(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Tf(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ls(t.document);i instanceof t.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)t=i.contentWindow;else break;i=ls(t.document)}return i}function oa(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var B0=kn&&"documentMode"in document&&11>=document.documentMode,ro=null,la=null,ul=null,sa=!1;function Cf(t,i,l){var a=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;sa||ro==null||ro!==ls(a)||(a=ro,"selectionStart"in a&&oa(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ul&&al(ul,a)||(ul=a,a=er(la,"onSelect"),0<a.length&&(i=new cs("onSelect","select",null,i,l),t.push({event:i,listeners:a}),i.target=ro)))}function Ri(t,i){var l={};return l[t.toLowerCase()]=i.toLowerCase(),l["Webkit"+t]="webkit"+i,l["Moz"+t]="moz"+i,l}var ao={animationend:Ri("Animation","AnimationEnd"),animationiteration:Ri("Animation","AnimationIteration"),animationstart:Ri("Animation","AnimationStart"),transitionrun:Ri("Transition","TransitionRun"),transitionstart:Ri("Transition","TransitionStart"),transitioncancel:Ri("Transition","TransitionCancel"),transitionend:Ri("Transition","TransitionEnd")},ra={},Sf={};kn&&(Sf=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function Ii(t){if(ra[t])return ra[t];if(!ao[t])return t;var i=ao[t],l;for(l in i)if(i.hasOwnProperty(l)&&l in Sf)return ra[t]=i[l];return t}var Ef=Ii("animationend"),_f=Ii("animationiteration"),Af=Ii("animationstart"),q0=Ii("transitionrun"),z0=Ii("transitionstart"),V0=Ii("transitioncancel"),bf=Ii("transitionend"),Mf=new Map,aa="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");aa.push("scrollEnd");function gn(t,i){Mf.set(t,i),Mi(i,[t])}var ps=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},sn=[],uo=0,ua=0;function hs(){for(var t=uo,i=ua=uo=0;i<t;){var l=sn[i];sn[i++]=null;var a=sn[i];sn[i++]=null;var d=sn[i];sn[i++]=null;var y=sn[i];if(sn[i++]=null,a!==null&&d!==null){var C=a.pending;C===null?d.next=d:(d.next=C.next,C.next=d),a.pending=d}y!==0&&Nf(l,d,y)}}function ms(t,i,l,a){sn[uo++]=t,sn[uo++]=i,sn[uo++]=l,sn[uo++]=a,ua|=a,t.lanes|=a,t=t.alternate,t!==null&&(t.lanes|=a)}function ca(t,i,l,a){return ms(t,i,l,a),gs(t)}function Di(t,i){return ms(t,null,null,i),gs(t)}function Nf(t,i,l){t.lanes|=l;var a=t.alternate;a!==null&&(a.lanes|=l);for(var d=!1,y=t.return;y!==null;)y.childLanes|=l,a=y.alternate,a!==null&&(a.childLanes|=l),y.tag===22&&(t=y.stateNode,t===null||t._visibility&1||(d=!0)),t=y,y=y.return;return t.tag===3?(y=t.stateNode,d&&i!==null&&(d=31-Nt(l),t=y.hiddenUpdates,a=t[d],a===null?t[d]=[i]:a.push(i),i.lane=l|536870912),y):null}function gs(t){if(50<Dl)throw Dl=0,xu=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var co={};function O0(t,i,l,a){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,i,l,a){return new O0(t,i,l,a)}function fa(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Un(t,i){var l=t.alternate;return l===null?(l=Jt(t.tag,i,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=i,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,i=t.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function Rf(t,i){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,i=l.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function ys(t,i,l,a,d,y){var C=0;if(a=t,typeof t=="function")fa(t)&&(C=1);else if(typeof t=="string")C=Kv(t,l,ue.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Y:return t=Jt(31,l,i,d),t.elementType=Y,t.lanes=y,t;case A:return wi(l.children,d,y,i);case q:C=8,d|=24;break;case w:return t=Jt(12,l,i,d|2),t.elementType=w,t.lanes=y,t;case N:return t=Jt(13,l,i,d),t.elementType=N,t.lanes=y,t;case $:return t=Jt(19,l,i,d),t.elementType=$,t.lanes=y,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:C=10;break e;case M:C=9;break e;case P:C=11;break e;case oe:C=14;break e;case ce:C=16,a=null;break e}C=29,l=Error(s(130,t===null?"null":typeof t,"")),a=null}return i=Jt(C,l,i,d),i.elementType=t,i.type=a,i.lanes=y,i}function wi(t,i,l,a){return t=Jt(7,t,a,i),t.lanes=l,t}function da(t,i,l){return t=Jt(6,t,null,i),t.lanes=l,t}function If(t){var i=Jt(18,null,null,0);return i.stateNode=t,i}function pa(t,i,l){return i=Jt(4,t.children!==null?t.children:[],t.key,i),i.lanes=l,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Df=new WeakMap;function rn(t,i){if(typeof t=="object"&&t!==null){var l=Df.get(t);return l!==void 0?l:(i={value:t,source:i,stack:rt(i)},Df.set(t,i),i)}return{value:t,source:i,stack:rt(i)}}var fo=[],po=0,vs=null,cl=0,an=[],un=0,jn=null,_n=1,An="";function Pn(t,i){fo[po++]=cl,fo[po++]=vs,vs=t,cl=i}function wf(t,i,l){an[un++]=_n,an[un++]=An,an[un++]=jn,jn=t;var a=_n;t=An;var d=32-Nt(a)-1;a&=~(1<<d),l+=1;var y=32-Nt(i)+d;if(30<y){var C=d-d%5;y=(a&(1<<C)-1).toString(32),a>>=C,d-=C,_n=1<<32-Nt(i)+d|l<<d|a,An=y+t}else _n=1<<y|l<<d|a,An=t}function ha(t){t.return!==null&&(Pn(t,1),wf(t,1,0))}function ma(t){for(;t===vs;)vs=fo[--po],fo[po]=null,cl=fo[--po],fo[po]=null;for(;t===jn;)jn=an[--un],an[un]=null,An=an[--un],an[un]=null,_n=an[--un],an[un]=null}function kf(t,i){an[un++]=_n,an[un++]=An,an[un++]=jn,_n=i.id,An=i.overflow,jn=t}var Et=null,je=null,Be=!1,ei=null,cn=!1,ga=Error(s(519));function ti(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fl(rn(i,t)),ga}function Uf(t){var i=t.stateNode,l=t.type,a=t.memoizedProps;switch(i[st]=t,i[Ht]=a,l){case"dialog":we("cancel",i),we("close",i);break;case"iframe":case"object":case"embed":we("load",i);break;case"video":case"audio":for(l=0;l<kl.length;l++)we(kl[l],i);break;case"source":we("error",i);break;case"img":case"image":case"link":we("error",i),we("load",i);break;case"details":we("toggle",i);break;case"input":we("invalid",i),Yc(i,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":we("invalid",i);break;case"textarea":we("invalid",i),Kc(i,a.value,a.defaultValue,a.children)}l=a.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||a.suppressHydrationWarning===!0||Zp(i.textContent,l)?(a.popover!=null&&(we("beforetoggle",i),we("toggle",i)),a.onScroll!=null&&we("scroll",i),a.onScrollEnd!=null&&we("scrollend",i),a.onClick!=null&&(i.onclick=wn),i=!0):i=!1,i||ti(t,!0)}function Pf(t){for(Et=t.return;Et;)switch(Et.tag){case 5:case 31:case 13:cn=!1;return;case 27:case 3:cn=!0;return;default:Et=Et.return}}function ho(t){if(t!==Et)return!1;if(!Be)return Pf(t),Be=!0,!1;var i=t.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||Uu(t.type,t.memoizedProps)),l=!l),l&&je&&ti(t),Pf(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));je=sh(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));je=sh(t)}else i===27?(i=je,mi(t.type)?(t=Bu,Bu=null,je=t):je=i):je=Et?dn(t.stateNode.nextSibling):null;return!0}function ki(){je=Et=null,Be=!1}function ya(){var t=ei;return t!==null&&(Ot===null?Ot=t:Ot.push.apply(Ot,t),ei=null),t}function fl(t){ei===null?ei=[t]:ei.push(t)}var va=I(null),Ui=null,Ln=null;function ni(t,i,l){re(va,i._currentValue),i._currentValue=l}function Gn(t){t._currentValue=va.current,j(va)}function xa(t,i,l){for(;t!==null;){var a=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,a!==null&&(a.childLanes|=i)):a!==null&&(a.childLanes&i)!==i&&(a.childLanes|=i),t===l)break;t=t.return}}function Ta(t,i,l,a){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var y=d.dependencies;if(y!==null){var C=d.child;y=y.firstContext;e:for(;y!==null;){var _=y;y=d;for(var R=0;R<i.length;R++)if(_.context===i[R]){y.lanes|=l,_=y.alternate,_!==null&&(_.lanes|=l),xa(y.return,l,t),a||(C=null);break e}y=_.next}}else if(d.tag===18){if(C=d.return,C===null)throw Error(s(341));C.lanes|=l,y=C.alternate,y!==null&&(y.lanes|=l),xa(C,l,t),C=null}else C=d.child;if(C!==null)C.return=d;else for(C=d;C!==null;){if(C===t){C=null;break}if(d=C.sibling,d!==null){d.return=C.return,C=d;break}C=C.return}d=C}}function mo(t,i,l,a){t=null;for(var d=i,y=!1;d!==null;){if(!y){if((d.flags&524288)!==0)y=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var C=d.alternate;if(C===null)throw Error(s(387));if(C=C.memoizedProps,C!==null){var _=d.type;Yt(d.pendingProps.value,C.value)||(t!==null?t.push(_):t=[_])}}else if(d===K.current){if(C=d.alternate,C===null)throw Error(s(387));C.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Hl):t=[Hl])}d=d.return}t!==null&&Ta(i,t,l,a),i.flags|=262144}function xs(t){for(t=t.firstContext;t!==null;){if(!Yt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Pi(t){Ui=t,Ln=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function _t(t){return Lf(Ui,t)}function Ts(t,i){return Ui===null&&Pi(t),Lf(t,i)}function Lf(t,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},Ln===null){if(t===null)throw Error(s(308));Ln=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Ln=Ln.next=i;return l}var F0=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(l,a){t.push(a)}};this.abort=function(){i.aborted=!0,t.forEach(function(l){return l()})}},$0=e.unstable_scheduleCallback,Y0=e.unstable_NormalPriority,dt={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ca(){return{controller:new F0,data:new Map,refCount:0}}function dl(t){t.refCount--,t.refCount===0&&$0(Y0,function(){t.controller.abort()})}var pl=null,Sa=0,go=0,yo=null;function J0(t,i){if(pl===null){var l=pl=[];Sa=0,go=Au(),yo={status:"pending",value:void 0,then:function(a){l.push(a)}}}return Sa++,i.then(Gf,Gf),i}function Gf(){if(--Sa===0&&pl!==null){yo!==null&&(yo.status="fulfilled");var t=pl;pl=null,go=0,yo=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function K0(t,i){var l=[],a={status:"pending",value:null,reason:null,then:function(d){l.push(d)}};return t.then(function(){a.status="fulfilled",a.value=i;for(var d=0;d<l.length;d++)(0,l[d])(i)},function(d){for(a.status="rejected",a.reason=d,d=0;d<l.length;d++)(0,l[d])(void 0)}),a}var Hf=G.S;G.S=function(t,i){Cp=wt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&J0(t,i),Hf!==null&&Hf(t,i)};var Li=I(null);function Ea(){var t=Li.current;return t!==null?t:Ze.pooledCache}function Cs(t,i){i===null?re(Li,Li.current):re(Li,i.pool)}function Bf(){var t=Ea();return t===null?null:{parent:dt._currentValue,pool:t}}var vo=Error(s(460)),_a=Error(s(474)),Ss=Error(s(542)),Es={then:function(){}};function qf(t){return t=t.status,t==="fulfilled"||t==="rejected"}function zf(t,i,l){switch(l=t[l],l===void 0?t.push(i):l!==i&&(i.then(wn,wn),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Of(t),t;default:if(typeof i.status=="string")i.then(wn,wn);else{if(t=Ze,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(a){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=a}},function(a){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=a}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Of(t),t}throw Hi=i,vo}}function Gi(t){try{var i=t._init;return i(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Hi=l,vo):l}}var Hi=null;function Vf(){if(Hi===null)throw Error(s(459));var t=Hi;return Hi=null,t}function Of(t){if(t===vo||t===Ss)throw Error(s(483))}var xo=null,hl=0;function _s(t){var i=hl;return hl+=1,xo===null&&(xo=[]),zf(xo,t,i)}function ml(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function As(t,i){throw i.$$typeof===T?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Ff(t){function i(U,D){if(t){var H=U.deletions;H===null?(U.deletions=[D],U.flags|=16):H.push(D)}}function l(U,D){if(!t)return null;for(;D!==null;)i(U,D),D=D.sibling;return null}function a(U){for(var D=new Map;U!==null;)U.key!==null?D.set(U.key,U):D.set(U.index,U),U=U.sibling;return D}function d(U,D){return U=Un(U,D),U.index=0,U.sibling=null,U}function y(U,D,H){return U.index=H,t?(H=U.alternate,H!==null?(H=H.index,H<D?(U.flags|=67108866,D):H):(U.flags|=67108866,D)):(U.flags|=1048576,D)}function C(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function _(U,D,H,te){return D===null||D.tag!==6?(D=da(H,U.mode,te),D.return=U,D):(D=d(D,H),D.return=U,D)}function R(U,D,H,te){var Te=H.type;return Te===A?Q(U,D,H.props.children,te,H.key):D!==null&&(D.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===ce&&Gi(Te)===D.type)?(D=d(D,H.props),ml(D,H),D.return=U,D):(D=ys(H.type,H.key,H.props,null,U.mode,te),ml(D,H),D.return=U,D)}function B(U,D,H,te){return D===null||D.tag!==4||D.stateNode.containerInfo!==H.containerInfo||D.stateNode.implementation!==H.implementation?(D=pa(H,U.mode,te),D.return=U,D):(D=d(D,H.children||[]),D.return=U,D)}function Q(U,D,H,te,Te){return D===null||D.tag!==7?(D=wi(H,U.mode,te,Te),D.return=U,D):(D=d(D,H),D.return=U,D)}function ne(U,D,H){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=da(""+D,U.mode,H),D.return=U,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case E:return H=ys(D.type,D.key,D.props,null,U.mode,H),ml(H,D),H.return=U,H;case b:return D=pa(D,U.mode,H),D.return=U,D;case ce:return D=Gi(D),ne(U,D,H)}if(Le(D)||O(D))return D=wi(D,U.mode,H,null),D.return=U,D;if(typeof D.then=="function")return ne(U,_s(D),H);if(D.$$typeof===k)return ne(U,Ts(U,D),H);As(U,D)}return null}function V(U,D,H,te){var Te=D!==null?D.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Te!==null?null:_(U,D,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case E:return H.key===Te?R(U,D,H,te):null;case b:return H.key===Te?B(U,D,H,te):null;case ce:return H=Gi(H),V(U,D,H,te)}if(Le(H)||O(H))return Te!==null?null:Q(U,D,H,te,null);if(typeof H.then=="function")return V(U,D,_s(H),te);if(H.$$typeof===k)return V(U,D,Ts(U,H),te);As(U,H)}return null}function F(U,D,H,te,Te){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return U=U.get(H)||null,_(D,U,""+te,Te);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case E:return U=U.get(te.key===null?H:te.key)||null,R(D,U,te,Te);case b:return U=U.get(te.key===null?H:te.key)||null,B(D,U,te,Te);case ce:return te=Gi(te),F(U,D,H,te,Te)}if(Le(te)||O(te))return U=U.get(H)||null,Q(D,U,te,Te,null);if(typeof te.then=="function")return F(U,D,H,_s(te),Te);if(te.$$typeof===k)return F(U,D,H,Ts(D,te),Te);As(D,te)}return null}function he(U,D,H,te){for(var Te=null,qe=null,ge=D,Re=D=0,Pe=null;ge!==null&&Re<H.length;Re++){ge.index>Re?(Pe=ge,ge=null):Pe=ge.sibling;var ze=V(U,ge,H[Re],te);if(ze===null){ge===null&&(ge=Pe);break}t&&ge&&ze.alternate===null&&i(U,ge),D=y(ze,D,Re),qe===null?Te=ze:qe.sibling=ze,qe=ze,ge=Pe}if(Re===H.length)return l(U,ge),Be&&Pn(U,Re),Te;if(ge===null){for(;Re<H.length;Re++)ge=ne(U,H[Re],te),ge!==null&&(D=y(ge,D,Re),qe===null?Te=ge:qe.sibling=ge,qe=ge);return Be&&Pn(U,Re),Te}for(ge=a(ge);Re<H.length;Re++)Pe=F(ge,U,Re,H[Re],te),Pe!==null&&(t&&Pe.alternate!==null&&ge.delete(Pe.key===null?Re:Pe.key),D=y(Pe,D,Re),qe===null?Te=Pe:qe.sibling=Pe,qe=Pe);return t&&ge.forEach(function(Ti){return i(U,Ti)}),Be&&Pn(U,Re),Te}function Se(U,D,H,te){if(H==null)throw Error(s(151));for(var Te=null,qe=null,ge=D,Re=D=0,Pe=null,ze=H.next();ge!==null&&!ze.done;Re++,ze=H.next()){ge.index>Re?(Pe=ge,ge=null):Pe=ge.sibling;var Ti=V(U,ge,ze.value,te);if(Ti===null){ge===null&&(ge=Pe);break}t&&ge&&Ti.alternate===null&&i(U,ge),D=y(Ti,D,Re),qe===null?Te=Ti:qe.sibling=Ti,qe=Ti,ge=Pe}if(ze.done)return l(U,ge),Be&&Pn(U,Re),Te;if(ge===null){for(;!ze.done;Re++,ze=H.next())ze=ne(U,ze.value,te),ze!==null&&(D=y(ze,D,Re),qe===null?Te=ze:qe.sibling=ze,qe=ze);return Be&&Pn(U,Re),Te}for(ge=a(ge);!ze.done;Re++,ze=H.next())ze=F(ge,U,Re,ze.value,te),ze!==null&&(t&&ze.alternate!==null&&ge.delete(ze.key===null?Re:ze.key),D=y(ze,D,Re),qe===null?Te=ze:qe.sibling=ze,qe=ze);return t&&ge.forEach(function(lx){return i(U,lx)}),Be&&Pn(U,Re),Te}function Xe(U,D,H,te){if(typeof H=="object"&&H!==null&&H.type===A&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case E:e:{for(var Te=H.key;D!==null;){if(D.key===Te){if(Te=H.type,Te===A){if(D.tag===7){l(U,D.sibling),te=d(D,H.props.children),te.return=U,U=te;break e}}else if(D.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===ce&&Gi(Te)===D.type){l(U,D.sibling),te=d(D,H.props),ml(te,H),te.return=U,U=te;break e}l(U,D);break}else i(U,D);D=D.sibling}H.type===A?(te=wi(H.props.children,U.mode,te,H.key),te.return=U,U=te):(te=ys(H.type,H.key,H.props,null,U.mode,te),ml(te,H),te.return=U,U=te)}return C(U);case b:e:{for(Te=H.key;D!==null;){if(D.key===Te)if(D.tag===4&&D.stateNode.containerInfo===H.containerInfo&&D.stateNode.implementation===H.implementation){l(U,D.sibling),te=d(D,H.children||[]),te.return=U,U=te;break e}else{l(U,D);break}else i(U,D);D=D.sibling}te=pa(H,U.mode,te),te.return=U,U=te}return C(U);case ce:return H=Gi(H),Xe(U,D,H,te)}if(Le(H))return he(U,D,H,te);if(O(H)){if(Te=O(H),typeof Te!="function")throw Error(s(150));return H=Te.call(H),Se(U,D,H,te)}if(typeof H.then=="function")return Xe(U,D,_s(H),te);if(H.$$typeof===k)return Xe(U,D,Ts(U,H),te);As(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,D!==null&&D.tag===6?(l(U,D.sibling),te=d(D,H),te.return=U,U=te):(l(U,D),te=da(H,U.mode,te),te.return=U,U=te),C(U)):l(U,D)}return function(U,D,H,te){try{hl=0;var Te=Xe(U,D,H,te);return xo=null,Te}catch(ge){if(ge===vo||ge===Ss)throw ge;var qe=Jt(29,ge,null,U.mode);return qe.lanes=te,qe.return=U,qe}finally{}}}var Bi=Ff(!0),$f=Ff(!1),ii=!1;function Aa(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ba(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function oi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function li(t,i,l){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(Fe&2)!==0){var d=a.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),a.pending=i,i=gs(t),Nf(t,null,l),i}return ms(t,a,i,l),gs(t)}function gl(t,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var a=i.lanes;a&=t.pendingLanes,l|=a,i.lanes=l,Me(t,l)}}function Ma(t,i){var l=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,l===a)){var d=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?d=y=C:y=y.next=C,l=l.next}while(l!==null);y===null?d=y=i:y=y.next=i}else d=y=i;l={baseState:a.baseState,firstBaseUpdate:d,lastBaseUpdate:y,shared:a.shared,callbacks:a.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=i:t.next=i,l.lastBaseUpdate=i}var Na=!1;function yl(){if(Na){var t=yo;if(t!==null)throw t}}function vl(t,i,l,a){Na=!1;var d=t.updateQueue;ii=!1;var y=d.firstBaseUpdate,C=d.lastBaseUpdate,_=d.shared.pending;if(_!==null){d.shared.pending=null;var R=_,B=R.next;R.next=null,C===null?y=B:C.next=B,C=R;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,_=Q.lastBaseUpdate,_!==C&&(_===null?Q.firstBaseUpdate=B:_.next=B,Q.lastBaseUpdate=R))}if(y!==null){var ne=d.baseState;C=0,Q=B=R=null,_=y;do{var V=_.lane&-536870913,F=V!==_.lane;if(F?(Ue&V)===V:(a&V)===V){V!==0&&V===go&&(Na=!0),Q!==null&&(Q=Q.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var he=t,Se=_;V=i;var Xe=l;switch(Se.tag){case 1:if(he=Se.payload,typeof he=="function"){ne=he.call(Xe,ne,V);break e}ne=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=Se.payload,V=typeof he=="function"?he.call(Xe,ne,V):he,V==null)break e;ne=x({},ne,V);break e;case 2:ii=!0}}V=_.callback,V!==null&&(t.flags|=64,F&&(t.flags|=8192),F=d.callbacks,F===null?d.callbacks=[V]:F.push(V))}else F={lane:V,tag:_.tag,payload:_.payload,callback:_.callback,next:null},Q===null?(B=Q=F,R=ne):Q=Q.next=F,C|=V;if(_=_.next,_===null){if(_=d.shared.pending,_===null)break;F=_,_=F.next,F.next=null,d.lastBaseUpdate=F,d.shared.pending=null}}while(!0);Q===null&&(R=ne),d.baseState=R,d.firstBaseUpdate=B,d.lastBaseUpdate=Q,y===null&&(d.shared.lanes=0),ci|=C,t.lanes=C,t.memoizedState=ne}}function Yf(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Jf(t,i){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)Yf(l[t],i)}var To=I(null),bs=I(0);function Kf(t,i){t=Yn,re(bs,t),re(To,i),Yn=t|i.baseLanes}function Ra(){re(bs,Yn),re(To,To.current)}function Ia(){Yn=bs.current,j(To),j(bs)}var Kt=I(null),fn=null;function si(t){var i=t.alternate;re(ct,ct.current&1),re(Kt,t),fn===null&&(i===null||To.current!==null||i.memoizedState!==null)&&(fn=t)}function Da(t){re(ct,ct.current),re(Kt,t),fn===null&&(fn=t)}function Xf(t){t.tag===22?(re(ct,ct.current),re(Kt,t),fn===null&&(fn=t)):ri()}function ri(){re(ct,ct.current),re(Kt,Kt.current)}function Xt(t){j(Kt),fn===t&&(fn=null),j(ct)}var ct=I(0);function Ms(t){for(var i=t;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Gu(l)||Hu(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Hn=0,Ne=null,Je=null,pt=null,Ns=!1,Co=!1,qi=!1,Rs=0,xl=0,So=null,X0=0;function at(){throw Error(s(321))}function wa(t,i){if(i===null)return!1;for(var l=0;l<i.length&&l<t.length;l++)if(!Yt(t[l],i[l]))return!1;return!0}function ka(t,i,l,a,d,y){return Hn=y,Ne=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=t===null||t.memoizedState===null?wd:Ka,qi=!1,y=l(a,d),qi=!1,Co&&(y=Zf(i,l,a,d)),Qf(t),y}function Qf(t){G.H=Sl;var i=Je!==null&&Je.next!==null;if(Hn=0,pt=Je=Ne=null,Ns=!1,xl=0,So=null,i)throw Error(s(300));t===null||ht||(t=t.dependencies,t!==null&&xs(t)&&(ht=!0))}function Zf(t,i,l,a){Ne=t;var d=0;do{if(Co&&(So=null),xl=0,Co=!1,25<=d)throw Error(s(301));if(d+=1,pt=Je=null,t.updateQueue!=null){var y=t.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}G.H=kd,y=i(l,a)}while(Co);return y}function Q0(){var t=G.H,i=t.useState()[0];return i=typeof i.then=="function"?Tl(i):i,t=t.useState()[0],(Je!==null?Je.memoizedState:null)!==t&&(Ne.flags|=1024),i}function Ua(){var t=Rs!==0;return Rs=0,t}function Pa(t,i,l){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~l}function La(t){if(Ns){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Ns=!1}Hn=0,pt=Je=Ne=null,Co=!1,xl=Rs=0,So=null}function Ut(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Ne.memoizedState=pt=t:pt=pt.next=t,pt}function ft(){if(Je===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var i=pt===null?Ne.memoizedState:pt.next;if(i!==null)pt=i,Je=t;else{if(t===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},pt===null?Ne.memoizedState=pt=t:pt=pt.next=t}return pt}function Is(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(t){var i=xl;return xl+=1,So===null&&(So=[]),t=zf(So,t,i),i=Ne,(pt===null?i.memoizedState:pt.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?wd:Ka),t}function Ds(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Tl(t);if(t.$$typeof===k)return _t(t)}throw Error(s(438,String(t)))}function Ga(t){var i=null,l=Ne.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var a=Ne.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(i={data:a.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=Is(),Ne.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(t),a=0;a<t;a++)l[a]=de;return i.index++,l}function Bn(t,i){return typeof i=="function"?i(t):i}function ws(t){var i=ft();return Ha(i,Je,t)}function Ha(t,i,l){var a=t.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=l;var d=t.baseQueue,y=a.pending;if(y!==null){if(d!==null){var C=d.next;d.next=y.next,y.next=C}i.baseQueue=d=y,a.pending=null}if(y=t.baseState,d===null)t.memoizedState=y;else{i=d.next;var _=C=null,R=null,B=i,Q=!1;do{var ne=B.lane&-536870913;if(ne!==B.lane?(Ue&ne)===ne:(Hn&ne)===ne){var V=B.revertLane;if(V===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),ne===go&&(Q=!0);else if((Hn&V)===V){B=B.next,V===go&&(Q=!0);continue}else ne={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},R===null?(_=R=ne,C=y):R=R.next=ne,Ne.lanes|=V,ci|=V;ne=B.action,qi&&l(y,ne),y=B.hasEagerState?B.eagerState:l(y,ne)}else V={lane:ne,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},R===null?(_=R=V,C=y):R=R.next=V,Ne.lanes|=ne,ci|=ne;B=B.next}while(B!==null&&B!==i);if(R===null?C=y:R.next=_,!Yt(y,t.memoizedState)&&(ht=!0,Q&&(l=yo,l!==null)))throw l;t.memoizedState=y,t.baseState=C,t.baseQueue=R,a.lastRenderedState=y}return d===null&&(a.lanes=0),[t.memoizedState,a.dispatch]}function Ba(t){var i=ft(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=t;var a=l.dispatch,d=l.pending,y=i.memoizedState;if(d!==null){l.pending=null;var C=d=d.next;do y=t(y,C.action),C=C.next;while(C!==d);Yt(y,i.memoizedState)||(ht=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),l.lastRenderedState=y}return[y,a]}function Wf(t,i,l){var a=Ne,d=ft(),y=Be;if(y){if(l===void 0)throw Error(s(407));l=l()}else l=i();var C=!Yt((Je||d).memoizedState,l);if(C&&(d.memoizedState=l,ht=!0),d=d.queue,Va(td.bind(null,a,d,t),[t]),d.getSnapshot!==i||C||pt!==null&&pt.memoizedState.tag&1){if(a.flags|=2048,Eo(9,{destroy:void 0},ed.bind(null,a,d,l,i),null),Ze===null)throw Error(s(349));y||(Hn&127)!==0||jf(a,i,l)}return l}function jf(t,i,l){t.flags|=16384,t={getSnapshot:i,value:l},i=Ne.updateQueue,i===null?(i=Is(),Ne.updateQueue=i,i.stores=[t]):(l=i.stores,l===null?i.stores=[t]:l.push(t))}function ed(t,i,l,a){i.value=l,i.getSnapshot=a,nd(i)&&id(t)}function td(t,i,l){return l(function(){nd(i)&&id(t)})}function nd(t){var i=t.getSnapshot;t=t.value;try{var l=i();return!Yt(t,l)}catch{return!0}}function id(t){var i=Di(t,2);i!==null&&Ft(i,t,2)}function qa(t){var i=Ut();if(typeof t=="function"){var l=t;if(t=l(),qi){En(!0);try{l()}finally{En(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:t},i}function od(t,i,l,a){return t.baseState=l,Ha(t,Je,typeof a=="function"?a:Bn)}function Z0(t,i,l,a,d){if(Ps(t))throw Error(s(485));if(t=i.action,t!==null){var y={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){y.listeners.push(C)}};G.T!==null?l(!0):y.isTransition=!1,a(y),l=i.pending,l===null?(y.next=i.pending=y,ld(i,y)):(y.next=l.next,i.pending=l.next=y)}}function ld(t,i){var l=i.action,a=i.payload,d=t.state;if(i.isTransition){var y=G.T,C={};G.T=C;try{var _=l(d,a),R=G.S;R!==null&&R(C,_),sd(t,i,_)}catch(B){za(t,i,B)}finally{y!==null&&C.types!==null&&(y.types=C.types),G.T=y}}else try{y=l(d,a),sd(t,i,y)}catch(B){za(t,i,B)}}function sd(t,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(a){rd(t,i,a)},function(a){return za(t,i,a)}):rd(t,i,l)}function rd(t,i,l){i.status="fulfilled",i.value=l,ad(i),t.state=l,i=t.pending,i!==null&&(l=i.next,l===i?t.pending=null:(l=l.next,i.next=l,ld(t,l)))}function za(t,i,l){var a=t.pending;if(t.pending=null,a!==null){a=a.next;do i.status="rejected",i.reason=l,ad(i),i=i.next;while(i!==a)}t.action=null}function ad(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function ud(t,i){return i}function cd(t,i){if(Be){var l=Ze.formState;if(l!==null){e:{var a=Ne;if(Be){if(je){t:{for(var d=je,y=cn;d.nodeType!==8;){if(!y){d=null;break t}if(d=dn(d.nextSibling),d===null){d=null;break t}}y=d.data,d=y==="F!"||y==="F"?d:null}if(d){je=dn(d.nextSibling),a=d.data==="F!";break e}}ti(a)}a=!1}a&&(i=l[0])}}return l=Ut(),l.memoizedState=l.baseState=i,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ud,lastRenderedState:i},l.queue=a,l=Rd.bind(null,Ne,a),a.dispatch=l,a=qa(!1),y=Ja.bind(null,Ne,!1,a.queue),a=Ut(),d={state:i,dispatch:null,action:t,pending:null},a.queue=d,l=Z0.bind(null,Ne,d,y,l),d.dispatch=l,a.memoizedState=t,[i,l,!1]}function fd(t){var i=ft();return dd(i,Je,t)}function dd(t,i,l){if(i=Ha(t,i,ud)[0],t=ws(Bn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var a=Tl(i)}catch(C){throw C===vo?Ss:C}else a=i;i=ft();var d=i.queue,y=d.dispatch;return l!==i.memoizedState&&(Ne.flags|=2048,Eo(9,{destroy:void 0},W0.bind(null,d,l),null)),[a,y,t]}function W0(t,i){t.action=i}function pd(t){var i=ft(),l=Je;if(l!==null)return dd(i,l,t);ft(),i=i.memoizedState,l=ft();var a=l.queue.dispatch;return l.memoizedState=t,[i,a,!1]}function Eo(t,i,l,a){return t={tag:t,create:l,deps:a,inst:i,next:null},i=Ne.updateQueue,i===null&&(i=Is(),Ne.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=t.next=t:(a=l.next,l.next=t,t.next=a,i.lastEffect=t),t}function hd(){return ft().memoizedState}function ks(t,i,l,a){var d=Ut();Ne.flags|=t,d.memoizedState=Eo(1|i,{destroy:void 0},l,a===void 0?null:a)}function Us(t,i,l,a){var d=ft();a=a===void 0?null:a;var y=d.memoizedState.inst;Je!==null&&a!==null&&wa(a,Je.memoizedState.deps)?d.memoizedState=Eo(i,y,l,a):(Ne.flags|=t,d.memoizedState=Eo(1|i,y,l,a))}function md(t,i){ks(8390656,8,t,i)}function Va(t,i){Us(2048,8,t,i)}function j0(t){Ne.flags|=4;var i=Ne.updateQueue;if(i===null)i=Is(),Ne.updateQueue=i,i.events=[t];else{var l=i.events;l===null?i.events=[t]:l.push(t)}}function gd(t){var i=ft().memoizedState;return j0({ref:i,nextImpl:t}),function(){if((Fe&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function yd(t,i){return Us(4,2,t,i)}function vd(t,i){return Us(4,4,t,i)}function xd(t,i){if(typeof i=="function"){t=t();var l=i(t);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Td(t,i,l){l=l!=null?l.concat([t]):null,Us(4,4,xd.bind(null,i,t),l)}function Oa(){}function Cd(t,i){var l=ft();i=i===void 0?null:i;var a=l.memoizedState;return i!==null&&wa(i,a[1])?a[0]:(l.memoizedState=[t,i],t)}function Sd(t,i){var l=ft();i=i===void 0?null:i;var a=l.memoizedState;if(i!==null&&wa(i,a[1]))return a[0];if(a=t(),qi){En(!0);try{t()}finally{En(!1)}}return l.memoizedState=[a,i],a}function Fa(t,i,l){return l===void 0||(Hn&1073741824)!==0&&(Ue&261930)===0?t.memoizedState=i:(t.memoizedState=l,t=Ep(),Ne.lanes|=t,ci|=t,l)}function Ed(t,i,l,a){return Yt(l,i)?l:To.current!==null?(t=Fa(t,l,a),Yt(t,i)||(ht=!0),t):(Hn&42)===0||(Hn&1073741824)!==0&&(Ue&261930)===0?(ht=!0,t.memoizedState=l):(t=Ep(),Ne.lanes|=t,ci|=t,i)}function _d(t,i,l,a,d){var y=se.p;se.p=y!==0&&8>y?y:8;var C=G.T,_={};G.T=_,Ja(t,!1,i,l);try{var R=d(),B=G.S;if(B!==null&&B(_,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var Q=K0(R,a);Cl(t,i,Q,Wt(t))}else Cl(t,i,a,Wt(t))}catch(ne){Cl(t,i,{then:function(){},status:"rejected",reason:ne},Wt())}finally{se.p=y,C!==null&&_.types!==null&&(C.types=_.types),G.T=C}}function ev(){}function $a(t,i,l,a){if(t.tag!==5)throw Error(s(476));var d=Ad(t).queue;_d(t,d,i,pe,l===null?ev:function(){return bd(t),l(a)})}function Ad(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:pe},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:l},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function bd(t){var i=Ad(t);i.next===null&&(i=t.alternate.memoizedState),Cl(t,i.next.queue,{},Wt())}function Ya(){return _t(Hl)}function Md(){return ft().memoizedState}function Nd(){return ft().memoizedState}function tv(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var l=Wt();t=oi(l);var a=li(i,t,l);a!==null&&(Ft(a,i,l),gl(a,i,l)),i={cache:Ca()},t.payload=i;return}i=i.return}}function nv(t,i,l){var a=Wt();l={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ps(t)?Id(i,l):(l=ca(t,i,l,a),l!==null&&(Ft(l,t,a),Dd(l,i,a)))}function Rd(t,i,l){var a=Wt();Cl(t,i,l,a)}function Cl(t,i,l,a){var d={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ps(t))Id(i,d);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var C=i.lastRenderedState,_=y(C,l);if(d.hasEagerState=!0,d.eagerState=_,Yt(_,C))return ms(t,i,d,0),Ze===null&&hs(),!1}catch{}finally{}if(l=ca(t,i,d,a),l!==null)return Ft(l,t,a),Dd(l,i,a),!0}return!1}function Ja(t,i,l,a){if(a={lane:2,revertLane:Au(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ps(t)){if(i)throw Error(s(479))}else i=ca(t,l,a,2),i!==null&&Ft(i,t,2)}function Ps(t){var i=t.alternate;return t===Ne||i!==null&&i===Ne}function Id(t,i){Co=Ns=!0;var l=t.pending;l===null?i.next=i:(i.next=l.next,l.next=i),t.pending=i}function Dd(t,i,l){if((l&4194048)!==0){var a=i.lanes;a&=t.pendingLanes,l|=a,i.lanes=l,Me(t,l)}}var Sl={readContext:_t,use:Ds,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useLayoutEffect:at,useInsertionEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useSyncExternalStore:at,useId:at,useHostTransitionStatus:at,useFormState:at,useActionState:at,useOptimistic:at,useMemoCache:at,useCacheRefresh:at};Sl.useEffectEvent=at;var wd={readContext:_t,use:Ds,useCallback:function(t,i){return Ut().memoizedState=[t,i===void 0?null:i],t},useContext:_t,useEffect:md,useImperativeHandle:function(t,i,l){l=l!=null?l.concat([t]):null,ks(4194308,4,xd.bind(null,i,t),l)},useLayoutEffect:function(t,i){return ks(4194308,4,t,i)},useInsertionEffect:function(t,i){ks(4,2,t,i)},useMemo:function(t,i){var l=Ut();i=i===void 0?null:i;var a=t();if(qi){En(!0);try{t()}finally{En(!1)}}return l.memoizedState=[a,i],a},useReducer:function(t,i,l){var a=Ut();if(l!==void 0){var d=l(i);if(qi){En(!0);try{l(i)}finally{En(!1)}}}else d=i;return a.memoizedState=a.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},a.queue=t,t=t.dispatch=nv.bind(null,Ne,t),[a.memoizedState,t]},useRef:function(t){var i=Ut();return t={current:t},i.memoizedState=t},useState:function(t){t=qa(t);var i=t.queue,l=Rd.bind(null,Ne,i);return i.dispatch=l,[t.memoizedState,l]},useDebugValue:Oa,useDeferredValue:function(t,i){var l=Ut();return Fa(l,t,i)},useTransition:function(){var t=qa(!1);return t=_d.bind(null,Ne,t.queue,!0,!1),Ut().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,l){var a=Ne,d=Ut();if(Be){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),Ze===null)throw Error(s(349));(Ue&127)!==0||jf(a,i,l)}d.memoizedState=l;var y={value:l,getSnapshot:i};return d.queue=y,md(td.bind(null,a,y,t),[t]),a.flags|=2048,Eo(9,{destroy:void 0},ed.bind(null,a,y,l,i),null),l},useId:function(){var t=Ut(),i=Ze.identifierPrefix;if(Be){var l=An,a=_n;l=(a&~(1<<32-Nt(a)-1)).toString(32)+l,i="_"+i+"R_"+l,l=Rs++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=X0++,i="_"+i+"r_"+l.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Ya,useFormState:cd,useActionState:cd,useOptimistic:function(t){var i=Ut();i.memoizedState=i.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=Ja.bind(null,Ne,!0,l),l.dispatch=i,[t,i]},useMemoCache:Ga,useCacheRefresh:function(){return Ut().memoizedState=tv.bind(null,Ne)},useEffectEvent:function(t){var i=Ut(),l={impl:t};return i.memoizedState=l,function(){if((Fe&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},Ka={readContext:_t,use:Ds,useCallback:Cd,useContext:_t,useEffect:Va,useImperativeHandle:Td,useInsertionEffect:yd,useLayoutEffect:vd,useMemo:Sd,useReducer:ws,useRef:hd,useState:function(){return ws(Bn)},useDebugValue:Oa,useDeferredValue:function(t,i){var l=ft();return Ed(l,Je.memoizedState,t,i)},useTransition:function(){var t=ws(Bn)[0],i=ft().memoizedState;return[typeof t=="boolean"?t:Tl(t),i]},useSyncExternalStore:Wf,useId:Md,useHostTransitionStatus:Ya,useFormState:fd,useActionState:fd,useOptimistic:function(t,i){var l=ft();return od(l,Je,t,i)},useMemoCache:Ga,useCacheRefresh:Nd};Ka.useEffectEvent=gd;var kd={readContext:_t,use:Ds,useCallback:Cd,useContext:_t,useEffect:Va,useImperativeHandle:Td,useInsertionEffect:yd,useLayoutEffect:vd,useMemo:Sd,useReducer:Ba,useRef:hd,useState:function(){return Ba(Bn)},useDebugValue:Oa,useDeferredValue:function(t,i){var l=ft();return Je===null?Fa(l,t,i):Ed(l,Je.memoizedState,t,i)},useTransition:function(){var t=Ba(Bn)[0],i=ft().memoizedState;return[typeof t=="boolean"?t:Tl(t),i]},useSyncExternalStore:Wf,useId:Md,useHostTransitionStatus:Ya,useFormState:pd,useActionState:pd,useOptimistic:function(t,i){var l=ft();return Je!==null?od(l,Je,t,i):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:Ga,useCacheRefresh:Nd};kd.useEffectEvent=gd;function Xa(t,i,l,a){i=t.memoizedState,l=l(a,i),l=l==null?i:x({},i,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var Qa={enqueueSetState:function(t,i,l){t=t._reactInternals;var a=Wt(),d=oi(a);d.payload=i,l!=null&&(d.callback=l),i=li(t,d,a),i!==null&&(Ft(i,t,a),gl(i,t,a))},enqueueReplaceState:function(t,i,l){t=t._reactInternals;var a=Wt(),d=oi(a);d.tag=1,d.payload=i,l!=null&&(d.callback=l),i=li(t,d,a),i!==null&&(Ft(i,t,a),gl(i,t,a))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var l=Wt(),a=oi(l);a.tag=2,i!=null&&(a.callback=i),i=li(t,a,l),i!==null&&(Ft(i,t,l),gl(i,t,l))}};function Ud(t,i,l,a,d,y,C){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,y,C):i.prototype&&i.prototype.isPureReactComponent?!al(l,a)||!al(d,y):!0}function Pd(t,i,l,a){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,a),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,a),i.state!==t&&Qa.enqueueReplaceState(i,i.state,null)}function zi(t,i){var l=i;if("ref"in i){l={};for(var a in i)a!=="ref"&&(l[a]=i[a])}if(t=t.defaultProps){l===i&&(l=x({},l));for(var d in t)l[d]===void 0&&(l[d]=t[d])}return l}function Ld(t){ps(t)}function Gd(t){console.error(t)}function Hd(t){ps(t)}function Ls(t,i){try{var l=t.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(a){setTimeout(function(){throw a})}}function Bd(t,i,l){try{var a=t.onCaughtError;a(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Za(t,i,l){return l=oi(l),l.tag=3,l.payload={element:null},l.callback=function(){Ls(t,i)},l}function qd(t){return t=oi(t),t.tag=3,t}function zd(t,i,l,a){var d=l.type.getDerivedStateFromError;if(typeof d=="function"){var y=a.value;t.payload=function(){return d(y)},t.callback=function(){Bd(i,l,a)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(t.callback=function(){Bd(i,l,a),typeof d!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var _=a.stack;this.componentDidCatch(a.value,{componentStack:_!==null?_:""})})}function iv(t,i,l,a,d){if(l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(i=l.alternate,i!==null&&mo(i,l,d,!0),l=Kt.current,l!==null){switch(l.tag){case 31:case 13:return fn===null?Ks():l.alternate===null&&ut===0&&(ut=3),l.flags&=-257,l.flags|=65536,l.lanes=d,a===Es?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([a]):i.add(a),Su(t,a,d)),!1;case 22:return l.flags|=65536,a===Es?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([a])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([a]):l.add(a)),Su(t,a,d)),!1}throw Error(s(435,l.tag))}return Su(t,a,d),Ks(),!1}if(Be)return i=Kt.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,a!==ga&&(t=Error(s(422),{cause:a}),fl(rn(t,l)))):(a!==ga&&(i=Error(s(423),{cause:a}),fl(rn(i,l))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,a=rn(a,l),d=Za(t.stateNode,a,d),Ma(t,d),ut!==4&&(ut=2)),!1;var y=Error(s(520),{cause:a});if(y=rn(y,l),Il===null?Il=[y]:Il.push(y),ut!==4&&(ut=2),i===null)return!0;a=rn(a,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,t=d&-d,l.lanes|=t,t=Za(l.stateNode,a,t),Ma(l,t),!1;case 1:if(i=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(fi===null||!fi.has(y))))return l.flags|=65536,d&=-d,l.lanes|=d,d=qd(d),zd(d,t,l,a),Ma(l,d),!1}l=l.return}while(l!==null);return!1}var Wa=Error(s(461)),ht=!1;function At(t,i,l,a){i.child=t===null?$f(i,null,l,a):Bi(i,t.child,l,a)}function Vd(t,i,l,a,d){l=l.render;var y=i.ref;if("ref"in a){var C={};for(var _ in a)_!=="ref"&&(C[_]=a[_])}else C=a;return Pi(i),a=ka(t,i,l,C,y,d),_=Ua(),t!==null&&!ht?(Pa(t,i,d),qn(t,i,d)):(Be&&_&&ha(i),i.flags|=1,At(t,i,a,d),i.child)}function Od(t,i,l,a,d){if(t===null){var y=l.type;return typeof y=="function"&&!fa(y)&&y.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=y,Fd(t,i,y,a,d)):(t=ys(l.type,null,a,i,i.mode,d),t.ref=i.ref,t.return=i,i.child=t)}if(y=t.child,!su(t,d)){var C=y.memoizedProps;if(l=l.compare,l=l!==null?l:al,l(C,a)&&t.ref===i.ref)return qn(t,i,d)}return i.flags|=1,t=Un(y,a),t.ref=i.ref,t.return=i,i.child=t}function Fd(t,i,l,a,d){if(t!==null){var y=t.memoizedProps;if(al(y,a)&&t.ref===i.ref)if(ht=!1,i.pendingProps=a=y,su(t,d))(t.flags&131072)!==0&&(ht=!0);else return i.lanes=t.lanes,qn(t,i,d)}return ja(t,i,l,a,d)}function $d(t,i,l,a){var d=a.children,y=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,t!==null){for(a=i.child=t.child,d=0;a!==null;)d=d|a.lanes|a.childLanes,a=a.sibling;a=d&~y}else a=0,i.child=null;return Yd(t,i,y,l,a)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Cs(i,y!==null?y.cachePool:null),y!==null?Kf(i,y):Ra(),Xf(i);else return a=i.lanes=536870912,Yd(t,i,y!==null?y.baseLanes|l:l,l,a)}else y!==null?(Cs(i,y.cachePool),Kf(i,y),ri(),i.memoizedState=null):(t!==null&&Cs(i,null),Ra(),ri());return At(t,i,d,l),i.child}function El(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Yd(t,i,l,a,d){var y=Ea();return y=y===null?null:{parent:dt._currentValue,pool:y},i.memoizedState={baseLanes:l,cachePool:y},t!==null&&Cs(i,null),Ra(),Xf(i),t!==null&&mo(t,i,a,!0),i.childLanes=d,null}function Gs(t,i){return i=Bs({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Jd(t,i,l){return Bi(i,t.child,null,l),t=Gs(i,i.pendingProps),t.flags|=2,Xt(i),i.memoizedState=null,t}function ov(t,i,l){var a=i.pendingProps,d=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Be){if(a.mode==="hidden")return t=Gs(i,a),i.lanes=536870912,El(null,t);if(Da(i),(t=je)?(t=lh(t,cn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:jn!==null?{id:_n,overflow:An}:null,retryLane:536870912,hydrationErrors:null},l=If(t),l.return=i,i.child=l,Et=i,je=null)):t=null,t===null)throw ti(i);return i.lanes=536870912,null}return Gs(i,a)}var y=t.memoizedState;if(y!==null){var C=y.dehydrated;if(Da(i),d)if(i.flags&256)i.flags&=-257,i=Jd(t,i,l);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(ht||mo(t,i,l,!1),d=(l&t.childLanes)!==0,ht||d){if(a=Ze,a!==null&&(C=We(a,l),C!==0&&C!==y.retryLane))throw y.retryLane=C,Di(t,C),Ft(a,t,C),Wa;Ks(),i=Jd(t,i,l)}else t=y.treeContext,je=dn(C.nextSibling),Et=i,Be=!0,ei=null,cn=!1,t!==null&&kf(i,t),i=Gs(i,a),i.flags|=4096;return i}return t=Un(t.child,{mode:a.mode,children:a.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Hs(t,i){var l=i.ref;if(l===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(t===null||t.ref!==l)&&(i.flags|=4194816)}}function ja(t,i,l,a,d){return Pi(i),l=ka(t,i,l,a,void 0,d),a=Ua(),t!==null&&!ht?(Pa(t,i,d),qn(t,i,d)):(Be&&a&&ha(i),i.flags|=1,At(t,i,l,d),i.child)}function Kd(t,i,l,a,d,y){return Pi(i),i.updateQueue=null,l=Zf(i,a,l,d),Qf(t),a=Ua(),t!==null&&!ht?(Pa(t,i,y),qn(t,i,y)):(Be&&a&&ha(i),i.flags|=1,At(t,i,l,y),i.child)}function Xd(t,i,l,a,d){if(Pi(i),i.stateNode===null){var y=co,C=l.contextType;typeof C=="object"&&C!==null&&(y=_t(C)),y=new l(a,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Qa,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=a,y.state=i.memoizedState,y.refs={},Aa(i),C=l.contextType,y.context=typeof C=="object"&&C!==null?_t(C):co,y.state=i.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(Xa(i,l,C,a),y.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(C=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),C!==y.state&&Qa.enqueueReplaceState(y,y.state,null),vl(i,a,y,d),yl(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),a=!0}else if(t===null){y=i.stateNode;var _=i.memoizedProps,R=zi(l,_);y.props=R;var B=y.context,Q=l.contextType;C=co,typeof Q=="object"&&Q!==null&&(C=_t(Q));var ne=l.getDerivedStateFromProps;Q=typeof ne=="function"||typeof y.getSnapshotBeforeUpdate=="function",_=i.pendingProps!==_,Q||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_||B!==C)&&Pd(i,y,a,C),ii=!1;var V=i.memoizedState;y.state=V,vl(i,a,y,d),yl(),B=i.memoizedState,_||V!==B||ii?(typeof ne=="function"&&(Xa(i,l,ne,a),B=i.memoizedState),(R=ii||Ud(i,l,R,a,V,B,C))?(Q||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=a,i.memoizedState=B),y.props=a,y.state=B,y.context=C,a=R):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),a=!1)}else{y=i.stateNode,ba(t,i),C=i.memoizedProps,Q=zi(l,C),y.props=Q,ne=i.pendingProps,V=y.context,B=l.contextType,R=co,typeof B=="object"&&B!==null&&(R=_t(B)),_=l.getDerivedStateFromProps,(B=typeof _=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C!==ne||V!==R)&&Pd(i,y,a,R),ii=!1,V=i.memoizedState,y.state=V,vl(i,a,y,d),yl();var F=i.memoizedState;C!==ne||V!==F||ii||t!==null&&t.dependencies!==null&&xs(t.dependencies)?(typeof _=="function"&&(Xa(i,l,_,a),F=i.memoizedState),(Q=ii||Ud(i,l,Q,a,V,F,R)||t!==null&&t.dependencies!==null&&xs(t.dependencies))?(B||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(a,F,R),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(a,F,R)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||C===t.memoizedProps&&V===t.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&V===t.memoizedState||(i.flags|=1024),i.memoizedProps=a,i.memoizedState=F),y.props=a,y.state=F,y.context=R,a=Q):(typeof y.componentDidUpdate!="function"||C===t.memoizedProps&&V===t.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&V===t.memoizedState||(i.flags|=1024),a=!1)}return y=a,Hs(t,i),a=(i.flags&128)!==0,y||a?(y=i.stateNode,l=a&&typeof l.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,t!==null&&a?(i.child=Bi(i,t.child,null,d),i.child=Bi(i,null,l,d)):At(t,i,l,d),i.memoizedState=y.state,t=i.child):t=qn(t,i,d),t}function Qd(t,i,l,a){return ki(),i.flags|=256,At(t,i,l,a),i.child}var eu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tu(t){return{baseLanes:t,cachePool:Bf()}}function nu(t,i,l){return t=t!==null?t.childLanes&~l:0,i&&(t|=Zt),t}function Zd(t,i,l){var a=i.pendingProps,d=!1,y=(i.flags&128)!==0,C;if((C=y)||(C=t!==null&&t.memoizedState===null?!1:(ct.current&2)!==0),C&&(d=!0,i.flags&=-129),C=(i.flags&32)!==0,i.flags&=-33,t===null){if(Be){if(d?si(i):ri(),(t=je)?(t=lh(t,cn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:jn!==null?{id:_n,overflow:An}:null,retryLane:536870912,hydrationErrors:null},l=If(t),l.return=i,i.child=l,Et=i,je=null)):t=null,t===null)throw ti(i);return Hu(t)?i.lanes=32:i.lanes=536870912,null}var _=a.children;return a=a.fallback,d?(ri(),d=i.mode,_=Bs({mode:"hidden",children:_},d),a=wi(a,d,l,null),_.return=i,a.return=i,_.sibling=a,i.child=_,a=i.child,a.memoizedState=tu(l),a.childLanes=nu(t,C,l),i.memoizedState=eu,El(null,a)):(si(i),iu(i,_))}var R=t.memoizedState;if(R!==null&&(_=R.dehydrated,_!==null)){if(y)i.flags&256?(si(i),i.flags&=-257,i=ou(t,i,l)):i.memoizedState!==null?(ri(),i.child=t.child,i.flags|=128,i=null):(ri(),_=a.fallback,d=i.mode,a=Bs({mode:"visible",children:a.children},d),_=wi(_,d,l,null),_.flags|=2,a.return=i,_.return=i,a.sibling=_,i.child=a,Bi(i,t.child,null,l),a=i.child,a.memoizedState=tu(l),a.childLanes=nu(t,C,l),i.memoizedState=eu,i=El(null,a));else if(si(i),Hu(_)){if(C=_.nextSibling&&_.nextSibling.dataset,C)var B=C.dgst;C=B,a=Error(s(419)),a.stack="",a.digest=C,fl({value:a,source:null,stack:null}),i=ou(t,i,l)}else if(ht||mo(t,i,l,!1),C=(l&t.childLanes)!==0,ht||C){if(C=Ze,C!==null&&(a=We(C,l),a!==0&&a!==R.retryLane))throw R.retryLane=a,Di(t,a),Ft(C,t,a),Wa;Gu(_)||Ks(),i=ou(t,i,l)}else Gu(_)?(i.flags|=192,i.child=t.child,i=null):(t=R.treeContext,je=dn(_.nextSibling),Et=i,Be=!0,ei=null,cn=!1,t!==null&&kf(i,t),i=iu(i,a.children),i.flags|=4096);return i}return d?(ri(),_=a.fallback,d=i.mode,R=t.child,B=R.sibling,a=Un(R,{mode:"hidden",children:a.children}),a.subtreeFlags=R.subtreeFlags&65011712,B!==null?_=Un(B,_):(_=wi(_,d,l,null),_.flags|=2),_.return=i,a.return=i,a.sibling=_,i.child=a,El(null,a),a=i.child,_=t.child.memoizedState,_===null?_=tu(l):(d=_.cachePool,d!==null?(R=dt._currentValue,d=d.parent!==R?{parent:R,pool:R}:d):d=Bf(),_={baseLanes:_.baseLanes|l,cachePool:d}),a.memoizedState=_,a.childLanes=nu(t,C,l),i.memoizedState=eu,El(t.child,a)):(si(i),l=t.child,t=l.sibling,l=Un(l,{mode:"visible",children:a.children}),l.return=i,l.sibling=null,t!==null&&(C=i.deletions,C===null?(i.deletions=[t],i.flags|=16):C.push(t)),i.child=l,i.memoizedState=null,l)}function iu(t,i){return i=Bs({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Bs(t,i){return t=Jt(22,t,null,i),t.lanes=0,t}function ou(t,i,l){return Bi(i,t.child,null,l),t=iu(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Wd(t,i,l){t.lanes|=i;var a=t.alternate;a!==null&&(a.lanes|=i),xa(t.return,i,l)}function lu(t,i,l,a,d,y){var C=t.memoizedState;C===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:a,tail:l,tailMode:d,treeForkCount:y}:(C.isBackwards=i,C.rendering=null,C.renderingStartTime=0,C.last=a,C.tail=l,C.tailMode=d,C.treeForkCount=y)}function jd(t,i,l){var a=i.pendingProps,d=a.revealOrder,y=a.tail;a=a.children;var C=ct.current,_=(C&2)!==0;if(_?(C=C&1|2,i.flags|=128):C&=1,re(ct,C),At(t,i,a,l),a=Be?cl:0,!_&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wd(t,l,i);else if(t.tag===19)Wd(t,l,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(l=i.child,d=null;l!==null;)t=l.alternate,t!==null&&Ms(t)===null&&(d=l),l=l.sibling;l=d,l===null?(d=i.child,i.child=null):(d=l.sibling,l.sibling=null),lu(i,!1,d,l,y,a);break;case"backwards":case"unstable_legacy-backwards":for(l=null,d=i.child,i.child=null;d!==null;){if(t=d.alternate,t!==null&&Ms(t)===null){i.child=d;break}t=d.sibling,d.sibling=l,l=d,d=t}lu(i,!0,l,null,y,a);break;case"together":lu(i,!1,null,null,void 0,a);break;default:i.memoizedState=null}return i.child}function qn(t,i,l){if(t!==null&&(i.dependencies=t.dependencies),ci|=i.lanes,(l&i.childLanes)===0)if(t!==null){if(mo(t,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,l=Un(t,t.pendingProps),i.child=l,l.return=i;t.sibling!==null;)t=t.sibling,l=l.sibling=Un(t,t.pendingProps),l.return=i;l.sibling=null}return i.child}function su(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&xs(t)))}function lv(t,i,l){switch(i.tag){case 3:ve(i,i.stateNode.containerInfo),ni(i,dt,t.memoizedState.cache),ki();break;case 27:case 5:Ie(i);break;case 4:ve(i,i.stateNode.containerInfo);break;case 10:ni(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Da(i),null;break;case 13:var a=i.memoizedState;if(a!==null)return a.dehydrated!==null?(si(i),i.flags|=128,null):(l&i.child.childLanes)!==0?Zd(t,i,l):(si(i),t=qn(t,i,l),t!==null?t.sibling:null);si(i);break;case 19:var d=(t.flags&128)!==0;if(a=(l&i.childLanes)!==0,a||(mo(t,i,l,!1),a=(l&i.childLanes)!==0),d){if(a)return jd(t,i,l);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),re(ct,ct.current),a)break;return null;case 22:return i.lanes=0,$d(t,i,l,i.pendingProps);case 24:ni(i,dt,t.memoizedState.cache)}return qn(t,i,l)}function ep(t,i,l){if(t!==null)if(t.memoizedProps!==i.pendingProps)ht=!0;else{if(!su(t,l)&&(i.flags&128)===0)return ht=!1,lv(t,i,l);ht=(t.flags&131072)!==0}else ht=!1,Be&&(i.flags&1048576)!==0&&wf(i,cl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var a=i.pendingProps;if(t=Gi(i.elementType),i.type=t,typeof t=="function")fa(t)?(a=zi(t,a),i.tag=1,i=Xd(null,i,t,a,l)):(i.tag=0,i=ja(null,i,t,a,l));else{if(t!=null){var d=t.$$typeof;if(d===P){i.tag=11,i=Vd(null,i,t,a,l);break e}else if(d===oe){i.tag=14,i=Od(null,i,t,a,l);break e}}throw i=Oe(t)||t,Error(s(306,i,""))}}return i;case 0:return ja(t,i,i.type,i.pendingProps,l);case 1:return a=i.type,d=zi(a,i.pendingProps),Xd(t,i,a,d,l);case 3:e:{if(ve(i,i.stateNode.containerInfo),t===null)throw Error(s(387));a=i.pendingProps;var y=i.memoizedState;d=y.element,ba(t,i),vl(i,a,null,l);var C=i.memoizedState;if(a=C.cache,ni(i,dt,a),a!==y.cache&&Ta(i,[dt],l,!0),yl(),a=C.element,y.isDehydrated)if(y={element:a,isDehydrated:!1,cache:C.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=Qd(t,i,a,l);break e}else if(a!==d){d=rn(Error(s(424)),i),fl(d),i=Qd(t,i,a,l);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(je=dn(t.firstChild),Et=i,Be=!0,ei=null,cn=!0,l=$f(i,null,a,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ki(),a===d){i=qn(t,i,l);break e}At(t,i,a,l)}i=i.child}return i;case 26:return Hs(t,i),t===null?(l=fh(i.type,null,i.pendingProps,null))?i.memoizedState=l:Be||(l=i.type,t=i.pendingProps,a=tr(X.current).createElement(l),a[st]=i,a[Ht]=t,bt(a,l,t),Tt(a),i.stateNode=a):i.memoizedState=fh(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Ie(i),t===null&&Be&&(a=i.stateNode=ah(i.type,i.pendingProps,X.current),Et=i,cn=!0,d=je,mi(i.type)?(Bu=d,je=dn(a.firstChild)):je=d),At(t,i,i.pendingProps.children,l),Hs(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Be&&((d=a=je)&&(a=Pv(a,i.type,i.pendingProps,cn),a!==null?(i.stateNode=a,Et=i,je=dn(a.firstChild),cn=!1,d=!0):d=!1),d||ti(i)),Ie(i),d=i.type,y=i.pendingProps,C=t!==null?t.memoizedProps:null,a=y.children,Uu(d,y)?a=null:C!==null&&Uu(d,C)&&(i.flags|=32),i.memoizedState!==null&&(d=ka(t,i,Q0,null,null,l),Hl._currentValue=d),Hs(t,i),At(t,i,a,l),i.child;case 6:return t===null&&Be&&((t=l=je)&&(l=Lv(l,i.pendingProps,cn),l!==null?(i.stateNode=l,Et=i,je=null,t=!0):t=!1),t||ti(i)),null;case 13:return Zd(t,i,l);case 4:return ve(i,i.stateNode.containerInfo),a=i.pendingProps,t===null?i.child=Bi(i,null,a,l):At(t,i,a,l),i.child;case 11:return Vd(t,i,i.type,i.pendingProps,l);case 7:return At(t,i,i.pendingProps,l),i.child;case 8:return At(t,i,i.pendingProps.children,l),i.child;case 12:return At(t,i,i.pendingProps.children,l),i.child;case 10:return a=i.pendingProps,ni(i,i.type,a.value),At(t,i,a.children,l),i.child;case 9:return d=i.type._context,a=i.pendingProps.children,Pi(i),d=_t(d),a=a(d),i.flags|=1,At(t,i,a,l),i.child;case 14:return Od(t,i,i.type,i.pendingProps,l);case 15:return Fd(t,i,i.type,i.pendingProps,l);case 19:return jd(t,i,l);case 31:return ov(t,i,l);case 22:return $d(t,i,l,i.pendingProps);case 24:return Pi(i),a=_t(dt),t===null?(d=Ea(),d===null&&(d=Ze,y=Ca(),d.pooledCache=y,y.refCount++,y!==null&&(d.pooledCacheLanes|=l),d=y),i.memoizedState={parent:a,cache:d},Aa(i),ni(i,dt,d)):((t.lanes&l)!==0&&(ba(t,i),vl(i,null,null,l),yl()),d=t.memoizedState,y=i.memoizedState,d.parent!==a?(d={parent:a,cache:a},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),ni(i,dt,a)):(a=y.cache,ni(i,dt,a),a!==d.cache&&Ta(i,[dt],l,!0))),At(t,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function zn(t){t.flags|=4}function ru(t,i,l,a,d){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(Mp())t.flags|=8192;else throw Hi=Es,_a}else t.flags&=-16777217}function tp(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!gh(i))if(Mp())t.flags|=8192;else throw Hi=Es,_a}function qs(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?ee():536870912,t.lanes|=i,Mo|=i)}function _l(t,i){if(!Be)switch(t.tailMode){case"hidden":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var a=null;l!==null;)l.alternate!==null&&(a=l),l=l.sibling;a===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function et(t){var i=t.alternate!==null&&t.alternate.child===t.child,l=0,a=0;if(i)for(var d=t.child;d!==null;)l|=d.lanes|d.childLanes,a|=d.subtreeFlags&65011712,a|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)l|=d.lanes|d.childLanes,a|=d.subtreeFlags,a|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=a,t.childLanes=l,i}function sv(t,i,l){var a=i.pendingProps;switch(ma(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(i),null;case 1:return et(i),null;case 3:return l=i.stateNode,a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Gn(dt),_e(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(ho(i)?zn(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ya())),et(i),null;case 26:var d=i.type,y=i.memoizedState;return t===null?(zn(i),y!==null?(et(i),tp(i,y)):(et(i),ru(i,d,null,a,l))):y?y!==t.memoizedState?(zn(i),et(i),tp(i,y)):(et(i),i.flags&=-16777217):(t=t.memoizedProps,t!==a&&zn(i),et(i),ru(i,d,t,a,l)),null;case 27:if(Ae(i),l=X.current,d=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==a&&zn(i);else{if(!a){if(i.stateNode===null)throw Error(s(166));return et(i),null}t=ue.current,ho(i)?Uf(i):(t=ah(d,a,l),i.stateNode=t,zn(i))}return et(i),null;case 5:if(Ae(i),d=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==a&&zn(i);else{if(!a){if(i.stateNode===null)throw Error(s(166));return et(i),null}if(y=ue.current,ho(i))Uf(i);else{var C=tr(X.current);switch(y){case 1:y=C.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:y=C.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":y=C.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":y=C.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":y=C.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof a.is=="string"?C.createElement("select",{is:a.is}):C.createElement("select"),a.multiple?y.multiple=!0:a.size&&(y.size=a.size);break;default:y=typeof a.is=="string"?C.createElement(d,{is:a.is}):C.createElement(d)}}y[st]=i,y[Ht]=a;e:for(C=i.child;C!==null;){if(C.tag===5||C.tag===6)y.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===i)break e;for(;C.sibling===null;){if(C.return===null||C.return===i)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}i.stateNode=y;e:switch(bt(y,d,a),d){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&zn(i)}}return et(i),ru(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,l),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==a&&zn(i);else{if(typeof a!="string"&&i.stateNode===null)throw Error(s(166));if(t=X.current,ho(i)){if(t=i.stateNode,l=i.memoizedProps,a=null,d=Et,d!==null)switch(d.tag){case 27:case 5:a=d.memoizedProps}t[st]=i,t=!!(t.nodeValue===l||a!==null&&a.suppressHydrationWarning===!0||Zp(t.nodeValue,l)),t||ti(i,!0)}else t=tr(t).createTextNode(a),t[st]=i,i.stateNode=t}return et(i),null;case 31:if(l=i.memoizedState,t===null||t.memoizedState!==null){if(a=ho(i),l!==null){if(t===null){if(!a)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[st]=i}else ki(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;et(i),t=!1}else l=ya(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return i.flags&256?(Xt(i),i):(Xt(i),null);if((i.flags&128)!==0)throw Error(s(558))}return et(i),null;case 13:if(a=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=ho(i),a!==null&&a.dehydrated!==null){if(t===null){if(!d)throw Error(s(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[st]=i}else ki(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;et(i),d=!1}else d=ya(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(Xt(i),i):(Xt(i),null)}return Xt(i),(i.flags&128)!==0?(i.lanes=l,i):(l=a!==null,t=t!==null&&t.memoizedState!==null,l&&(a=i.child,d=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(d=a.alternate.memoizedState.cachePool.pool),y=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(y=a.memoizedState.cachePool.pool),y!==d&&(a.flags|=2048)),l!==t&&l&&(i.child.flags|=8192),qs(i,i.updateQueue),et(i),null);case 4:return _e(),t===null&&Ru(i.stateNode.containerInfo),et(i),null;case 10:return Gn(i.type),et(i),null;case 19:if(j(ct),a=i.memoizedState,a===null)return et(i),null;if(d=(i.flags&128)!==0,y=a.rendering,y===null)if(d)_l(a,!1);else{if(ut!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(y=Ms(t),y!==null){for(i.flags|=128,_l(a,!1),t=y.updateQueue,i.updateQueue=t,qs(i,t),i.subtreeFlags=0,t=l,l=i.child;l!==null;)Rf(l,t),l=l.sibling;return re(ct,ct.current&1|2),Be&&Pn(i,a.treeForkCount),i.child}t=t.sibling}a.tail!==null&&wt()>$s&&(i.flags|=128,d=!0,_l(a,!1),i.lanes=4194304)}else{if(!d)if(t=Ms(y),t!==null){if(i.flags|=128,d=!0,t=t.updateQueue,i.updateQueue=t,qs(i,t),_l(a,!0),a.tail===null&&a.tailMode==="hidden"&&!y.alternate&&!Be)return et(i),null}else 2*wt()-a.renderingStartTime>$s&&l!==536870912&&(i.flags|=128,d=!0,_l(a,!1),i.lanes=4194304);a.isBackwards?(y.sibling=i.child,i.child=y):(t=a.last,t!==null?t.sibling=y:i.child=y,a.last=y)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=wt(),t.sibling=null,l=ct.current,re(ct,d?l&1|2:l&1),Be&&Pn(i,a.treeForkCount),t):(et(i),null);case 22:case 23:return Xt(i),Ia(),a=i.memoizedState!==null,t!==null?t.memoizedState!==null!==a&&(i.flags|=8192):a&&(i.flags|=8192),a?(l&536870912)!==0&&(i.flags&128)===0&&(et(i),i.subtreeFlags&6&&(i.flags|=8192)):et(i),l=i.updateQueue,l!==null&&qs(i,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==l&&(i.flags|=2048),t!==null&&j(Li),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Gn(dt),et(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function rv(t,i){switch(ma(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Gn(dt),_e(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Ae(i),null;case 31:if(i.memoizedState!==null){if(Xt(i),i.alternate===null)throw Error(s(340));ki()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Xt(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ki()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return j(ct),null;case 4:return _e(),null;case 10:return Gn(i.type),null;case 22:case 23:return Xt(i),Ia(),t!==null&&j(Li),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Gn(dt),null;case 25:return null;default:return null}}function np(t,i){switch(ma(i),i.tag){case 3:Gn(dt),_e();break;case 26:case 27:case 5:Ae(i);break;case 4:_e();break;case 31:i.memoizedState!==null&&Xt(i);break;case 13:Xt(i);break;case 19:j(ct);break;case 10:Gn(i.type);break;case 22:case 23:Xt(i),Ia(),t!==null&&j(Li);break;case 24:Gn(dt)}}function Al(t,i){try{var l=i.updateQueue,a=l!==null?l.lastEffect:null;if(a!==null){var d=a.next;l=d;do{if((l.tag&t)===t){a=void 0;var y=l.create,C=l.inst;a=y(),C.destroy=a}l=l.next}while(l!==d)}}catch(_){Ye(i,i.return,_)}}function ai(t,i,l){try{var a=i.updateQueue,d=a!==null?a.lastEffect:null;if(d!==null){var y=d.next;a=y;do{if((a.tag&t)===t){var C=a.inst,_=C.destroy;if(_!==void 0){C.destroy=void 0,d=i;var R=l,B=_;try{B()}catch(Q){Ye(d,R,Q)}}}a=a.next}while(a!==y)}}catch(Q){Ye(i,i.return,Q)}}function ip(t){var i=t.updateQueue;if(i!==null){var l=t.stateNode;try{Jf(i,l)}catch(a){Ye(t,t.return,a)}}}function op(t,i,l){l.props=zi(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(a){Ye(t,i,a)}}function bl(t,i){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var a=t.stateNode;break;case 30:a=t.stateNode;break;default:a=t.stateNode}typeof l=="function"?t.refCleanup=l(a):l.current=a}}catch(d){Ye(t,i,d)}}function bn(t,i){var l=t.ref,a=t.refCleanup;if(l!==null)if(typeof a=="function")try{a()}catch(d){Ye(t,i,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(d){Ye(t,i,d)}else l.current=null}function lp(t){var i=t.type,l=t.memoizedProps,a=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&a.focus();break e;case"img":l.src?a.src=l.src:l.srcSet&&(a.srcset=l.srcSet)}}catch(d){Ye(t,t.return,d)}}function au(t,i,l){try{var a=t.stateNode;Rv(a,t.type,l,i),a[Ht]=i}catch(d){Ye(t,t.return,d)}}function sp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&mi(t.type)||t.tag===4}function uu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&mi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cu(t,i,l){var a=t.tag;if(a===5||a===6)t=t.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(t),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=wn));else if(a!==4&&(a===27&&mi(t.type)&&(l=t.stateNode,i=null),t=t.child,t!==null))for(cu(t,i,l),t=t.sibling;t!==null;)cu(t,i,l),t=t.sibling}function zs(t,i,l){var a=t.tag;if(a===5||a===6)t=t.stateNode,i?l.insertBefore(t,i):l.appendChild(t);else if(a!==4&&(a===27&&mi(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(zs(t,i,l),t=t.sibling;t!==null;)zs(t,i,l),t=t.sibling}function rp(t){var i=t.stateNode,l=t.memoizedProps;try{for(var a=t.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);bt(i,a,l),i[st]=t,i[Ht]=l}catch(y){Ye(t,t.return,y)}}var Vn=!1,mt=!1,fu=!1,ap=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function av(t,i){if(t=t.containerInfo,wu=ar,t=Tf(t),oa(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var a=l.getSelection&&l.getSelection();if(a&&a.rangeCount!==0){l=a.anchorNode;var d=a.anchorOffset,y=a.focusNode;a=a.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var C=0,_=-1,R=-1,B=0,Q=0,ne=t,V=null;t:for(;;){for(var F;ne!==l||d!==0&&ne.nodeType!==3||(_=C+d),ne!==y||a!==0&&ne.nodeType!==3||(R=C+a),ne.nodeType===3&&(C+=ne.nodeValue.length),(F=ne.firstChild)!==null;)V=ne,ne=F;for(;;){if(ne===t)break t;if(V===l&&++B===d&&(_=C),V===y&&++Q===a&&(R=C),(F=ne.nextSibling)!==null)break;ne=V,V=ne.parentNode}ne=F}l=_===-1||R===-1?null:{start:_,end:R}}else l=null}l=l||{start:0,end:0}}else l=null;for(ku={focusedElem:t,selectionRange:l},ar=!1,Ct=i;Ct!==null;)if(i=Ct,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Ct=t;else for(;Ct!==null;){switch(i=Ct,y=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)d=t[l],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&y!==null){t=void 0,l=i,d=y.memoizedProps,y=y.memoizedState,a=l.stateNode;try{var he=zi(l.type,d);t=a.getSnapshotBeforeUpdate(he,y),a.__reactInternalSnapshotBeforeUpdate=t}catch(Se){Ye(l,l.return,Se)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,l=t.nodeType,l===9)Lu(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Lu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Ct=t;break}Ct=i.return}}function up(t,i,l){var a=l.flags;switch(l.tag){case 0:case 11:case 15:Fn(t,l),a&4&&Al(5,l);break;case 1:if(Fn(t,l),a&4)if(t=l.stateNode,i===null)try{t.componentDidMount()}catch(C){Ye(l,l.return,C)}else{var d=zi(l.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(d,i,t.__reactInternalSnapshotBeforeUpdate)}catch(C){Ye(l,l.return,C)}}a&64&&ip(l),a&512&&bl(l,l.return);break;case 3:if(Fn(t,l),a&64&&(t=l.updateQueue,t!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Jf(t,i)}catch(C){Ye(l,l.return,C)}}break;case 27:i===null&&a&4&&rp(l);case 26:case 5:Fn(t,l),i===null&&a&4&&lp(l),a&512&&bl(l,l.return);break;case 12:Fn(t,l);break;case 31:Fn(t,l),a&4&&dp(t,l);break;case 13:Fn(t,l),a&4&&pp(t,l),a&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=yv.bind(null,l),Gv(t,l))));break;case 22:if(a=l.memoizedState!==null||Vn,!a){i=i!==null&&i.memoizedState!==null||mt,d=Vn;var y=mt;Vn=a,(mt=i)&&!y?$n(t,l,(l.subtreeFlags&8772)!==0):Fn(t,l),Vn=d,mt=y}break;case 30:break;default:Fn(t,l)}}function cp(t){var i=t.alternate;i!==null&&(t.alternate=null,cp(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&zr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ot=null,qt=!1;function On(t,i,l){for(l=l.child;l!==null;)fp(t,i,l),l=l.sibling}function fp(t,i,l){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(bi,l)}catch{}switch(l.tag){case 26:mt||bn(l,i),On(t,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:mt||bn(l,i);var a=ot,d=qt;mi(l.type)&&(ot=l.stateNode,qt=!1),On(t,i,l),Pl(l.stateNode),ot=a,qt=d;break;case 5:mt||bn(l,i);case 6:if(a=ot,d=qt,ot=null,On(t,i,l),ot=a,qt=d,ot!==null)if(qt)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(l.stateNode)}catch(y){Ye(l,i,y)}else try{ot.removeChild(l.stateNode)}catch(y){Ye(l,i,y)}break;case 18:ot!==null&&(qt?(t=ot,ih(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),Po(t)):ih(ot,l.stateNode));break;case 4:a=ot,d=qt,ot=l.stateNode.containerInfo,qt=!0,On(t,i,l),ot=a,qt=d;break;case 0:case 11:case 14:case 15:ai(2,l,i),mt||ai(4,l,i),On(t,i,l);break;case 1:mt||(bn(l,i),a=l.stateNode,typeof a.componentWillUnmount=="function"&&op(l,i,a)),On(t,i,l);break;case 21:On(t,i,l);break;case 22:mt=(a=mt)||l.memoizedState!==null,On(t,i,l),mt=a;break;default:On(t,i,l)}}function dp(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Po(t)}catch(l){Ye(i,i.return,l)}}}function pp(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Po(t)}catch(l){Ye(i,i.return,l)}}function uv(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new ap),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new ap),i;default:throw Error(s(435,t.tag))}}function Vs(t,i){var l=uv(t);i.forEach(function(a){if(!l.has(a)){l.add(a);var d=vv.bind(null,t,a);a.then(d,d)}})}function zt(t,i){var l=i.deletions;if(l!==null)for(var a=0;a<l.length;a++){var d=l[a],y=t,C=i,_=C;e:for(;_!==null;){switch(_.tag){case 27:if(mi(_.type)){ot=_.stateNode,qt=!1;break e}break;case 5:ot=_.stateNode,qt=!1;break e;case 3:case 4:ot=_.stateNode.containerInfo,qt=!0;break e}_=_.return}if(ot===null)throw Error(s(160));fp(y,C,d),ot=null,qt=!1,y=d.alternate,y!==null&&(y.return=null),d.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)hp(i,t),i=i.sibling}var yn=null;function hp(t,i){var l=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:zt(i,t),Vt(t),a&4&&(ai(3,t,t.return),Al(3,t),ai(5,t,t.return));break;case 1:zt(i,t),Vt(t),a&512&&(mt||l===null||bn(l,l.return)),a&64&&Vn&&(t=t.updateQueue,t!==null&&(a=t.callbacks,a!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?a:l.concat(a))));break;case 26:var d=yn;if(zt(i,t),Vt(t),a&512&&(mt||l===null||bn(l,l.return)),a&4){var y=l!==null?l.memoizedState:null;if(a=t.memoizedState,l===null)if(a===null)if(t.stateNode===null){e:{a=t.type,l=t.memoizedProps,d=d.ownerDocument||d;t:switch(a){case"title":y=d.getElementsByTagName("title")[0],(!y||y[jo]||y[st]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=d.createElement(a),d.head.insertBefore(y,d.querySelector("head > title"))),bt(y,a,l),y[st]=t,Tt(y),a=y;break e;case"link":var C=hh("link","href",d).get(a+(l.href||""));if(C){for(var _=0;_<C.length;_++)if(y=C[_],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(_,1);break t}}y=d.createElement(a),bt(y,a,l),d.head.appendChild(y);break;case"meta":if(C=hh("meta","content",d).get(a+(l.content||""))){for(_=0;_<C.length;_++)if(y=C[_],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(_,1);break t}}y=d.createElement(a),bt(y,a,l),d.head.appendChild(y);break;default:throw Error(s(468,a))}y[st]=t,Tt(y),a=y}t.stateNode=a}else mh(d,t.type,t.stateNode);else t.stateNode=ph(d,a,t.memoizedProps);else y!==a?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,a===null?mh(d,t.type,t.stateNode):ph(d,a,t.memoizedProps)):a===null&&t.stateNode!==null&&au(t,t.memoizedProps,l.memoizedProps)}break;case 27:zt(i,t),Vt(t),a&512&&(mt||l===null||bn(l,l.return)),l!==null&&a&4&&au(t,t.memoizedProps,l.memoizedProps);break;case 5:if(zt(i,t),Vt(t),a&512&&(mt||l===null||bn(l,l.return)),t.flags&32){d=t.stateNode;try{io(d,"")}catch(he){Ye(t,t.return,he)}}a&4&&t.stateNode!=null&&(d=t.memoizedProps,au(t,d,l!==null?l.memoizedProps:d)),a&1024&&(fu=!0);break;case 6:if(zt(i,t),Vt(t),a&4){if(t.stateNode===null)throw Error(s(162));a=t.memoizedProps,l=t.stateNode;try{l.nodeValue=a}catch(he){Ye(t,t.return,he)}}break;case 3:if(or=null,d=yn,yn=nr(i.containerInfo),zt(i,t),yn=d,Vt(t),a&4&&l!==null&&l.memoizedState.isDehydrated)try{Po(i.containerInfo)}catch(he){Ye(t,t.return,he)}fu&&(fu=!1,mp(t));break;case 4:a=yn,yn=nr(t.stateNode.containerInfo),zt(i,t),Vt(t),yn=a;break;case 12:zt(i,t),Vt(t);break;case 31:zt(i,t),Vt(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Vs(t,a)));break;case 13:zt(i,t),Vt(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Fs=wt()),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Vs(t,a)));break;case 22:d=t.memoizedState!==null;var R=l!==null&&l.memoizedState!==null,B=Vn,Q=mt;if(Vn=B||d,mt=Q||R,zt(i,t),mt=Q,Vn=B,Vt(t),a&8192)e:for(i=t.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(l===null||R||Vn||mt||Vi(t)),l=null,i=t;;){if(i.tag===5||i.tag===26){if(l===null){R=l=i;try{if(y=R.stateNode,d)C=y.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{_=R.stateNode;var ne=R.memoizedProps.style,V=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;_.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(he){Ye(R,R.return,he)}}}else if(i.tag===6){if(l===null){R=i;try{R.stateNode.nodeValue=d?"":R.memoizedProps}catch(he){Ye(R,R.return,he)}}}else if(i.tag===18){if(l===null){R=i;try{var F=R.stateNode;d?oh(F,!0):oh(R.stateNode,!1)}catch(he){Ye(R,R.return,he)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}a&4&&(a=t.updateQueue,a!==null&&(l=a.retryQueue,l!==null&&(a.retryQueue=null,Vs(t,l))));break;case 19:zt(i,t),Vt(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Vs(t,a)));break;case 30:break;case 21:break;default:zt(i,t),Vt(t)}}function Vt(t){var i=t.flags;if(i&2){try{for(var l,a=t.return;a!==null;){if(sp(a)){l=a;break}a=a.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var d=l.stateNode,y=uu(t);zs(t,y,d);break;case 5:var C=l.stateNode;l.flags&32&&(io(C,""),l.flags&=-33);var _=uu(t);zs(t,_,C);break;case 3:case 4:var R=l.stateNode.containerInfo,B=uu(t);cu(t,B,R);break;default:throw Error(s(161))}}catch(Q){Ye(t,t.return,Q)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function mp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;mp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Fn(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)up(t,i.alternate,i),i=i.sibling}function Vi(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:ai(4,i,i.return),Vi(i);break;case 1:bn(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&op(i,i.return,l),Vi(i);break;case 27:Pl(i.stateNode);case 26:case 5:bn(i,i.return),Vi(i);break;case 22:i.memoizedState===null&&Vi(i);break;case 30:Vi(i);break;default:Vi(i)}t=t.sibling}}function $n(t,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var a=i.alternate,d=t,y=i,C=y.flags;switch(y.tag){case 0:case 11:case 15:$n(d,y,l),Al(4,y);break;case 1:if($n(d,y,l),a=y,d=a.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(B){Ye(a,a.return,B)}if(a=y,d=a.updateQueue,d!==null){var _=a.stateNode;try{var R=d.shared.hiddenCallbacks;if(R!==null)for(d.shared.hiddenCallbacks=null,d=0;d<R.length;d++)Yf(R[d],_)}catch(B){Ye(a,a.return,B)}}l&&C&64&&ip(y),bl(y,y.return);break;case 27:rp(y);case 26:case 5:$n(d,y,l),l&&a===null&&C&4&&lp(y),bl(y,y.return);break;case 12:$n(d,y,l);break;case 31:$n(d,y,l),l&&C&4&&dp(d,y);break;case 13:$n(d,y,l),l&&C&4&&pp(d,y);break;case 22:y.memoizedState===null&&$n(d,y,l),bl(y,y.return);break;case 30:break;default:$n(d,y,l)}i=i.sibling}}function du(t,i){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&dl(l))}function pu(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&dl(t))}function vn(t,i,l,a){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)gp(t,i,l,a),i=i.sibling}function gp(t,i,l,a){var d=i.flags;switch(i.tag){case 0:case 11:case 15:vn(t,i,l,a),d&2048&&Al(9,i);break;case 1:vn(t,i,l,a);break;case 3:vn(t,i,l,a),d&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&dl(t)));break;case 12:if(d&2048){vn(t,i,l,a),t=i.stateNode;try{var y=i.memoizedProps,C=y.id,_=y.onPostCommit;typeof _=="function"&&_(C,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(R){Ye(i,i.return,R)}}else vn(t,i,l,a);break;case 31:vn(t,i,l,a);break;case 13:vn(t,i,l,a);break;case 23:break;case 22:y=i.stateNode,C=i.alternate,i.memoizedState!==null?y._visibility&2?vn(t,i,l,a):Ml(t,i):y._visibility&2?vn(t,i,l,a):(y._visibility|=2,_o(t,i,l,a,(i.subtreeFlags&10256)!==0||!1)),d&2048&&du(C,i);break;case 24:vn(t,i,l,a),d&2048&&pu(i.alternate,i);break;default:vn(t,i,l,a)}}function _o(t,i,l,a,d){for(d=d&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=t,C=i,_=l,R=a,B=C.flags;switch(C.tag){case 0:case 11:case 15:_o(y,C,_,R,d),Al(8,C);break;case 23:break;case 22:var Q=C.stateNode;C.memoizedState!==null?Q._visibility&2?_o(y,C,_,R,d):Ml(y,C):(Q._visibility|=2,_o(y,C,_,R,d)),d&&B&2048&&du(C.alternate,C);break;case 24:_o(y,C,_,R,d),d&&B&2048&&pu(C.alternate,C);break;default:_o(y,C,_,R,d)}i=i.sibling}}function Ml(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=t,a=i,d=a.flags;switch(a.tag){case 22:Ml(l,a),d&2048&&du(a.alternate,a);break;case 24:Ml(l,a),d&2048&&pu(a.alternate,a);break;default:Ml(l,a)}i=i.sibling}}var Nl=8192;function Ao(t,i,l){if(t.subtreeFlags&Nl)for(t=t.child;t!==null;)yp(t,i,l),t=t.sibling}function yp(t,i,l){switch(t.tag){case 26:Ao(t,i,l),t.flags&Nl&&t.memoizedState!==null&&Xv(l,yn,t.memoizedState,t.memoizedProps);break;case 5:Ao(t,i,l);break;case 3:case 4:var a=yn;yn=nr(t.stateNode.containerInfo),Ao(t,i,l),yn=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=Nl,Nl=16777216,Ao(t,i,l),Nl=a):Ao(t,i,l));break;default:Ao(t,i,l)}}function vp(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Rl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var a=i[l];Ct=a,Tp(a,t)}vp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xp(t),t=t.sibling}function xp(t){switch(t.tag){case 0:case 11:case 15:Rl(t),t.flags&2048&&ai(9,t,t.return);break;case 3:Rl(t);break;case 12:Rl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Os(t)):Rl(t);break;default:Rl(t)}}function Os(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var a=i[l];Ct=a,Tp(a,t)}vp(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:ai(8,i,i.return),Os(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Os(i));break;default:Os(i)}t=t.sibling}}function Tp(t,i){for(;Ct!==null;){var l=Ct;switch(l.tag){case 0:case 11:case 15:ai(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var a=l.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:dl(l.memoizedState.cache)}if(a=l.child,a!==null)a.return=l,Ct=a;else e:for(l=t;Ct!==null;){a=Ct;var d=a.sibling,y=a.return;if(cp(a),a===l){Ct=null;break e}if(d!==null){d.return=y,Ct=d;break e}Ct=y}}}var cv={getCacheForType:function(t){var i=_t(dt),l=i.data.get(t);return l===void 0&&(l=t(),i.data.set(t,l)),l},cacheSignal:function(){return _t(dt).controller.signal}},fv=typeof WeakMap=="function"?WeakMap:Map,Fe=0,Ze=null,De=null,Ue=0,$e=0,Qt=null,ui=!1,bo=!1,hu=!1,Yn=0,ut=0,ci=0,Oi=0,mu=0,Zt=0,Mo=0,Il=null,Ot=null,gu=!1,Fs=0,Cp=0,$s=1/0,Ys=null,fi=null,yt=0,di=null,No=null,Jn=0,yu=0,vu=null,Sp=null,Dl=0,xu=null;function Wt(){return(Fe&2)!==0&&Ue!==0?Ue&-Ue:G.T!==null?Au():nn()}function Ep(){if(Zt===0)if((Ue&536870912)===0||Be){var t=Xi;Xi<<=1,(Xi&3932160)===0&&(Xi=262144),Zt=t}else Zt=536870912;return t=Kt.current,t!==null&&(t.flags|=32),Zt}function Ft(t,i,l){(t===Ze&&($e===2||$e===9)||t.cancelPendingCommit!==null)&&(Ro(t,0),pi(t,Ue,Zt,!1)),fe(t,l),((Fe&2)===0||t!==Ze)&&(t===Ze&&((Fe&2)===0&&(Oi|=l),ut===4&&pi(t,Ue,Zt,!1)),Mn(t))}function _p(t,i,l){if((Fe&6)!==0)throw Error(s(327));var a=!l&&(i&127)===0&&(i&t.expiredLanes)===0||le(t,i),d=a?hv(t,i):Cu(t,i,!0),y=a;do{if(d===0){bo&&!a&&pi(t,i,0,!1);break}else{if(l=t.current.alternate,y&&!dv(l)){d=Cu(t,i,!1),y=!1;continue}if(d===2){if(y=i,t.errorRecoveryDisabledLanes&y)var C=0;else C=t.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){i=C;e:{var _=t;d=Il;var R=_.current.memoizedState.isDehydrated;if(R&&(Ro(_,C).flags|=256),C=Cu(_,C,!1),C!==2){if(hu&&!R){_.errorRecoveryDisabledLanes|=y,Oi|=y,d=4;break e}y=Ot,Ot=d,y!==null&&(Ot===null?Ot=y:Ot.push.apply(Ot,y))}d=C}if(y=!1,d!==2)continue}}if(d===1){Ro(t,0),pi(t,i,0,!0);break}e:{switch(a=t,y=d,y){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:pi(a,i,Zt,!ui);break e;case 2:Ot=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(d=Fs+300-wt(),10<d)){if(pi(a,i,Zt,!ui),ie(a,0,!0)!==0)break e;Jn=i,a.timeoutHandle=th(Ap.bind(null,a,l,Ot,Ys,gu,i,Zt,Oi,Mo,ui,y,"Throttled",-0,0),d);break e}Ap(a,l,Ot,Ys,gu,i,Zt,Oi,Mo,ui,y,null,-0,0)}}break}while(!0);Mn(t)}function Ap(t,i,l,a,d,y,C,_,R,B,Q,ne,V,F){if(t.timeoutHandle=-1,ne=i.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wn},yp(i,y,ne);var he=(y&62914560)===y?Fs-wt():(y&4194048)===y?Cp-wt():0;if(he=Qv(ne,he),he!==null){Jn=y,t.cancelPendingCommit=he(kp.bind(null,t,i,y,l,a,d,C,_,R,Q,ne,null,V,F)),pi(t,y,C,!B);return}}kp(t,i,y,l,a,d,C,_,R)}function dv(t){for(var i=t;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var a=0;a<l.length;a++){var d=l[a],y=d.getSnapshot;d=d.value;try{if(!Yt(y(),d))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function pi(t,i,l,a){i&=~mu,i&=~Oi,t.suspendedLanes|=i,t.pingedLanes&=~i,a&&(t.warmLanes|=i),a=t.expirationTimes;for(var d=i;0<d;){var y=31-Nt(d),C=1<<y;a[y]=-1,d&=~C}l!==0&&W(t,l,i)}function Js(){return(Fe&6)===0?(wl(0),!1):!0}function Tu(){if(De!==null){if($e===0)var t=De.return;else t=De,Ln=Ui=null,La(t),xo=null,hl=0,t=De;for(;t!==null;)np(t.alternate,t),t=t.return;De=null}}function Ro(t,i){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,wv(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),Jn=0,Tu(),Ze=t,De=l=Un(t.current,null),Ue=i,$e=0,Qt=null,ui=!1,bo=le(t,i),hu=!1,Mo=Zt=mu=Oi=ci=ut=0,Ot=Il=null,gu=!1,(i&8)!==0&&(i|=i&32);var a=t.entangledLanes;if(a!==0)for(t=t.entanglements,a&=i;0<a;){var d=31-Nt(a),y=1<<d;i|=t[d],a&=~y}return Yn=i,hs(),l}function bp(t,i){Ne=null,G.H=Sl,i===vo||i===Ss?(i=Vf(),$e=3):i===_a?(i=Vf(),$e=4):$e=i===Wa?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Qt=i,De===null&&(ut=1,Ls(t,rn(i,t.current)))}function Mp(){var t=Kt.current;return t===null?!0:(Ue&4194048)===Ue?fn===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?t===fn:!1}function Np(){var t=G.H;return G.H=Sl,t===null?Sl:t}function Rp(){var t=G.A;return G.A=cv,t}function Ks(){ut=4,ui||(Ue&4194048)!==Ue&&Kt.current!==null||(bo=!0),(ci&134217727)===0&&(Oi&134217727)===0||Ze===null||pi(Ze,Ue,Zt,!1)}function Cu(t,i,l){var a=Fe;Fe|=2;var d=Np(),y=Rp();(Ze!==t||Ue!==i)&&(Ys=null,Ro(t,i)),i=!1;var C=ut;e:do try{if($e!==0&&De!==null){var _=De,R=Qt;switch($e){case 8:Tu(),C=6;break e;case 3:case 2:case 9:case 6:Kt.current===null&&(i=!0);var B=$e;if($e=0,Qt=null,Io(t,_,R,B),l&&bo){C=0;break e}break;default:B=$e,$e=0,Qt=null,Io(t,_,R,B)}}pv(),C=ut;break}catch(Q){bp(t,Q)}while(!0);return i&&t.shellSuspendCounter++,Ln=Ui=null,Fe=a,G.H=d,G.A=y,De===null&&(Ze=null,Ue=0,hs()),C}function pv(){for(;De!==null;)Ip(De)}function hv(t,i){var l=Fe;Fe|=2;var a=Np(),d=Rp();Ze!==t||Ue!==i?(Ys=null,$s=wt()+500,Ro(t,i)):bo=le(t,i);e:do try{if($e!==0&&De!==null){i=De;var y=Qt;t:switch($e){case 1:$e=0,Qt=null,Io(t,i,y,1);break;case 2:case 9:if(qf(y)){$e=0,Qt=null,Dp(i);break}i=function(){$e!==2&&$e!==9||Ze!==t||($e=7),Mn(t)},y.then(i,i);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:qf(y)?($e=0,Qt=null,Dp(i)):($e=0,Qt=null,Io(t,i,y,7));break;case 5:var C=null;switch(De.tag){case 26:C=De.memoizedState;case 5:case 27:var _=De;if(C?gh(C):_.stateNode.complete){$e=0,Qt=null;var R=_.sibling;if(R!==null)De=R;else{var B=_.return;B!==null?(De=B,Xs(B)):De=null}break t}}$e=0,Qt=null,Io(t,i,y,5);break;case 6:$e=0,Qt=null,Io(t,i,y,6);break;case 8:Tu(),ut=6;break e;default:throw Error(s(462))}}mv();break}catch(Q){bp(t,Q)}while(!0);return Ln=Ui=null,G.H=a,G.A=d,Fe=l,De!==null?0:(Ze=null,Ue=0,hs(),ut)}function mv(){for(;De!==null&&!Zn();)Ip(De)}function Ip(t){var i=ep(t.alternate,t,Yn);t.memoizedProps=t.pendingProps,i===null?Xs(t):De=i}function Dp(t){var i=t,l=i.alternate;switch(i.tag){case 15:case 0:i=Kd(l,i,i.pendingProps,i.type,void 0,Ue);break;case 11:i=Kd(l,i,i.pendingProps,i.type.render,i.ref,Ue);break;case 5:La(i);default:np(l,i),i=De=Rf(i,Yn),i=ep(l,i,Yn)}t.memoizedProps=t.pendingProps,i===null?Xs(t):De=i}function Io(t,i,l,a){Ln=Ui=null,La(i),xo=null,hl=0;var d=i.return;try{if(iv(t,d,i,l,Ue)){ut=1,Ls(t,rn(l,t.current)),De=null;return}}catch(y){if(d!==null)throw De=d,y;ut=1,Ls(t,rn(l,t.current)),De=null;return}i.flags&32768?(Be||a===1?t=!0:bo||(Ue&536870912)!==0?t=!1:(ui=t=!0,(a===2||a===9||a===3||a===6)&&(a=Kt.current,a!==null&&a.tag===13&&(a.flags|=16384))),wp(i,t)):Xs(i)}function Xs(t){var i=t;do{if((i.flags&32768)!==0){wp(i,ui);return}t=i.return;var l=sv(i.alternate,i,Yn);if(l!==null){De=l;return}if(i=i.sibling,i!==null){De=i;return}De=i=t}while(i!==null);ut===0&&(ut=5)}function wp(t,i){do{var l=rv(t.alternate,t);if(l!==null){l.flags&=32767,De=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(t=t.sibling,t!==null)){De=t;return}De=t=l}while(t!==null);ut=6,De=null}function kp(t,i,l,a,d,y,C,_,R){t.cancelPendingCommit=null;do Qs();while(yt!==0);if((Fe&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(y=i.lanes|i.childLanes,y|=ua,Z(t,l,y,C,_,R),t===Ze&&(De=Ze=null,Ue=0),No=i,di=t,Jn=l,yu=y,vu=d,Sp=a,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,xv(Ji,function(){return Hp(),null})):(t.callbackNode=null,t.callbackPriority=0),a=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null,d=se.p,se.p=2,C=Fe,Fe|=4;try{av(t,i,l)}finally{Fe=C,se.p=d,G.T=a}}yt=1,Up(),Pp(),Lp()}}function Up(){if(yt===1){yt=0;var t=di,i=No,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=G.T,G.T=null;var a=se.p;se.p=2;var d=Fe;Fe|=4;try{hp(i,t);var y=ku,C=Tf(t.containerInfo),_=y.focusedElem,R=y.selectionRange;if(C!==_&&_&&_.ownerDocument&&xf(_.ownerDocument.documentElement,_)){if(R!==null&&oa(_)){var B=R.start,Q=R.end;if(Q===void 0&&(Q=B),"selectionStart"in _)_.selectionStart=B,_.selectionEnd=Math.min(Q,_.value.length);else{var ne=_.ownerDocument||document,V=ne&&ne.defaultView||window;if(V.getSelection){var F=V.getSelection(),he=_.textContent.length,Se=Math.min(R.start,he),Xe=R.end===void 0?Se:Math.min(R.end,he);!F.extend&&Se>Xe&&(C=Xe,Xe=Se,Se=C);var U=vf(_,Se),D=vf(_,Xe);if(U&&D&&(F.rangeCount!==1||F.anchorNode!==U.node||F.anchorOffset!==U.offset||F.focusNode!==D.node||F.focusOffset!==D.offset)){var H=ne.createRange();H.setStart(U.node,U.offset),F.removeAllRanges(),Se>Xe?(F.addRange(H),F.extend(D.node,D.offset)):(H.setEnd(D.node,D.offset),F.addRange(H))}}}}for(ne=[],F=_;F=F.parentNode;)F.nodeType===1&&ne.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<ne.length;_++){var te=ne[_];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}ar=!!wu,ku=wu=null}finally{Fe=d,se.p=a,G.T=l}}t.current=i,yt=2}}function Pp(){if(yt===2){yt=0;var t=di,i=No,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=G.T,G.T=null;var a=se.p;se.p=2;var d=Fe;Fe|=4;try{up(t,i.alternate,i)}finally{Fe=d,se.p=a,G.T=l}}yt=3}}function Lp(){if(yt===4||yt===3){yt=0,Ur();var t=di,i=No,l=Jn,a=Sp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?yt=5:(yt=0,No=di=null,Gp(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(fi=null),it(l),i=i.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(bi,i,void 0,(i.current.flags&128)===128)}catch{}if(a!==null){i=G.T,d=se.p,se.p=2,G.T=null;try{for(var y=t.onRecoverableError,C=0;C<a.length;C++){var _=a[C];y(_.value,{componentStack:_.stack})}}finally{G.T=i,se.p=d}}(Jn&3)!==0&&Qs(),Mn(t),d=t.pendingLanes,(l&261930)!==0&&(d&42)!==0?t===xu?Dl++:(Dl=0,xu=t):Dl=0,wl(0)}}function Gp(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,dl(i)))}function Qs(){return Up(),Pp(),Lp(),Hp()}function Hp(){if(yt!==5)return!1;var t=di,i=yu;yu=0;var l=it(Jn),a=G.T,d=se.p;try{se.p=32>l?32:l,G.T=null,l=vu,vu=null;var y=di,C=Jn;if(yt=0,No=di=null,Jn=0,(Fe&6)!==0)throw Error(s(331));var _=Fe;if(Fe|=4,xp(y.current),gp(y,y.current,C,l),Fe=_,wl(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(bi,y)}catch{}return!0}finally{se.p=d,G.T=a,Gp(t,i)}}function Bp(t,i,l){i=rn(l,i),i=Za(t.stateNode,i,2),t=li(t,i,2),t!==null&&(fe(t,2),Mn(t))}function Ye(t,i,l){if(t.tag===3)Bp(t,t,l);else for(;i!==null;){if(i.tag===3){Bp(i,t,l);break}else if(i.tag===1){var a=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(fi===null||!fi.has(a))){t=rn(l,t),l=qd(2),a=li(i,l,2),a!==null&&(zd(l,a,i,t),fe(a,2),Mn(a));break}}i=i.return}}function Su(t,i,l){var a=t.pingCache;if(a===null){a=t.pingCache=new fv;var d=new Set;a.set(i,d)}else d=a.get(i),d===void 0&&(d=new Set,a.set(i,d));d.has(l)||(hu=!0,d.add(l),t=gv.bind(null,t,i,l),i.then(t,t))}function gv(t,i,l){var a=t.pingCache;a!==null&&a.delete(i),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,Ze===t&&(Ue&l)===l&&(ut===4||ut===3&&(Ue&62914560)===Ue&&300>wt()-Fs?(Fe&2)===0&&Ro(t,0):mu|=l,Mo===Ue&&(Mo=0)),Mn(t)}function qp(t,i){i===0&&(i=ee()),t=Di(t,i),t!==null&&(fe(t,i),Mn(t))}function yv(t){var i=t.memoizedState,l=0;i!==null&&(l=i.retryLane),qp(t,l)}function vv(t,i){var l=0;switch(t.tag){case 31:case 13:var a=t.stateNode,d=t.memoizedState;d!==null&&(l=d.retryLane);break;case 19:a=t.stateNode;break;case 22:a=t.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(i),qp(t,l)}function xv(t,i){return mn(t,i)}var Zs=null,Do=null,Eu=!1,Ws=!1,_u=!1,hi=0;function Mn(t){t!==Do&&t.next===null&&(Do===null?Zs=Do=t:Do=Do.next=t),Ws=!0,Eu||(Eu=!0,Cv())}function wl(t,i){if(!_u&&Ws){_u=!0;do for(var l=!1,a=Zs;a!==null;){if(t!==0){var d=a.pendingLanes;if(d===0)var y=0;else{var C=a.suspendedLanes,_=a.pingedLanes;y=(1<<31-Nt(42|t)+1)-1,y&=d&~(C&~_),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,Fp(a,y))}else y=Ue,y=ie(a,a===Ze?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(y&3)===0||le(a,y)||(l=!0,Fp(a,y));a=a.next}while(l);_u=!1}}function Tv(){zp()}function zp(){Ws=Eu=!1;var t=0;hi!==0&&Dv()&&(t=hi);for(var i=wt(),l=null,a=Zs;a!==null;){var d=a.next,y=Vp(a,i);y===0?(a.next=null,l===null?Zs=d:l.next=d,d===null&&(Do=l)):(l=a,(t!==0||(y&3)!==0)&&(Ws=!0)),a=d}yt!==0&&yt!==5||wl(t),hi!==0&&(hi=0)}function Vp(t,i){for(var l=t.suspendedLanes,a=t.pingedLanes,d=t.expirationTimes,y=t.pendingLanes&-62914561;0<y;){var C=31-Nt(y),_=1<<C,R=d[C];R===-1?((_&l)===0||(_&a)!==0)&&(d[C]=z(_,i)):R<=i&&(t.expiredLanes|=_),y&=~_}if(i=Ze,l=Ue,l=ie(t,t===i?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a=t.callbackNode,l===0||t===i&&($e===2||$e===9)||t.cancelPendingCommit!==null)return a!==null&&a!==null&&Qe(a),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||le(t,l)){if(i=l&-l,i===t.callbackPriority)return i;switch(a!==null&&Qe(a),it(l)){case 2:case 8:l=ns;break;case 32:l=Ji;break;case 268435456:l=Ai;break;default:l=Ji}return a=Op.bind(null,t),l=mn(l,a),t.callbackPriority=i,t.callbackNode=l,i}return a!==null&&a!==null&&Qe(a),t.callbackPriority=2,t.callbackNode=null,2}function Op(t,i){if(yt!==0&&yt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(Qs()&&t.callbackNode!==l)return null;var a=Ue;return a=ie(t,t===Ze?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a===0?null:(_p(t,a,i),Vp(t,wt()),t.callbackNode!=null&&t.callbackNode===l?Op.bind(null,t):null)}function Fp(t,i){if(Qs())return null;_p(t,i,!0)}function Cv(){kv(function(){(Fe&6)!==0?mn(ts,Tv):zp()})}function Au(){if(hi===0){var t=go;t===0&&(t=Ki,Ki<<=1,(Ki&261888)===0&&(Ki=256)),hi=t}return hi}function $p(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ss(""+t)}function Yp(t,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,t.id&&l.setAttribute("form",t.id),i.parentNode.insertBefore(l,i),t=new FormData(t),l.parentNode.removeChild(l),t}function Sv(t,i,l,a,d){if(i==="submit"&&l&&l.stateNode===d){var y=$p((d[Ht]||null).action),C=a.submitter;C&&(i=(i=C[Ht]||null)?$p(i.formAction):C.getAttribute("formAction"),i!==null&&(y=i,C=null));var _=new cs("action","action",null,a,d);t.push({event:_,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(hi!==0){var R=C?Yp(d,C):new FormData(d);$a(l,{pending:!0,data:R,method:d.method,action:y},null,R)}}else typeof y=="function"&&(_.preventDefault(),R=C?Yp(d,C):new FormData(d),$a(l,{pending:!0,data:R,method:d.method,action:y},y,R))},currentTarget:d}]})}}for(var bu=0;bu<aa.length;bu++){var Mu=aa[bu],Ev=Mu.toLowerCase(),_v=Mu[0].toUpperCase()+Mu.slice(1);gn(Ev,"on"+_v)}gn(Ef,"onAnimationEnd"),gn(_f,"onAnimationIteration"),gn(Af,"onAnimationStart"),gn("dblclick","onDoubleClick"),gn("focusin","onFocus"),gn("focusout","onBlur"),gn(q0,"onTransitionRun"),gn(z0,"onTransitionStart"),gn(V0,"onTransitionCancel"),gn(bf,"onTransitionEnd"),to("onMouseEnter",["mouseout","mouseover"]),to("onMouseLeave",["mouseout","mouseover"]),to("onPointerEnter",["pointerout","pointerover"]),to("onPointerLeave",["pointerout","pointerover"]),Mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Av=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kl));function Jp(t,i){i=(i&4)!==0;for(var l=0;l<t.length;l++){var a=t[l],d=a.event;a=a.listeners;e:{var y=void 0;if(i)for(var C=a.length-1;0<=C;C--){var _=a[C],R=_.instance,B=_.currentTarget;if(_=_.listener,R!==y&&d.isPropagationStopped())break e;y=_,d.currentTarget=B;try{y(d)}catch(Q){ps(Q)}d.currentTarget=null,y=R}else for(C=0;C<a.length;C++){if(_=a[C],R=_.instance,B=_.currentTarget,_=_.listener,R!==y&&d.isPropagationStopped())break e;y=_,d.currentTarget=B;try{y(d)}catch(Q){ps(Q)}d.currentTarget=null,y=R}}}}function we(t,i){var l=i[qr];l===void 0&&(l=i[qr]=new Set);var a=t+"__bubble";l.has(a)||(Kp(i,t,2,!1),l.add(a))}function Nu(t,i,l){var a=0;i&&(a|=4),Kp(l,t,a,i)}var js="_reactListening"+Math.random().toString(36).slice(2);function Ru(t){if(!t[js]){t[js]=!0,qc.forEach(function(l){l!=="selectionchange"&&(Av.has(l)||Nu(l,!1,t),Nu(l,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[js]||(i[js]=!0,Nu("selectionchange",!1,i))}}function Kp(t,i,l,a){switch(Eh(i)){case 2:var d=jv;break;case 8:d=ex;break;default:d=Fu}l=d.bind(null,i,l,t),d=void 0,!Xr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),a?d!==void 0?t.addEventListener(i,l,{capture:!0,passive:d}):t.addEventListener(i,l,!0):d!==void 0?t.addEventListener(i,l,{passive:d}):t.addEventListener(i,l,!1)}function Iu(t,i,l,a,d){var y=a;if((i&1)===0&&(i&2)===0&&a!==null)e:for(;;){if(a===null)return;var C=a.tag;if(C===3||C===4){var _=a.stateNode.containerInfo;if(_===d)break;if(C===4)for(C=a.return;C!==null;){var R=C.tag;if((R===3||R===4)&&C.stateNode.containerInfo===d)return;C=C.return}for(;_!==null;){if(C=Wi(_),C===null)return;if(R=C.tag,R===5||R===6||R===26||R===27){a=y=C;continue e}_=_.parentNode}}a=a.return}Wc(function(){var B=y,Q=Jr(l),ne=[];e:{var V=Mf.get(t);if(V!==void 0){var F=cs,he=t;switch(t){case"keypress":if(as(l)===0)break e;case"keydown":case"keyup":F=v0;break;case"focusin":he="focus",F=jr;break;case"focusout":he="blur",F=jr;break;case"beforeblur":case"afterblur":F=jr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=tf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=s0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=C0;break;case Ef:case _f:case Af:F=u0;break;case bf:F=E0;break;case"scroll":case"scrollend":F=o0;break;case"wheel":F=A0;break;case"copy":case"cut":case"paste":F=f0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=of;break;case"toggle":case"beforetoggle":F=M0}var Se=(i&4)!==0,Xe=!Se&&(t==="scroll"||t==="scrollend"),U=Se?V!==null?V+"Capture":null:V;Se=[];for(var D=B,H;D!==null;){var te=D;if(H=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||H===null||U===null||(te=tl(D,U),te!=null&&Se.push(Ul(D,te,H))),Xe)break;D=D.return}0<Se.length&&(V=new F(V,he,null,l,Q),ne.push({event:V,listeners:Se}))}}if((i&7)===0){e:{if(V=t==="mouseover"||t==="pointerover",F=t==="mouseout"||t==="pointerout",V&&l!==Yr&&(he=l.relatedTarget||l.fromElement)&&(Wi(he)||he[Zi]))break e;if((F||V)&&(V=Q.window===Q?Q:(V=Q.ownerDocument)?V.defaultView||V.parentWindow:window,F?(he=l.relatedTarget||l.toElement,F=B,he=he?Wi(he):null,he!==null&&(Xe=u(he),Se=he.tag,he!==Xe||Se!==5&&Se!==27&&Se!==6)&&(he=null)):(F=null,he=B),F!==he)){if(Se=tf,te="onMouseLeave",U="onMouseEnter",D="mouse",(t==="pointerout"||t==="pointerover")&&(Se=of,te="onPointerLeave",U="onPointerEnter",D="pointer"),Xe=F==null?V:el(F),H=he==null?V:el(he),V=new Se(te,D+"leave",F,l,Q),V.target=Xe,V.relatedTarget=H,te=null,Wi(Q)===B&&(Se=new Se(U,D+"enter",he,l,Q),Se.target=H,Se.relatedTarget=Xe,te=Se),Xe=te,F&&he)t:{for(Se=bv,U=F,D=he,H=0,te=U;te;te=Se(te))H++;te=0;for(var Te=D;Te;Te=Se(Te))te++;for(;0<H-te;)U=Se(U),H--;for(;0<te-H;)D=Se(D),te--;for(;H--;){if(U===D||D!==null&&U===D.alternate){Se=U;break t}U=Se(U),D=Se(D)}Se=null}else Se=null;F!==null&&Xp(ne,V,F,Se,!1),he!==null&&Xe!==null&&Xp(ne,Xe,he,Se,!0)}}e:{if(V=B?el(B):window,F=V.nodeName&&V.nodeName.toLowerCase(),F==="select"||F==="input"&&V.type==="file")var qe=df;else if(cf(V))if(pf)qe=G0;else{qe=P0;var ge=U0}else F=V.nodeName,!F||F.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?B&&$r(B.elementType)&&(qe=df):qe=L0;if(qe&&(qe=qe(t,B))){ff(ne,qe,l,Q);break e}ge&&ge(t,V,B),t==="focusout"&&B&&V.type==="number"&&B.memoizedProps.value!=null&&Fr(V,"number",V.value)}switch(ge=B?el(B):window,t){case"focusin":(cf(ge)||ge.contentEditable==="true")&&(ro=ge,la=B,ul=null);break;case"focusout":ul=la=ro=null;break;case"mousedown":sa=!0;break;case"contextmenu":case"mouseup":case"dragend":sa=!1,Cf(ne,l,Q);break;case"selectionchange":if(B0)break;case"keydown":case"keyup":Cf(ne,l,Q)}var Re;if(ta)e:{switch(t){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else so?af(t,l)&&(Pe="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(Pe="onCompositionStart");Pe&&(lf&&l.locale!=="ko"&&(so||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&so&&(Re=jc()):(Wn=Q,Qr="value"in Wn?Wn.value:Wn.textContent,so=!0)),ge=er(B,Pe),0<ge.length&&(Pe=new nf(Pe,t,null,l,Q),ne.push({event:Pe,listeners:ge}),Re?Pe.data=Re:(Re=uf(l),Re!==null&&(Pe.data=Re)))),(Re=R0?I0(t,l):D0(t,l))&&(Pe=er(B,"onBeforeInput"),0<Pe.length&&(ge=new nf("onBeforeInput","beforeinput",null,l,Q),ne.push({event:ge,listeners:Pe}),ge.data=Re)),Sv(ne,t,B,l,Q)}Jp(ne,i)})}function Ul(t,i,l){return{instance:t,listener:i,currentTarget:l}}function er(t,i){for(var l=i+"Capture",a=[];t!==null;){var d=t,y=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||y===null||(d=tl(t,l),d!=null&&a.unshift(Ul(t,d,y)),d=tl(t,i),d!=null&&a.push(Ul(t,d,y))),t.tag===3)return a;t=t.return}return[]}function bv(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Xp(t,i,l,a,d){for(var y=i._reactName,C=[];l!==null&&l!==a;){var _=l,R=_.alternate,B=_.stateNode;if(_=_.tag,R!==null&&R===a)break;_!==5&&_!==26&&_!==27||B===null||(R=B,d?(B=tl(l,y),B!=null&&C.unshift(Ul(l,B,R))):d||(B=tl(l,y),B!=null&&C.push(Ul(l,B,R)))),l=l.return}C.length!==0&&t.push({event:i,listeners:C})}var Mv=/\r\n?/g,Nv=/\u0000|\uFFFD/g;function Qp(t){return(typeof t=="string"?t:""+t).replace(Mv,`
`).replace(Nv,"")}function Zp(t,i){return i=Qp(i),Qp(t)===i}function Ke(t,i,l,a,d,y){switch(l){case"children":typeof a=="string"?i==="body"||i==="textarea"&&a===""||io(t,a):(typeof a=="number"||typeof a=="bigint")&&i!=="body"&&io(t,""+a);break;case"className":os(t,"class",a);break;case"tabIndex":os(t,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":os(t,l,a);break;case"style":Qc(t,a,y);break;case"data":if(i!=="object"){os(t,"data",a);break}case"src":case"href":if(a===""&&(i!=="a"||l!=="href")){t.removeAttribute(l);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(l);break}a=ss(""+a),t.setAttribute(l,a);break;case"action":case"formAction":if(typeof a=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(i!=="input"&&Ke(t,i,"name",d.name,d,null),Ke(t,i,"formEncType",d.formEncType,d,null),Ke(t,i,"formMethod",d.formMethod,d,null),Ke(t,i,"formTarget",d.formTarget,d,null)):(Ke(t,i,"encType",d.encType,d,null),Ke(t,i,"method",d.method,d,null),Ke(t,i,"target",d.target,d,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(l);break}a=ss(""+a),t.setAttribute(l,a);break;case"onClick":a!=null&&(t.onclick=wn);break;case"onScroll":a!=null&&we("scroll",t);break;case"onScrollEnd":a!=null&&we("scrollend",t);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=l}}break;case"multiple":t.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":t.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){t.removeAttribute("xlink:href");break}l=ss(""+a),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(l,""+a):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":a===!0?t.setAttribute(l,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(l,a):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?t.setAttribute(l,a):t.removeAttribute(l);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?t.removeAttribute(l):t.setAttribute(l,a);break;case"popover":we("beforetoggle",t),we("toggle",t),is(t,"popover",a);break;case"xlinkActuate":Dn(t,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Dn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Dn(t,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Dn(t,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Dn(t,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Dn(t,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Dn(t,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Dn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Dn(t,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":is(t,"is",a);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=n0.get(l)||l,is(t,l,a))}}function Du(t,i,l,a,d,y){switch(l){case"style":Qc(t,a,y);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=l}}break;case"children":typeof a=="string"?io(t,a):(typeof a=="number"||typeof a=="bigint")&&io(t,""+a);break;case"onScroll":a!=null&&we("scroll",t);break;case"onScrollEnd":a!=null&&we("scrollend",t);break;case"onClick":a!=null&&(t.onclick=wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(d=l.endsWith("Capture"),i=l.slice(2,d?l.length-7:void 0),y=t[Ht]||null,y=y!=null?y[l]:null,typeof y=="function"&&t.removeEventListener(i,y,d),typeof a=="function")){typeof y!="function"&&y!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(i,a,d);break e}l in t?t[l]=a:a===!0?t.setAttribute(l,""):is(t,l,a)}}}function bt(t,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":we("error",t),we("load",t);var a=!1,d=!1,y;for(y in l)if(l.hasOwnProperty(y)){var C=l[y];if(C!=null)switch(y){case"src":a=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ke(t,i,y,C,l,null)}}d&&Ke(t,i,"srcSet",l.srcSet,l,null),a&&Ke(t,i,"src",l.src,l,null);return;case"input":we("invalid",t);var _=y=C=d=null,R=null,B=null;for(a in l)if(l.hasOwnProperty(a)){var Q=l[a];if(Q!=null)switch(a){case"name":d=Q;break;case"type":C=Q;break;case"checked":R=Q;break;case"defaultChecked":B=Q;break;case"value":y=Q;break;case"defaultValue":_=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:Ke(t,i,a,Q,l,null)}}Yc(t,y,_,R,B,C,d,!1);return;case"select":we("invalid",t),a=C=y=null;for(d in l)if(l.hasOwnProperty(d)&&(_=l[d],_!=null))switch(d){case"value":y=_;break;case"defaultValue":C=_;break;case"multiple":a=_;default:Ke(t,i,d,_,l,null)}i=y,l=C,t.multiple=!!a,i!=null?no(t,!!a,i,!1):l!=null&&no(t,!!a,l,!0);return;case"textarea":we("invalid",t),y=d=a=null;for(C in l)if(l.hasOwnProperty(C)&&(_=l[C],_!=null))switch(C){case"value":a=_;break;case"defaultValue":d=_;break;case"children":y=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:Ke(t,i,C,_,l,null)}Kc(t,a,d,y);return;case"option":for(R in l)if(l.hasOwnProperty(R)&&(a=l[R],a!=null))switch(R){case"selected":t.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Ke(t,i,R,a,l,null)}return;case"dialog":we("beforetoggle",t),we("toggle",t),we("cancel",t),we("close",t);break;case"iframe":case"object":we("load",t);break;case"video":case"audio":for(a=0;a<kl.length;a++)we(kl[a],t);break;case"image":we("error",t),we("load",t);break;case"details":we("toggle",t);break;case"embed":case"source":case"link":we("error",t),we("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in l)if(l.hasOwnProperty(B)&&(a=l[B],a!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ke(t,i,B,a,l,null)}return;default:if($r(i)){for(Q in l)l.hasOwnProperty(Q)&&(a=l[Q],a!==void 0&&Du(t,i,Q,a,l,void 0));return}}for(_ in l)l.hasOwnProperty(_)&&(a=l[_],a!=null&&Ke(t,i,_,a,l,null))}function Rv(t,i,l,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,y=null,C=null,_=null,R=null,B=null,Q=null;for(F in l){var ne=l[F];if(l.hasOwnProperty(F)&&ne!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":R=ne;default:a.hasOwnProperty(F)||Ke(t,i,F,null,a,ne)}}for(var V in a){var F=a[V];if(ne=l[V],a.hasOwnProperty(V)&&(F!=null||ne!=null))switch(V){case"type":y=F;break;case"name":d=F;break;case"checked":B=F;break;case"defaultChecked":Q=F;break;case"value":C=F;break;case"defaultValue":_=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:F!==ne&&Ke(t,i,V,F,a,ne)}}Or(t,C,_,R,B,Q,y,d);return;case"select":F=C=_=V=null;for(y in l)if(R=l[y],l.hasOwnProperty(y)&&R!=null)switch(y){case"value":break;case"multiple":F=R;default:a.hasOwnProperty(y)||Ke(t,i,y,null,a,R)}for(d in a)if(y=a[d],R=l[d],a.hasOwnProperty(d)&&(y!=null||R!=null))switch(d){case"value":V=y;break;case"defaultValue":_=y;break;case"multiple":C=y;default:y!==R&&Ke(t,i,d,y,a,R)}i=_,l=C,a=F,V!=null?no(t,!!l,V,!1):!!a!=!!l&&(i!=null?no(t,!!l,i,!0):no(t,!!l,l?[]:"",!1));return;case"textarea":F=V=null;for(_ in l)if(d=l[_],l.hasOwnProperty(_)&&d!=null&&!a.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Ke(t,i,_,null,a,d)}for(C in a)if(d=a[C],y=l[C],a.hasOwnProperty(C)&&(d!=null||y!=null))switch(C){case"value":V=d;break;case"defaultValue":F=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==y&&Ke(t,i,C,d,a,y)}Jc(t,V,F);return;case"option":for(var he in l)if(V=l[he],l.hasOwnProperty(he)&&V!=null&&!a.hasOwnProperty(he))switch(he){case"selected":t.selected=!1;break;default:Ke(t,i,he,null,a,V)}for(R in a)if(V=a[R],F=l[R],a.hasOwnProperty(R)&&V!==F&&(V!=null||F!=null))switch(R){case"selected":t.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:Ke(t,i,R,V,a,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in l)V=l[Se],l.hasOwnProperty(Se)&&V!=null&&!a.hasOwnProperty(Se)&&Ke(t,i,Se,null,a,V);for(B in a)if(V=a[B],F=l[B],a.hasOwnProperty(B)&&V!==F&&(V!=null||F!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,i));break;default:Ke(t,i,B,V,a,F)}return;default:if($r(i)){for(var Xe in l)V=l[Xe],l.hasOwnProperty(Xe)&&V!==void 0&&!a.hasOwnProperty(Xe)&&Du(t,i,Xe,void 0,a,V);for(Q in a)V=a[Q],F=l[Q],!a.hasOwnProperty(Q)||V===F||V===void 0&&F===void 0||Du(t,i,Q,V,a,F);return}}for(var U in l)V=l[U],l.hasOwnProperty(U)&&V!=null&&!a.hasOwnProperty(U)&&Ke(t,i,U,null,a,V);for(ne in a)V=a[ne],F=l[ne],!a.hasOwnProperty(ne)||V===F||V==null&&F==null||Ke(t,i,ne,V,a,F)}function Wp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Iv(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,l=performance.getEntriesByType("resource"),a=0;a<l.length;a++){var d=l[a],y=d.transferSize,C=d.initiatorType,_=d.duration;if(y&&_&&Wp(C)){for(C=0,_=d.responseEnd,a+=1;a<l.length;a++){var R=l[a],B=R.startTime;if(B>_)break;var Q=R.transferSize,ne=R.initiatorType;Q&&Wp(ne)&&(R=R.responseEnd,C+=Q*(R<_?1:(_-B)/(R-B)))}if(--a,i+=8*(y+C)/(d.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var wu=null,ku=null;function tr(t){return t.nodeType===9?t:t.ownerDocument}function jp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eh(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Uu(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Pu=null;function Dv(){var t=window.event;return t&&t.type==="popstate"?t===Pu?!1:(Pu=t,!0):(Pu=null,!1)}var th=typeof setTimeout=="function"?setTimeout:void 0,wv=typeof clearTimeout=="function"?clearTimeout:void 0,nh=typeof Promise=="function"?Promise:void 0,kv=typeof queueMicrotask=="function"?queueMicrotask:typeof nh<"u"?function(t){return nh.resolve(null).then(t).catch(Uv)}:th;function Uv(t){setTimeout(function(){throw t})}function mi(t){return t==="head"}function ih(t,i){var l=i,a=0;do{var d=l.nextSibling;if(t.removeChild(l),d&&d.nodeType===8)if(l=d.data,l==="/$"||l==="/&"){if(a===0){t.removeChild(d),Po(i);return}a--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")a++;else if(l==="html")Pl(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,Pl(l);for(var y=l.firstChild;y;){var C=y.nextSibling,_=y.nodeName;y[jo]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=C}}else l==="body"&&Pl(t.ownerDocument.body);l=d}while(l);Po(i)}function oh(t,i){var l=t;t=0;do{var a=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),a&&a.nodeType===8)if(l=a.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=a}while(l)}function Lu(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Lu(l),zr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function Pv(t,i,l,a){for(;t.nodeType===1;){var d=l;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!a&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(a){if(!t[jo])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(y=t.getAttribute("rel"),y==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(y!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(y=t.getAttribute("src"),(y!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&y&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var y=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===y)return t}else return t;if(t=dn(t.nextSibling),t===null)break}return null}function Lv(t,i,l){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=dn(t.nextSibling),t===null))return null;return t}function lh(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=dn(t.nextSibling),t===null))return null;return t}function Gu(t){return t.data==="$?"||t.data==="$~"}function Hu(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Gv(t,i){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||l.readyState!=="loading")i();else{var a=function(){i(),l.removeEventListener("DOMContentLoaded",a)};l.addEventListener("DOMContentLoaded",a),t._reactRetry=a}}function dn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Bu=null;function sh(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(i===0)return dn(t.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}t=t.nextSibling}return null}function rh(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return t;i--}else l!=="/$"&&l!=="/&"||i++}t=t.previousSibling}return null}function ah(t,i,l){switch(i=tr(l),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Pl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);zr(t)}var pn=new Map,uh=new Set;function nr(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Kn=se.d;se.d={f:Hv,r:Bv,D:qv,C:zv,L:Vv,m:Ov,X:$v,S:Fv,M:Yv};function Hv(){var t=Kn.f(),i=Js();return t||i}function Bv(t){var i=ji(t);i!==null&&i.tag===5&&i.type==="form"?bd(i):Kn.r(t)}var wo=typeof document>"u"?null:document;function ch(t,i,l){var a=wo;if(a&&typeof i=="string"&&i){var d=ln(i);d='link[rel="'+t+'"][href="'+d+'"]',typeof l=="string"&&(d+='[crossorigin="'+l+'"]'),uh.has(d)||(uh.add(d),t={rel:t,crossOrigin:l,href:i},a.querySelector(d)===null&&(i=a.createElement("link"),bt(i,"link",t),Tt(i),a.head.appendChild(i)))}}function qv(t){Kn.D(t),ch("dns-prefetch",t,null)}function zv(t,i){Kn.C(t,i),ch("preconnect",t,i)}function Vv(t,i,l){Kn.L(t,i,l);var a=wo;if(a&&t&&i){var d='link[rel="preload"][as="'+ln(i)+'"]';i==="image"&&l&&l.imageSrcSet?(d+='[imagesrcset="'+ln(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(d+='[imagesizes="'+ln(l.imageSizes)+'"]')):d+='[href="'+ln(t)+'"]';var y=d;switch(i){case"style":y=ko(t);break;case"script":y=Uo(t)}pn.has(y)||(t=x({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:t,as:i},l),pn.set(y,t),a.querySelector(d)!==null||i==="style"&&a.querySelector(Ll(y))||i==="script"&&a.querySelector(Gl(y))||(i=a.createElement("link"),bt(i,"link",t),Tt(i),a.head.appendChild(i)))}}function Ov(t,i){Kn.m(t,i);var l=wo;if(l&&t){var a=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+ln(a)+'"][href="'+ln(t)+'"]',y=d;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Uo(t)}if(!pn.has(y)&&(t=x({rel:"modulepreload",href:t},i),pn.set(y,t),l.querySelector(d)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Gl(y)))return}a=l.createElement("link"),bt(a,"link",t),Tt(a),l.head.appendChild(a)}}}function Fv(t,i,l){Kn.S(t,i,l);var a=wo;if(a&&t){var d=eo(a).hoistableStyles,y=ko(t);i=i||"default";var C=d.get(y);if(!C){var _={loading:0,preload:null};if(C=a.querySelector(Ll(y)))_.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":i},l),(l=pn.get(y))&&qu(t,l);var R=C=a.createElement("link");Tt(R),bt(R,"link",t),R._p=new Promise(function(B,Q){R.onload=B,R.onerror=Q}),R.addEventListener("load",function(){_.loading|=1}),R.addEventListener("error",function(){_.loading|=2}),_.loading|=4,ir(C,i,a)}C={type:"stylesheet",instance:C,count:1,state:_},d.set(y,C)}}}function $v(t,i){Kn.X(t,i);var l=wo;if(l&&t){var a=eo(l).hoistableScripts,d=Uo(t),y=a.get(d);y||(y=l.querySelector(Gl(d)),y||(t=x({src:t,async:!0},i),(i=pn.get(d))&&zu(t,i),y=l.createElement("script"),Tt(y),bt(y,"link",t),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},a.set(d,y))}}function Yv(t,i){Kn.M(t,i);var l=wo;if(l&&t){var a=eo(l).hoistableScripts,d=Uo(t),y=a.get(d);y||(y=l.querySelector(Gl(d)),y||(t=x({src:t,async:!0,type:"module"},i),(i=pn.get(d))&&zu(t,i),y=l.createElement("script"),Tt(y),bt(y,"link",t),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},a.set(d,y))}}function fh(t,i,l,a){var d=(d=X.current)?nr(d):null;if(!d)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=ko(l.href),l=eo(d).hoistableStyles,a=l.get(i),a||(a={type:"style",instance:null,count:0,state:null},l.set(i,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=ko(l.href);var y=eo(d).hoistableStyles,C=y.get(t);if(C||(d=d.ownerDocument||d,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(t,C),(y=d.querySelector(Ll(t)))&&!y._p&&(C.instance=y,C.state.loading=5),pn.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},pn.set(t,l),y||Jv(d,t,l,C.state))),i&&a===null)throw Error(s(528,""));return C}if(i&&a!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Uo(l),l=eo(d).hoistableScripts,a=l.get(i),a||(a={type:"script",instance:null,count:0,state:null},l.set(i,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function ko(t){return'href="'+ln(t)+'"'}function Ll(t){return'link[rel="stylesheet"]['+t+"]"}function dh(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function Jv(t,i,l,a){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?a.loading=1:(i=t.createElement("link"),a.preload=i,i.addEventListener("load",function(){return a.loading|=1}),i.addEventListener("error",function(){return a.loading|=2}),bt(i,"link",l),Tt(i),t.head.appendChild(i))}function Uo(t){return'[src="'+ln(t)+'"]'}function Gl(t){return"script[async]"+t}function ph(t,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var a=t.querySelector('style[data-href~="'+ln(l.href)+'"]');if(a)return i.instance=a,Tt(a),a;var d=x({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return a=(t.ownerDocument||t).createElement("style"),Tt(a),bt(a,"style",d),ir(a,l.precedence,t),i.instance=a;case"stylesheet":d=ko(l.href);var y=t.querySelector(Ll(d));if(y)return i.state.loading|=4,i.instance=y,Tt(y),y;a=dh(l),(d=pn.get(d))&&qu(a,d),y=(t.ownerDocument||t).createElement("link"),Tt(y);var C=y;return C._p=new Promise(function(_,R){C.onload=_,C.onerror=R}),bt(y,"link",a),i.state.loading|=4,ir(y,l.precedence,t),i.instance=y;case"script":return y=Uo(l.src),(d=t.querySelector(Gl(y)))?(i.instance=d,Tt(d),d):(a=l,(d=pn.get(y))&&(a=x({},l),zu(a,d)),t=t.ownerDocument||t,d=t.createElement("script"),Tt(d),bt(d,"link",a),t.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(a=i.instance,i.state.loading|=4,ir(a,l.precedence,t));return i.instance}function ir(t,i,l){for(var a=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=a.length?a[a.length-1]:null,y=d,C=0;C<a.length;C++){var _=a[C];if(_.dataset.precedence===i)y=_;else if(y!==d)break}y?y.parentNode.insertBefore(t,y.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(t,i.firstChild))}function qu(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function zu(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var or=null;function hh(t,i,l){if(or===null){var a=new Map,d=or=new Map;d.set(l,a)}else d=or,a=d.get(l),a||(a=new Map,d.set(l,a));if(a.has(t))return a;for(a.set(t,null),l=l.getElementsByTagName(t),d=0;d<l.length;d++){var y=l[d];if(!(y[jo]||y[st]||t==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var C=y.getAttribute(i)||"";C=t+C;var _=a.get(C);_?_.push(y):a.set(C,[y])}}return a}function mh(t,i,l){t=t.ownerDocument||t,t.head.insertBefore(l,i==="title"?t.querySelector("head > title"):null)}function Kv(t,i,l){if(l===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function gh(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Xv(t,i,l,a){if(l.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var d=ko(a.href),y=i.querySelector(Ll(d));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=lr.bind(t),i.then(t,t)),l.state.loading|=4,l.instance=y,Tt(y);return}y=i.ownerDocument||i,a=dh(a),(d=pn.get(d))&&qu(a,d),y=y.createElement("link"),Tt(y);var C=y;C._p=new Promise(function(_,R){C.onload=_,C.onerror=R}),bt(y,"link",a),l.instance=y}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=lr.bind(t),i.addEventListener("load",l),i.addEventListener("error",l))}}var Vu=0;function Qv(t,i){return t.stylesheets&&t.count===0&&rr(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var a=setTimeout(function(){if(t.stylesheets&&rr(t,t.stylesheets),t.unsuspend){var y=t.unsuspend;t.unsuspend=null,y()}},6e4+i);0<t.imgBytes&&Vu===0&&(Vu=62500*Iv());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&rr(t,t.stylesheets),t.unsuspend)){var y=t.unsuspend;t.unsuspend=null,y()}},(t.imgBytes>Vu?50:800)+i);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(a),clearTimeout(d)}}:null}function lr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rr(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var sr=null;function rr(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,sr=new Map,i.forEach(Zv,t),sr=null,lr.call(t))}function Zv(t,i){if(!(i.state.loading&4)){var l=sr.get(t);if(l)var a=l.get(null);else{l=new Map,sr.set(t,l);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<d.length;y++){var C=d[y];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),a=C)}a&&l.set(null,a)}d=i.instance,C=d.getAttribute("data-precedence"),y=l.get(C)||a,y===a&&l.set(null,d),l.set(C,d),this.count++,a=lr.bind(this),d.addEventListener("load",a),d.addEventListener("error",a),y?y.parentNode.insertBefore(d,y.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),i.state.loading|=4}}var Hl={$$typeof:k,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function Wv(t,i,l,a,d,y,C,_,R){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=J(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J(0),this.hiddenUpdates=J(null),this.identifierPrefix=a,this.onUncaughtError=d,this.onCaughtError=y,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function yh(t,i,l,a,d,y,C,_,R,B,Q,ne){return t=new Wv(t,i,l,C,R,B,Q,ne,_),i=1,y===!0&&(i|=24),y=Jt(3,null,null,i),t.current=y,y.stateNode=t,i=Ca(),i.refCount++,t.pooledCache=i,i.refCount++,y.memoizedState={element:a,isDehydrated:l,cache:i},Aa(y),t}function vh(t){return t?(t=co,t):co}function xh(t,i,l,a,d,y){d=vh(d),a.context===null?a.context=d:a.pendingContext=d,a=oi(i),a.payload={element:l},y=y===void 0?null:y,y!==null&&(a.callback=y),l=li(t,a,i),l!==null&&(Ft(l,t,i),gl(l,t,i))}function Th(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<i?l:i}}function Ou(t,i){Th(t,i),(t=t.alternate)&&Th(t,i)}function Ch(t){if(t.tag===13||t.tag===31){var i=Di(t,67108864);i!==null&&Ft(i,t,67108864),Ou(t,67108864)}}function Sh(t){if(t.tag===13||t.tag===31){var i=Wt();i=ye(i);var l=Di(t,i);l!==null&&Ft(l,t,i),Ou(t,i)}}var ar=!0;function jv(t,i,l,a){var d=G.T;G.T=null;var y=se.p;try{se.p=2,Fu(t,i,l,a)}finally{se.p=y,G.T=d}}function ex(t,i,l,a){var d=G.T;G.T=null;var y=se.p;try{se.p=8,Fu(t,i,l,a)}finally{se.p=y,G.T=d}}function Fu(t,i,l,a){if(ar){var d=$u(a);if(d===null)Iu(t,i,a,ur,l),_h(t,a);else if(nx(d,t,i,l,a))a.stopPropagation();else if(_h(t,a),i&4&&-1<tx.indexOf(t)){for(;d!==null;){var y=ji(d);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var C=In(y.pendingLanes);if(C!==0){var _=y;for(_.pendingLanes|=2,_.entangledLanes|=2;C;){var R=1<<31-Nt(C);_.entanglements[1]|=R,C&=~R}Mn(y),(Fe&6)===0&&($s=wt()+500,wl(0))}}break;case 31:case 13:_=Di(y,2),_!==null&&Ft(_,y,2),Js(),Ou(y,2)}if(y=$u(a),y===null&&Iu(t,i,a,ur,l),y===d)break;d=y}d!==null&&a.stopPropagation()}else Iu(t,i,a,null,l)}}function $u(t){return t=Jr(t),Yu(t)}var ur=null;function Yu(t){if(ur=null,t=Wi(t),t!==null){var i=u(t);if(i===null)t=null;else{var l=i.tag;if(l===13){if(t=f(i),t!==null)return t;t=null}else if(l===31){if(t=h(i),t!==null)return t;t=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return ur=t,null}function Eh(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pr()){case ts:return 2;case ns:return 8;case Ji:case Lr:return 32;case Ai:return 268435456;default:return 32}default:return 32}}var Ju=!1,gi=null,yi=null,vi=null,Bl=new Map,ql=new Map,xi=[],tx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _h(t,i){switch(t){case"focusin":case"focusout":gi=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":vi=null;break;case"pointerover":case"pointerout":Bl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ql.delete(i.pointerId)}}function zl(t,i,l,a,d,y){return t===null||t.nativeEvent!==y?(t={blockedOn:i,domEventName:l,eventSystemFlags:a,nativeEvent:y,targetContainers:[d]},i!==null&&(i=ji(i),i!==null&&Ch(i)),t):(t.eventSystemFlags|=a,i=t.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),t)}function nx(t,i,l,a,d){switch(i){case"focusin":return gi=zl(gi,t,i,l,a,d),!0;case"dragenter":return yi=zl(yi,t,i,l,a,d),!0;case"mouseover":return vi=zl(vi,t,i,l,a,d),!0;case"pointerover":var y=d.pointerId;return Bl.set(y,zl(Bl.get(y)||null,t,i,l,a,d)),!0;case"gotpointercapture":return y=d.pointerId,ql.set(y,zl(ql.get(y)||null,t,i,l,a,d)),!0}return!1}function Ah(t){var i=Wi(t.target);if(i!==null){var l=u(i);if(l!==null){if(i=l.tag,i===13){if(i=f(l),i!==null){t.blockedOn=i,xt(t.priority,function(){Sh(l)});return}}else if(i===31){if(i=h(l),i!==null){t.blockedOn=i,xt(t.priority,function(){Sh(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cr(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var l=$u(t.nativeEvent);if(l===null){l=t.nativeEvent;var a=new l.constructor(l.type,l);Yr=a,l.target.dispatchEvent(a),Yr=null}else return i=ji(l),i!==null&&Ch(i),t.blockedOn=l,!1;i.shift()}return!0}function bh(t,i,l){cr(t)&&l.delete(i)}function ix(){Ju=!1,gi!==null&&cr(gi)&&(gi=null),yi!==null&&cr(yi)&&(yi=null),vi!==null&&cr(vi)&&(vi=null),Bl.forEach(bh),ql.forEach(bh)}function fr(t,i){t.blockedOn===i&&(t.blockedOn=null,Ju||(Ju=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ix)))}var dr=null;function Mh(t){dr!==t&&(dr=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){dr===t&&(dr=null);for(var i=0;i<t.length;i+=3){var l=t[i],a=t[i+1],d=t[i+2];if(typeof a!="function"){if(Yu(a||l)===null)continue;break}var y=ji(l);y!==null&&(t.splice(i,3),i-=3,$a(y,{pending:!0,data:d,method:l.method,action:a},a,d))}}))}function Po(t){function i(R){return fr(R,t)}gi!==null&&fr(gi,t),yi!==null&&fr(yi,t),vi!==null&&fr(vi,t),Bl.forEach(i),ql.forEach(i);for(var l=0;l<xi.length;l++){var a=xi[l];a.blockedOn===t&&(a.blockedOn=null)}for(;0<xi.length&&(l=xi[0],l.blockedOn===null);)Ah(l),l.blockedOn===null&&xi.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(a=0;a<l.length;a+=3){var d=l[a],y=l[a+1],C=d[Ht]||null;if(typeof y=="function")C||Mh(l);else if(C){var _=null;if(y&&y.hasAttribute("formAction")){if(d=y,C=y[Ht]||null)_=C.formAction;else if(Yu(d)!==null)continue}else _=C.action;typeof _=="function"?l[a+1]=_:(l.splice(a,3),a-=3),Mh(l)}}}function Nh(){function t(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(C){return d=C})},focusReset:"manual",scroll:"manual"})}function i(){d!==null&&(d(),d=null),a||setTimeout(l,20)}function l(){if(!a&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){a=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),d!==null&&(d(),d=null)}}}function Ku(t){this._internalRoot=t}pr.prototype.render=Ku.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,a=Wt();xh(l,a,t,i,null,null)},pr.prototype.unmount=Ku.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;xh(t.current,2,null,t,null,null),Js(),i[Zi]=null}};function pr(t){this._internalRoot=t}pr.prototype.unstable_scheduleHydration=function(t){if(t){var i=nn();t={blockedOn:null,target:t,priority:i};for(var l=0;l<xi.length&&i!==0&&i<xi[l].priority;l++);xi.splice(l,0,t),l===0&&Ah(t)}};var Rh=n.version;if(Rh!=="19.2.0")throw Error(s(527,Rh,"19.2.0"));se.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=m(i),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var ox={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hr.isDisabled&&hr.supportsFiber)try{bi=hr.inject(ox),kt=hr}catch{}}return Ol.createRoot=function(t,i){if(!r(t))throw Error(s(299));var l=!1,a="",d=Ld,y=Gd,C=Hd;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(C=i.onRecoverableError)),i=yh(t,1,!1,null,null,l,a,null,d,y,C,Nh),t[Zi]=i.current,Ru(t),new Ku(i)},Ol.hydrateRoot=function(t,i,l){if(!r(t))throw Error(s(299));var a=!1,d="",y=Ld,C=Gd,_=Hd,R=null;return l!=null&&(l.unstable_strictMode===!0&&(a=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(_=l.onRecoverableError),l.formState!==void 0&&(R=l.formState)),i=yh(t,1,!0,i,l??null,a,d,R,y,C,_,Nh),i.context=vh(null),l=i.current,a=Wt(),a=ye(a),d=oi(a),d.callback=null,li(l,d,a),l=a,i.current.lanes=l,fe(i,l),Mn(i),t[Zi]=i.current,Ru(t),new pr(i)},Ol.version="19.2.0",Ol}var Bh;function mx(){if(Bh)return Zu.exports;Bh=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Zu.exports=hx(),Zu.exports}var gx=mx();const yx=bg(gx);var nt=(e=>(e[e.Silver=0]="Silver",e[e.Gold=1]="Gold",e[e.Unk=-1]="Unk",e))(nt||{}),jt=(e=>(e[e.None=0]="None",e[e.Vertical=1]="Vertical",e[e.Horizontal=2]="Horizontal",e))(jt||{}),Rn=(e=>(e.Classic="Classic",e.Winter="Winter",e.Spooky="Spooky",e))(Rn||{}),Pt=(e=>(e[e.LightGreen=0]="LightGreen",e[e.Blue=1]="Blue",e[e.Red=2]="Red",e[e.LightBlue=3]="LightBlue",e[e.Indigo=4]="Indigo",e[e.Violet=5]="Violet",e[e.Yellow=6]="Yellow",e[e.Orange=7]="Orange",e[e.Brown=8]="Brown",e[e.DarkGreen=9]="DarkGreen",e[e.DarkBlue=10]="DarkBlue",e[e.Cyan=11]="Cyan",e[e.Purple=12]="Purple",e[e.DarkMarine=13]="DarkMarine",e[e.MossGreen=14]="MossGreen",e[e.Burgundy=15]="Burgundy",e[e.DarkViolet=16]="DarkViolet",e[e.LandRed=17]="LandRed",e[e.GreyBlue=18]="GreyBlue",e[e.GreyCyan=19]="GreyCyan",e[e.Pink=20]="Pink",e[e.Unk=-1]="Unk",e[e.Hidden=99]="Hidden",e))(Pt||{});const xn={0:"#89B53A",1:"#0088CC",2:"#D3362D",3:"#35A3D8",4:"#4B0082",5:"#9F44D3",6:"#EAC22D",7:"#F07F2D",8:"#A0522D",9:"#008233",10:"#0050D3",11:"#00A398",12:"#D33ED3",15:"#A32D50",16:"#502DA3",17:"#A33F2D",20:"#D33E7F",13:"#0F5389",14:"#89A32D",18:"#9FA3B5",19:"#2D8989",[-1]:"#6B7280",99:"#303030"},vx=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],mr=[11,6,20,12,7],qh=["text-lime-400","text-red-500","text-sky-400","text-violet-500","text-yellow-400","text-orange-500","text-green-600","text-blue-600","text-cyan-400","text-fuchsia-500","text-blue-800","text-lime-600","text-rose-700","text-indigo-600","text-red-700","text-slate-400","text-teal-600","text-pink-500"],Nr=e=>e<=0?"text-gray-200":qh[(e-1)%qh.length],xx=(e,n=1)=>{if(e.length<7)return`rgba(128, 128, 128, ${n})`;const o=parseInt(e.slice(1,3),16),s=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return`rgba(${o}, ${s}, ${r}, ${n})`},vr=(e,n)=>{if(!e||e.length<7)return"#808080";let o=parseInt(e.slice(1,3),16),s=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);const u=Math.floor(255*(n/100));o=Math.max(0,o-u),s=Math.max(0,s-u),r=Math.max(0,r-u);const f=h=>h.toString(16).padStart(2,"0");return`#${f(o)}${f(s)}${f(r)}`},Tx=({headX:e,headY:n,headRadius:o})=>S.jsxs("g",{children:[S.jsx("path",{d:`M ${e-o*.8},${n+o*.5} C ${e-o*.5},${n+o*1.2} ${e+o*.5},${n+o*1.2} ${e+o*.8},${n+o*.5}`,fill:"none",stroke:"#D3362D",strokeWidth:o*.4,strokeLinecap:"round"}),S.jsx("path",{d:`M ${e-o*.6},${n+o*.5} C ${e-o*.4},${n+o*1} ${e+o*.4},${n+o*1} ${e+o*.6},${n+o*.5}`,fill:"none",stroke:"#FFFFFF",strokeWidth:o*.15,strokeLinecap:"round"})]}),Cx=({pet:e,mode:n,gridHeight:o,tileSize:s,theme:r,isDimmed:u,isBeingDragged:f,visualOffset:h,onPetMouseDown:g})=>{var Ie,Ae,Cn,Sn,en,tn;if(!e.positions||e.positions.length===0||!e.headPos)return null;const m=e.special,v=m.hiddenCount>0,x=()=>{if(v)return{mainColor:xn[Pt.Hidden],layer1Color:null,layer2Color:null};const He=[e.color,...e.special.layerColors||[]],lt=Qe=>Qe==null?null:xn[Qe]||null,rt=lt(He[0])||xn[Pt.Unk],St=lt(He[1]),mn=lt(He[2]);return{mainColor:rt,layer1Color:St,layer2Color:mn}},{mainColor:T,layer1Color:E,layer2Color:b}=x(),A=s*.75,q=s*.5,w=s*.25,M=s*.45,k=e.positions.map(He=>{const lt=He.x*s+s/2,rt=(o-1-He.y)*s+s/2;return`${lt},${rt}`}).join(" "),P=e.headPos,N=P.x*s+s/2,$=(o-1-P.y)*s+s/2,oe=ae.useMemo(()=>{if(e.positions.length===0)return null;const He=e.positions[e.positions.length-1],lt=He.x*s+s/2,rt=(o-1-He.y)*s+s/2;if(e.positions.length<2)return{tailX:lt,tailY:rt,angle:0,hasVisual:!1};const St=e.positions[e.positions.length-2],mn=St.x*s+s/2,Qe=(o-1-St.y)*s+s/2,Zn=Math.atan2(rt-Qe,lt-mn)*180/Math.PI;return{tailX:lt,tailY:rt,angle:Zn,hasVisual:!0}},[e.positions,s,o]),ce=(oe==null?void 0:oe.tailX)??N,Y=(oe==null?void 0:oe.tailY)??$,de=((Ie=m.keyLock)==null?void 0:Ie.lockColor)!==nt.Unk&&((Ae=m.keyLock)==null?void 0:Ae.lockColor)!==void 0,Ee=m.iceCount>0,O=(m.count??0)>0,Ce=!de&&!Ee,Oe=n==="edit",Le=!v&&m.keyLock&&m.keyLock.keyColor!==nt.Unk,G=!v&&m.keyLock&&m.keyLock.lockColor!==nt.Unk,se=!v&&(m.timeExplode??0)>0,pe=e.positions.length>1,ke=pe?e.positions[1]:P,Ge=ke.x*s+s/2,I=(o-1-ke.y)*s+s/2,j=Oe?"default":Ce?"pointer":"not-allowed",re=Oe?"default":Ce&&!m.isSingleDirection?"pointer":"not-allowed",ue=r===Rn.Spooky,L=[{color:T,width:A,radius:M},{color:E,width:q,radius:M*(q/A)},{color:b,width:w,radius:M*(w/A)}].filter(He=>He.color),X=!!h,K=!!f,ve={opacity:u&&!X?.4:1,transition:"opacity 0.2s ease-in-out, transform 0.1s ease-out",transform:X?"scale(1.1)":"none",filter:X||K?"drop-shadow(0 4px 6px rgba(0,0,0,0.4))":"none",zIndex:X||K?50:10},_e=h?`translate(${h.x}, ${h.y})`:void 0;return S.jsxs("g",{style:ve,transform:_e,children:[e.positions.length>0&&L.map((He,lt)=>S.jsx("polyline",{points:k,fill:"none",stroke:He.color,strokeWidth:He.width,strokeLinecap:"round",strokeLinejoin:"round",style:{pointerEvents:"none",transition:"stroke 0.3s ease-in-out"}},`body-layer-${lt}`)),(oe==null?void 0:oe.hasVisual)&&T&&S.jsx("path",{d:`M 0 -${A/2} L ${A*.7} 0 L 0 ${A/2} Z`,fill:T,transform:`translate(${oe.tailX}, ${oe.tailY}) rotate(${oe.angle})`,style:{pointerEvents:"none",transition:"fill 0.3s ease-in-out"}}),S.jsxs("g",{style:{cursor:j,pointerEvents:g?"auto":"none"},onMouseDown:He=>{if(g)try{g(e.headPos,He)}catch{}},children:[L.map((He,lt)=>S.jsx("circle",{cx:N,cy:$,r:He.radius,fill:He.color,style:{transition:"fill 0.3s ease-in-out"}},`head-layer-${lt}`)),v?S.jsxs(S.Fragment,{children:[S.jsx("circle",{cx:N-M*.35,cy:$-M*.3,r:M*.15,fill:"white"}),S.jsx("circle",{cx:N+M*.35,cy:$-M*.3,r:M*.15,fill:"white"})]}):S.jsxs(S.Fragment,{children:[S.jsx("circle",{cx:N-M*.35,cy:$-M*.3,r:M*.2,fill:ue?"#facc15":"white"}),S.jsx("circle",{cx:N+M*.35,cy:$-M*.3,r:M*.2,fill:ue?"#facc15":"white"}),S.jsx("circle",{cx:N-M*.3,cy:$-M*.35,r:M*.1,fill:ue?"#dc2626":"black"}),S.jsx("circle",{cx:N+M*.4,cy:$-M*.35,r:M*.1,fill:ue?"#dc2626":"black"}),S.jsx("circle",{cx:N-M*.2,cy:$-M*.6,r:M*.05,fill:ue?"#b91c1c":"black"}),S.jsx("circle",{cx:N+M*.2,cy:$-M*.6,r:M*.05,fill:ue?"#b91c1c":"black"})]}),r===Rn.Winter&&S.jsx(Tx,{headX:N,headY:$,headRadius:M})]}),!v&&e.editorName&&S.jsx("foreignObject",{x:N-M,y:$-M,width:M*2,height:M*2,style:{pointerEvents:"none"},children:S.jsx("div",{className:"w-full h-full flex items-center justify-center text-white font-bold",style:{fontSize:`${M*.85}px`,textShadow:"0 0 4px black, 0 0 4px black",lineHeight:1},children:e.editorName})}),v&&e.positions.length>1&&(()=>{const He=e.positions[e.positions.length-1],lt=He.x*s+s/2,rt=(o-1-He.y)*s+s/2;return S.jsx("foreignObject",{x:lt-s/2,y:rt-s/2,width:s,height:s,style:{pointerEvents:"none"},children:S.jsx("div",{className:"w-full h-full flex items-center justify-center text-white font-bold",style:{fontSize:`${s*.5}px`,textShadow:"0px 0px 3px black, 0px 0px 3px black"},children:m.hiddenCount})},`hidden-count-${e.id}`)})(),e.positions.length>1&&S.jsx("circle",{cx:ce,cy:Y,r:M,fill:"transparent",style:{cursor:re,pointerEvents:g?"auto":"none"},onMouseDown:He=>{if(g){const lt=e.positions[e.positions.length-1];try{g(lt,He)}catch{}}}}),!v&&m.hasScissor&&S.jsx("foreignObject",{x:Ge-M,y:I-M,width:M*2,height:M*2,style:{pointerEvents:"none",overflow:"visible"},children:S.jsx("div",{className:`w-full h-full flex justify-center ${pe?"items-center":"items-end pb-1"}`,style:{fontSize:`${M*.8}px`,textShadow:"0px 0px 5px black"},children:S.jsx("div",{className:"flex items-center justify-center bg-black/40 rounded-full p-1 text-white font-bold",children:S.jsx("span",{children:""})})})}),!v&&S.jsxs(S.Fragment,{children:[(m.isSingleDirection||Le||se)&&S.jsx("foreignObject",{x:N-M,y:$-M,width:M*2,height:M*2,style:{pointerEvents:"none",overflow:"visible"},children:S.jsx("div",{className:"w-full h-full flex items-start justify-center pt-1",style:{fontSize:`${M*.7}px`,textShadow:"0px 0px 5px black, 0px 0px 5px black"},children:S.jsxs("div",{className:"flex items-center justify-center gap-1 bg-black/40 rounded-full px-2 py-1 text-white font-bold",children:[m.isSingleDirection&&S.jsx("span",{children:""}),Le&&((Cn=m.keyLock)==null?void 0:Cn.keyColor)===nt.Gold&&S.jsx("span",{children:""}),Le&&((Sn=m.keyLock)==null?void 0:Sn.keyColor)===nt.Silver&&S.jsx("span",{style:{filter:"grayscale(1) brightness(1.5)"},children:""}),se&&S.jsx("span",{children:""})]})})}),(Ee||G||O)&&e.positions.length>0&&S.jsx("foreignObject",{x:ce-M,y:Y-M,width:M*2,height:M*2,style:{pointerEvents:"none",overflow:"visible"},children:S.jsx("div",{className:"w-full h-full flex items-end justify-center pb-1",style:{fontSize:`${M*.7}px`,textShadow:"0px 0px 5px black, 0px 0px 5px black"},children:S.jsxs("div",{className:"flex items-center justify-center gap-1 bg-black/40 rounded-full px-2 py-1 text-white font-bold",children:[O&&S.jsx("span",{className:`font-bold tabular-nums ${Nr(m.count??0)}`,children:m.count}),Ee&&S.jsxs("span",{children:["",S.jsx("span",{className:"tabular-nums -ml-1 font-bold",children:m.iceCount})]}),G&&((en=m.keyLock)==null?void 0:en.lockColor)===nt.Gold&&S.jsx("span",{children:""}),G&&((tn=m.keyLock)==null?void 0:tn.lockColor)===nt.Silver&&S.jsx("span",{style:{filter:"grayscale(1) brightness(1.5)"},children:""})]})})})]})]})},Mg="#6B7280",Sx=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M 50,0 A 50,50 0 0,1 100,50 L 50,50 Z' fill='%2316a34a' opacity='0.6'/%3E%3Cpath d='M 50,0 A 50,50 0 0,0 0,50 L 50,50 Z' fill='%2315803d' opacity='0.6'/%3E%3Cpath d='M 50,100 A 50,50 0 0,1 0,50 L 50,50 Z' fill='%2316a34a' opacity='0.6'/%3E%3Cpath d='M 50,100 A 50,50 0 0,0 100,50 L 50,50 Z' fill='%2315803d' opacity='0.6'/%3E%3Cpath d='M 20 80 Q 50 50 80 20' stroke='%2314532d' stroke-width='5' fill='none' stroke-linecap='round'/%3E%3Cpath d='M 20 20 Q 50 50 80 80' stroke='%2314532d' stroke-width='5' fill='none' stroke-linecap='round'/%3E%3Ccircle cx='50' cy='50' r='10' fill='%23166534'/%3E%3C/svg%3E")`,Ex=({exit:e,height:n,theme:o,isDimmed:s,visualOffset:r})=>{const{position:u,color:f,special:h}=e,{layerColors:g,iceCount:m,count:v,isPermanent:x}=h,T=o===Rn.Spooky,E=T?"#9F44D3":xn[f]||"#9CA3AF",b=(g==null?void 0:g[0])!==void 0?xn[g[0]]:null,A=(g==null?void 0:g[1])!==void 0?xn[g[1]]:null,q=m>0,w=v>0,M={position:"absolute",borderRadius:"50%",animation:"spin 4s linear infinite",transition:"opacity 0.3s ease-in-out"},k={...M,width:"100%",height:"100%",background:T?"radial-gradient(circle, #a855f7 10%, #4c1d95 40%, black 70%)":`radial-gradient(circle, ${E} 20%, transparent 70%), radial-gradient(circle, black 40%, ${E} 75%)`},P={...M,width:"70%",height:"70%",background:`radial-gradient(circle, ${b} 20%, transparent 70%), radial-gradient(circle, black 40%, ${b} 75%)`,animationName:"spin-reverse",animationDuration:"3.5s"},N={...M,width:"40%",height:"40%",background:`radial-gradient(circle, ${A} 20%, transparent 70%), radial-gradient(circle, black 40%, ${A} 75%)`,animationDuration:"3s"},$={gridColumn:u.x+1,gridRow:n-u.y,zIndex:r?50:5,pointerEvents:"none",transform:r?`translate(${r.x}px, ${r.y}px) scale(1.1)`:"none",filter:r?"drop-shadow(0 5px 8px rgba(0,0,0,0.5))":"none"};return S.jsxs("div",{style:$,className:`w-full h-full flex items-center justify-center p-1 relative transition-opacity ${s&&!r?"opacity-40":""}`,children:[S.jsx("style",{children:`
            @keyframes spin {
              from { transform: rotate(0deg); }
              to { transform: rotate(360deg); }
            }
            @keyframes spin-reverse {
              from { transform: rotate(360deg); }
              to { transform: rotate(0deg); }
            }
          `}),x&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"absolute inset-0 rounded-full",style:{border:"4px solid #FBBF24",boxShadow:"0 0 8px #FBBF24, inset 0 0 8px #FBBF24",zIndex:1}}),S.jsx("div",{className:"absolute -top-1 w-full text-center text-2xl font-bold text-yellow-300 pointer-events-none",style:{textShadow:"0 0 6px black, 0 0 6px black",zIndex:2},"aria-label":"Permanent Exit",children:""})]}),S.jsx("div",{style:k}),b&&S.jsx("div",{style:P}),A&&S.jsx("div",{style:N}),(w||q)&&S.jsxs("div",{className:"absolute flex items-center justify-center gap-2",style:{textShadow:"0 0 5px black, 0 0 5px black"},children:[w&&S.jsx("span",{className:`font-bold text-2xl ${Nr(v)}`,children:v}),q&&S.jsxs("span",{className:"text-white text-2xl flex items-center",children:["",S.jsx("span",{className:"text-lg tabular-nums -ml-1 font-bold",children:m})]})]})]})},_x=({stone:e,height:n,theme:o,isDimmed:s,visualOffset:r})=>{const u={gridColumn:e.position.x+1,gridRow:n-e.position.y,zIndex:r?50:6,pointerEvents:"none",transform:r?`translate(${r.x}px, ${r.y}px) scale(1.1)`:"none",filter:r?"drop-shadow(0 5px 8px rgba(0,0,0,0.5))":"none"},f=e.iceCount>0,h=o===Rn.Winter,g=o===Rn.Spooky,m=g?"bg-gray-800":"bg-gray-600",v=g?"border-gray-700":"border-gray-500",T={...u,backgroundImage:g?"none":`url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h10v10H0V0zm10 10h10v10H10V10z' fill='%234a5568' fill-opacity='0.4' fill-rule='evenodd'/%3E%3C/svg%3E")`};return S.jsxs("div",{style:T,className:`w-full h-full flex items-center justify-center p-1 ${m} border-2 ${v} rounded-md relative transition-opacity ${s&&!r?"opacity-40":""}`,children:[h&&S.jsx("div",{className:"absolute top-0 left-[-2px] right-[-2px] h-1/2 bg-white rounded-t-md",style:{borderBottom:"2px solid #e5e7eb"}}),g&&S.jsx("div",{className:"absolute inset-0 bg-purple-900/20 rounded-md border-2 border-purple-700/50"}),f&&S.jsx("div",{className:"absolute inset-0 bg-blue-300/60 border-2 border-blue-200/80 rounded-md"}),S.jsxs("div",{className:"relative flex items-center justify-center gap-1",children:[S.jsx("span",{className:`font-bold text-2xl drop-shadow-[0_1.2px_1.2px_rgba(0,0,0,0.9)] ${Nr(e.count)}`,children:e.count}),f&&S.jsxs("span",{className:"text-xl flex items-center text-white",style:{textShadow:"0 0 5px black"},children:["",S.jsx("span",{className:"text-base tabular-nums -ml-1 font-bold",children:e.iceCount})]})]})]})},Ax=({path:e,height:n,isDimmed:o,visualOffset:s})=>{const r={gridColumn:e.position.x+1,gridRow:n-e.position.y,zIndex:s?50:2,pointerEvents:"none",transform:s?`translate(${s.x}px, ${s.y}px) scale(1.1)`:"none",filter:s?"drop-shadow(0 5px 8px rgba(0,0,0,0.5))":"none"},u=xn[e.color]||Mg,f=xx(u,.3);return S.jsx("div",{style:r,className:`w-full h-full p-2 transition-opacity ${o&&!s?"opacity-40":""}`,children:S.jsx("div",{style:{backgroundColor:f,width:"100%",height:"100%",borderRadius:"9999px"}})})},bx=({wall:e,height:n,isDimmed:o,isDisappearing:s,visualOffset:r})=>{const u={gridColumn:e.position.x+1,gridRow:n-e.position.y,zIndex:r?50:3,pointerEvents:"none",transform:r?`translate(${r.x}px, ${r.y}px) scale(1.1)`:"none",filter:r?"drop-shadow(0 5px 8px rgba(0,0,0,0.5))":"none"},f=xn[e.color]||Mg,h=vr(f,20);return S.jsx("div",{style:u,className:`w-full h-full p-1 transition-opacity ${o&&!r?"opacity-40":""} ${s?"scale-out":""}`,children:S.jsx("div",{style:{backgroundColor:f,borderColor:h,borderWidth:"2px",borderRadius:"0.375rem"},className:"w-full h-full"})})},Ng=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Cg fill='%23854d0e' fill-opacity='0.4'%3E%3Cpath d='M0 0h80v2H0zM0 4h80v2H0zM0 8h80v2H0zM0 12h80v2H0zM0 16h80v2H0zM0 20h80v2H0zM0 24h80v2H0zM0 28h80v2H0zM0 32h80v2H0zM0 36h80v2H0zM0 40h80v2H0zM0 44h80v2H0zM0 48h80v2H0zM0 52h80v2H0zM0 56h80v2H0zM0 60h80v2H0zM0 64h80v2H0zM0 68h80v2H0zM0 72h80v2H0zM0 76h80v2H0z'/%3E%3Cpath d='M0 0h2v80H0zM4 0h2v80H4zM8 0h2v80H8zM12 0h2v80H12zM16 0h2v80H16zM20 0h2v80H20zM24 0h2v80H24zM28 0h2v80H28zM32 0h2v80H32zM36 0h2v80H36zM40 0h2v80H40zM44 0h2v80H44zM48 0h2v80H48zM52 0h2v80H52zM56 0h2v80H56zM60 0h2v80H60zM64 0h2v80H64zM68 0h2v80H68zM72 0h2v80H72zM76 0h2v80H76z'/%3E%3C/g%3E%3C/svg%3E")`,Mx=({crate:e,height:n,isDimmed:o,visualOffset:s})=>{const{listPositions:r,requiredSnake:u}=e;if(!r||r.length===0)return null;const f=new Set(r.map(m=>`${m.x},${m.y}`)),h=(m,v)=>f.has(`${m},${v}`),g=r.reduce((m,v)=>v.y>m.y||v.y===m.y&&v.x<m.x?v:m,r[0]);return S.jsx(S.Fragment,{children:r.map((m,v)=>{const x=m.x===g.x&&m.y===g.y,T={gridColumn:m.x+1,gridRow:n-m.y,zIndex:s?50:11,pointerEvents:"none",backgroundColor:"#a16207",backgroundImage:Ng,border:"2px solid #522c06",borderTopWidth:h(m.x,m.y+1)?0:"2px",borderBottomWidth:h(m.x,m.y-1)?0:"2px",borderLeftWidth:h(m.x-1,m.y)?0:"2px",borderRightWidth:h(m.x+1,m.y)?0:"2px",boxSizing:"border-box",transform:s?`translate(${s.x}px, ${s.y}px) scale(1.1)`:"none",filter:s?"drop-shadow(0 5px 8px rgba(0,0,0,0.5))":"none"};return S.jsx("div",{style:T,className:`w-full h-full flex items-center justify-center transition-opacity ${o&&!s?"opacity-40":""}`,children:x&&u>0&&S.jsx("span",{className:`font-bold text-xl drop-shadow-[0_1.2px_1.2px_rgba(0,0,0,0.9)] ${Nr(u)}`,children:u})},`crate-${e.id}-${v}`)})})},Nx=({ribbon:e,height:n,isDimmed:o})=>S.jsx(S.Fragment,{children:e.listPositions.map((s,r)=>S.jsx("div",{style:{gridColumn:s.x+1,gridRow:n-s.y,zIndex:4,pointerEvents:"none"},className:`w-full h-full flex items-center justify-center p-2 transition-opacity ${o?"opacity-40":""}`,children:S.jsx("div",{className:"w-full h-full bg-pink-400/50 border border-pink-500 rounded-full"})},`ribbon-${r}`))}),Rx=({pos:e,height:n,isDimmed:o})=>{const s={gridColumn:e.x+1,gridRow:n-e.y,zIndex:9,pointerEvents:"none"};return S.jsxs("div",{style:s,className:`w-full h-full flex items-center justify-center p-[2px] relative transition-opacity ${o?"opacity-40":""}`,children:[S.jsx("div",{className:"w-full h-full bg-green-800/20 border-2 border-green-600/50 rounded-md"}),S.jsx("div",{className:"absolute inset-0 bg-contain bg-center bg-no-repeat rounded-md",style:{backgroundImage:Sx,transform:"scale(1.1)",opacity:.7}})]})},Ix=({box:e,height:n,mode:o,isDimmed:s,visualOffset:r})=>{const{listPositions:u,direction:f}=e;if(!u||u.length===0)return null;const h=new Set(u.map(x=>`${x.x},${x.y}`)),g=(x,T)=>h.has(`${x},${T}`),m=u.reduce((x,T)=>T.y>x.y||T.y===x.y&&T.x<x.x?T:x,u[0]),v=()=>{const x={fontSize:"1rem",lineHeight:1,color:"black",position:"absolute"},T={transform:"rotate(-45deg)",width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"};switch(f){case jt.Vertical:return S.jsxs("div",{style:T,children:[S.jsx("div",{style:{...x,top:"1px"},children:""}),S.jsx("div",{style:{...x,bottom:"1px"},children:""})]});case jt.Horizontal:return S.jsxs("div",{style:T,children:[S.jsx("div",{style:{...x,left:"1px"},children:""}),S.jsx("div",{style:{...x,right:"1px"},children:""})]});case jt.None:return S.jsxs("div",{style:T,children:[S.jsx("div",{style:{...x,top:"1px"},children:""}),S.jsx("div",{style:{...x,bottom:"1px"},children:""}),S.jsx("div",{style:{...x,left:"1px"},children:""}),S.jsx("div",{style:{...x,right:"1px"},children:""})]});default:return null}};return S.jsx(S.Fragment,{children:u.map((x,T)=>{const E=o==="play",b=x.x===m.x&&x.y===m.y,A={gridColumn:x.x+1,gridRow:n-x.y,zIndex:r?50:11,pointerEvents:"auto",cursor:E?"grab":"default",backgroundColor:"#a16207",backgroundImage:Ng,border:"2px solid #522c06",borderTopWidth:g(x.x,x.y+1)?0:"2px",borderBottomWidth:g(x.x,x.y-1)?0:"2px",borderLeftWidth:g(x.x-1,x.y)?0:"2px",borderRightWidth:g(x.x+1,x.y)?0:"2px",boxSizing:"border-box",transform:r?`translate(${r.x}px, ${r.y}px) scale(1.1)`:"none",filter:r?"drop-shadow(0 5px 8px rgba(0,0,0,0.5))":"none"},q={width:"60%",height:"60%",backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",transform:"rotate(45deg)",fontFamily:"sans-serif"};return S.jsx("div",{style:A,className:`w-full h-full flex items-center justify-center transition-opacity ${s&&!r?"opacity-40":""}`,children:b&&S.jsx("div",{style:q,children:v()})},`mbox-${e.id}-${T}`)})})},Dx=({obstacle:e,height:n,isDimmed:o,visualOffset:s})=>{const{listPositions:r}=e;if(!r||r.length===0)return null;const u=new Set(r.map(h=>`${h.x},${h.y}`)),f=(h,g)=>u.has(`${h},${g}`);return S.jsx(S.Fragment,{children:r.map((h,g)=>{const m={gridColumn:h.x+1,gridRow:n-h.y,zIndex:s?50:6,pointerEvents:"none",transform:s?`translate(${s.x}px, ${s.y}px) scale(1.1)`:"none",filter:s?"drop-shadow(0 5px 8px rgba(0,0,0,0.5))":"none"},v=f(h.x,h.y+1),x=f(h.x,h.y-1),T=f(h.x-1,h.y),E=f(h.x+1,h.y);return S.jsxs("div",{style:m,className:`w-full h-full relative transition-opacity ${o&&!s?"opacity-40":""}`,children:[S.jsx("div",{className:"absolute w-1/2 h-1/2 top-1/4 left-1/4 bg-gray-500 rounded-sm"}),v&&S.jsx("div",{className:"absolute w-1/2 h-1/2 top-0 left-1/4 bg-gray-500"}),x&&S.jsx("div",{className:"absolute w-1/2 h-1/2 bottom-0 left-1/4 bg-gray-500"}),T&&S.jsx("div",{className:"absolute w-1/2 h-1/2 top-1/4 left-0 bg-gray-500"}),E&&S.jsx("div",{className:"absolute w-1/2 h-1/2 top-1/4 right-0 bg-gray-500"})]},`obstacle-${e.id}-${g}`)})})},wx=({root:e,height:n,isDimmed:o,visualOffset:s})=>{const r=[];for(let f=0;f<=e.length;f++)r.push({x:e.position.x+f*e.direction.x,y:e.position.y+f*e.direction.y});const u=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%236b462a' /%3E%3Cpath d='M20 0 V100 M80 0 V100' stroke='%234a2e1a' stroke-width='8' /%3E%3Cpath d='M10 20 Q50 30 90 40 M10 60 Q50 70 90 80' stroke='%234a2e1a' stroke-width='5' fill='none' /%3E%3C/svg%3E")`;return S.jsx(S.Fragment,{children:r.map((f,h)=>{const g=h===0,m={gridColumn:f.x+1,gridRow:n-f.y,zIndex:s?50:6,pointerEvents:"none",backgroundImage:u,backgroundSize:"cover",transform:s?`translate(${s.x}px, ${s.y}px) scale(1.1)`:"none",filter:s?"drop-shadow(0 5px 8px rgba(0,0,0,0.5))":"none"};return S.jsx("div",{style:m,className:`w-full h-full p-1 relative transition-opacity ${o&&!s?"opacity-40":""}`,children:S.jsx("div",{className:`absolute inset-0 border-2 ${g?"border-amber-900":"border-amber-950/50"}`})},`root-${e.id}-${h}`)})})},kx=({x:e,y:n,gridWidth:o,gridHeight:s,isWall:r,isSelected:u,onMouseDown:f})=>{const h={gridColumn:e+1,gridRow:s-n,zIndex:1},g=`
    border border-black/20 box-border
    ${r?"bg-black cursor-not-allowed":"bg-gray-800 transition-colors hover:bg-gray-700"}
    ${u?"!bg-teal-500/40 border-teal-400":""}
  `;return S.jsx("div",{onMouseDown:f,className:g,style:h})};class Ux{constructor(){this.heap=[]}enqueue(n){this.heap.push(n),this.bubbleUp(this.heap.length-1)}dequeue(){if(this.isEmpty())return;this.swap(0,this.heap.length-1);const n=this.heap.pop();return this.isEmpty()||this.sinkDown(0),n}isEmpty(){return this.heap.length===0}bubbleUp(n){let o=n;for(;o>0;){const s=Math.floor((o-1)/2);if(this.heap[o].f<this.heap[s].f)this.swap(o,s),o=s;else break}}sinkDown(n){let o=n;const s=this.heap.length-1;for(;;){let r=o;const u=2*o+1,f=2*o+2;if(u<=s&&this.heap[u].f<this.heap[r].f&&(r=u),f<=s&&this.heap[f].f<this.heap[r].f&&(r=f),r!==o)this.swap(o,r),o=r;else break}}swap(n,o){[this.heap[n],this.heap[o]]=[this.heap[o],this.heap[n]]}}const Rg=(e,n)=>({level:1,time:120,isHardLevel:!1,levelName:"Level_1",levelDifficulty:0,gridData:{width:e,height:n,strGrid:Array.from({length:n},()=>Array(e).fill("1").join(","))},pets:[],exits:[],solution:[],stoneWalls:[],coloredPaths:[],colorWalls:[],crateInfos:[],ribbonInfo:{listPositions:[]},movableBoxes:[],obstacleInfos:[],treeRoots:[],theme:Rn.Classic}),Yo=e=>{const n=[];for(let o=0;o<=e.length;o++)n.push({x:e.position.x+o*e.direction.x,y:e.position.y+o*e.direction.y});return n},Ig=(e,n)=>{const o=[];let s=e.x,r=e.y;const u=n.x,f=n.y,h=Math.abs(u-s),g=s<u?1:-1,m=-Math.abs(f-r),v=r<f?1:-1;let x=h+m;for(;o.push({x:s,y:r}),!(s===u&&r===f);){const T=2*x;T>=m&&(x+=m,s+=g),T<=h&&(x+=h,r+=v)}return o},Px=(e,n)=>{const{strGrid:o,height:s}=n;o.forEach((r,u)=>{r.split(",").forEach((f,h)=>{f==="0"&&e.add(`${h},${s-1-u}`)})})},_c=(e,n={})=>{const o=new Set,{gridData:s,pets:r,stoneWalls:u,colorWalls:f,crateInfos:h,movableBoxes:g,obstacleInfos:m,treeRoots:v,exits:x,ribbonInfo:T}=e;if(Px(o,s),r.forEach(E=>{E.id!==n.ignorePetId&&E.positions.forEach(b=>o.add(`${b.x},${b.y}`))}),u.forEach(E=>o.add(`${E.position.x},${E.position.y}`)),f.forEach(E=>o.add(`${E.position.x},${E.position.y}`)),h.forEach(E=>E.listPositions.forEach(b=>o.add(`${b.x},${b.y}`))),g.forEach(E=>{E.id!==n.ignoreBoxId&&E.listPositions.forEach(b=>o.add(`${b.x},${b.y}`))}),m.forEach(E=>E.listPositions.forEach(b=>o.add(`${b.x},${b.y}`))),v.forEach(E=>Yo(E).forEach(b=>o.add(`${b.x},${b.y}`))),x.forEach(E=>{n.destination&&E.position.x===n.destination.x&&E.position.y===n.destination.y||o.add(`${E.position.x},${E.position.y}`)}),(T==null?void 0:T.listPositions.length)>0)if(T.listPositions.length>1)Ig(T.listPositions[0],T.listPositions[1]).forEach(E=>o.add(`${E.x},${E.y}`));else{const E=T.listPositions[0];o.add(`${E.x},${E.y}`)}return o},gr=(e,n,o={})=>{for(const x of n.pets)if(x.id!==o.ignorePetId&&x.positions.some(T=>T.x===e.x&&T.y===e.y))return{type:"pet",id:x.id};for(const x of n.obstacleInfos)if(x.id!==o.ignoreObstacleId&&x.listPositions.some(T=>T.x===e.x&&T.y===e.y))return{type:"obstacle",id:x.id};for(const x of n.movableBoxes)if(x.id!==o.ignoreBoxId&&x.listPositions.some(T=>T.x===e.x&&T.y===e.y))return{type:"movable_box",id:x.id};for(const x of n.crateInfos)if(x.id!==o.ignoreCrateId&&x.listPositions.some(T=>T.x===e.x&&T.y===e.y))return{type:"crate",id:x.id};for(const x of n.treeRoots)if(Yo(x).some(E=>E.x===e.x&&E.y===e.y))return{type:"tree_root",id:x.id};if(n.ribbonInfo&&n.ribbonInfo.listPositions.length>0){const{listPositions:x}=n.ribbonInfo;if(x.length>1){const T=x[0],E=x[1];if(Ig(T,E).some(A=>A.x===e.x&&A.y===e.y))return{type:"ribbon"}}else if(x[0].x===e.x&&x[0].y===e.y)return{type:"ribbon"}}if(n.exits.find(x=>x.position.x===e.x&&x.position.y===e.y))return{type:"exit",pos:e};if(n.stoneWalls.find(x=>x.position.x===e.x&&x.position.y===e.y))return{type:"stone",pos:e};if(n.colorWalls.find(x=>x.position.x===e.x&&x.position.y===e.y))return{type:"color_wall",pos:e};if(n.coloredPaths.find(x=>x.position.x===e.x&&x.position.y===e.y))return{type:"colored_path",pos:e};const{gridData:h}=n,{height:g,strGrid:m}=h,v=g-1-e.y;if(m&&v>=0&&v<m.length){const x=m[v].split(",");if(e.x>=0&&e.x<x.length&&x[e.x]==="0")return{type:"wall",pos:e}}return null},zh=(e,n)=>Math.abs(e.x-n.x)+Math.abs(e.y-n.y),Lx=(e,n,o,s)=>{const r=o.pets.find(P=>P.id===s);if(!r)return null;const u=e.x===r.headPos.x&&e.y===r.headPos.y?"head":"tail",{gridData:f,exits:h,coloredPaths:g}=o,{width:m,height:v}=f,x=_c(o,{ignorePetId:s,destination:n}),T=new Map(g.map(P=>[`${P.position.x},${P.position.y}`,P.color]));if(x.has(`${n.x},${n.y}`))return null;const E=T.get(`${n.x},${n.y}`);if(E!==void 0&&E!==r.color)return null;const b=h.find(P=>P.position.x===n.x&&P.position.y===n.y);if(b&&(b.color!==r.color||(b.special.iceCount??0)>0))return null;const A=P=>P.map(N=>`${N.x},${N.y}`).join(","),q=new Ux,w=new Map,M=r.positions,k=A(M);for(w.set(k,0),q.enqueue({pos:e,g:0,f:zh(e,n),body:M,parent:null});!q.isEmpty();){const P=q.dequeue(),N=A(P.body);if((w.get(N)??1/0)<P.g)continue;if(P.pos.x===n.x&&P.pos.y===n.y){const ce=[];let Y=P;for(;Y;)ce.unshift(Y.pos),Y=Y.parent;return ce.slice(1)}const{pos:$,body:oe}=P;for(const[ce,Y]of[[0,1],[0,-1],[1,0],[-1,0]]){const de={x:$.x+ce,y:$.y+Y},Ee=`${de.x},${de.y}`;if(de.x<0||de.x>=m||de.y<0||de.y>=v||x.has(Ee))continue;const O=T.get(Ee);if(O!==void 0&&O!==r.color)continue;const Ce=u==="head"?[de,...oe.slice(0,-1)]:[...oe.slice(1),de];if((u==="head"?Ce.slice(1):Ce.slice(0,-1)).some(pe=>pe.x===de.x&&pe.y===de.y))continue;const Le=P.g+1,G=A(Ce);if((w.get(G)??1/0)<=Le)continue;w.set(G,Le);const se={pos:de,g:Le,f:Le+zh(de,n),body:Ce,parent:P};q.enqueue(se)}}return null},Gx=(e,n,o)=>{const{width:s,height:r}=o.gridData,u=_c(o,{ignoreBoxId:e});for(const f of n)if(f.x<0||f.x>=s||f.y<0||f.y>=r||u.has(`${f.x},${f.y}`))return!1;return!0},Hx=(e,n,o)=>{const{gridData:s,coloredPaths:r,exits:u}=o,{width:f,height:h}=s,g=_c(o,{ignorePetId:n.id}),m=new Map(r.map(x=>[`${x.position.x},${x.position.y}`,x.color]));for(const x of e){if(x.x<0||x.x>=f||x.y<0||x.y>=h)return!1;const T=`${x.x},${x.y}`;if(g.has(T)){const b=u.find(q=>q.position.x===x.x&&q.position.y===x.y);if(!(x===e[0]||x===e[e.length-1])||!b||b.color!==n.color||(b.special.iceCount??0)>0)return!1}const E=m.get(T);if(E!==void 0&&E!==n.color)return!1}const v=new Set;for(const x of e){const T=`${x.x},${x.y}`;if(v.has(T))return!1;v.add(T)}return!0},Vh=(e,n,o)=>{if(n.length<2)return[e];const s=[e];let r=[...e];for(let u=1;u<n.length;u++){const f=n[u];let h;o==="head"?h=[f,...r.slice(0,-1)]:h=[...r.slice(1),f],s.push(h),r=h}return s},rc=(e,n,o,s,r)=>{var b;const u=structuredClone(e),f=[],h=u.pets.findIndex(A=>A.id===n.id);if(h===-1)return{nextLevel:e,removedWalls:[]};const g=u.pets[h],m=u.exits.findIndex(A=>A.position.x===o.position.x&&A.position.y===o.position.y);u.pets.forEach(A=>{A.special.iceCount>0&&A.special.iceCount--}),u.exits.forEach(A=>{A.special.iceCount>0&&A.special.iceCount--}),u.crateInfos=u.crateInfos.map(A=>A.requiredSnake>0?{...A,requiredSnake:A.requiredSnake-1}:A).filter(A=>A.requiredSnake!==0),u.pets.forEach(A=>{A.special.hiddenCount>0&&A.special.hiddenCount--}),u.stoneWalls=u.stoneWalls.map(A=>({...A,count:Math.max(0,A.count-1)})).filter(A=>A.count>0);const v=(b=g.special.keyLock)==null?void 0:b.keyColor;v!==void 0&&v!==nt.Unk&&u.pets.filter(q=>{var w;return q.id!==g.id&&((w=q.special.keyLock)==null?void 0:w.keyColor)===v}).length===0&&u.pets.forEach(q=>{var w;((w=q.special.keyLock)==null?void 0:w.lockColor)===v&&(q.special.keyLock.lockColor=nt.Unk,q.special.keyLock.keyColor===nt.Unk&&(q.special.keyLock=null))}),g.special.hasScissor&&(u.ribbonInfo.listPositions=[]);const x=(g.special.count??0)<=1,T=g.special.count??0;let E=!0;if(T>0){const A=u.pets[h];if(A.special.count=T-1,A.special.count>0){E=!1;const q={...o.position};A.positions=[q],A.headPos=q}}if(E)if(g.special.layerColors&&g.special.layerColors.length>0){const q=u.pets[h];q.color=g.special.layerColors[0];const w=g.special.layerColors.slice(1);q.special={layerColors:w.length>0?w:null,rawLayerColors:void 0,iceCount:0,hiddenCount:0,keyLock:null,hasScissor:!1,isSingleDirection:!1,count:0,timeExplode:0},q.positions=r,q.headPos=r[0]}else u.pets.splice(h,1);if(m!==-1){const A=u.exits[m],q=A.special.count>0?A.special.count:1;if(q>0&&(A.special.count=q-1,A.special.count===0&&!A.special.isPermanent))if(A.special.layerColors&&A.special.layerColors.length>0){const M=A.special.layerColors[0],k=A.special.layerColors.slice(1);A.color=M,A.special.layerColors=k.length>0?k:null,A.special.rawLayerColors=void 0,A.special.count=1}else u.exits.splice(m,1)}if(x){const A=n.color;if(((M,k)=>M.pets.reduce((P,N)=>[N.color,...N.special.layerColors||[]].includes(k)?P+1:P,0))(e,A)===1){const M=e.colorWalls.filter(k=>k.color===A);if(M.length>0){f.push(...M);const k=new Set(M.map(P=>`${P.position.x},${P.position.y}`));u.colorWalls=u.colorWalls.filter(P=>!k.has(`${P.position.x},${P.position.y}`))}}}return u.treeRoots=u.treeRoots.map(A=>({...A,length:A.length-1})).filter(A=>A.length>0),{nextLevel:u,removedWalls:f}},Bx=({level:e,mode:n,selectedObject:o,isDragging:s,editDragState:r,playDragState:u,disappearingWalls:f,draggedVisuals:h,pathVisualization:g,onGridMouseDown:m,onGridMouseMove:v,onGridMouseUp:x,onGridMouseLeave:T})=>{const{gridData:E,pets:b,exits:A,stoneWalls:q,coloredPaths:w,colorWalls:M,crateInfos:k,ribbonInfo:P,movableBoxes:N,obstacleInfos:$,treeRoots:oe}=e,{width:ce,height:Y}=E,de=ae.useRef(null),Ee=ae.useMemo(()=>E.strGrid?[...E.strGrid].reverse().map(L=>L.split(",")):[],[E.strGrid]),O=Math.min(64,900/Math.max(ce,Y,10)),Ce=ae.useMemo(()=>{const L=new Set;return b.forEach(X=>X.positions.forEach(K=>L.add(`${K.x},${K.y}`))),A.forEach(X=>L.add(`${X.position.x},${X.position.y}`)),q.forEach(X=>L.add(`${X.position.x},${X.position.y}`)),w.forEach(X=>L.add(`${X.position.x},${X.position.y}`)),M.forEach(X=>L.add(`${X.position.x},${X.position.y}`)),k.forEach(X=>X.listPositions.forEach(K=>L.add(`${K.x},${K.y}`))),P.listPositions.forEach(X=>L.add(`${X.x},${X.y}`)),N.forEach(X=>X.listPositions.forEach(K=>L.add(`${K.x},${K.y}`))),$.forEach(X=>X.listPositions.forEach(K=>L.add(`${K.x},${K.y}`))),oe.forEach(X=>Yo(X).forEach(K=>L.add(`${K.x},${K.y}`))),L},[e]),Oe=ae.useMemo(()=>{if(n!=="edit"||!o||o.type!=="pet")return[];const L=e.pets.find(_e=>_e.id===o.id);if(!(L!=null&&L.special.keyLock))return[];const X=[],{keyColor:K,lockColor:ve}=L.special.keyLock;return K!==nt.Unk&&K!==void 0&&e.pets.filter(Ie=>{var Ae;return Ie.id!==L.id&&((Ae=Ie.special.keyLock)==null?void 0:Ae.lockColor)===K}).forEach(Ie=>{X.push({keyPet:L,lockPet:Ie,color:K})}),ve!==nt.Unk&&ve!==void 0&&e.pets.filter(Ie=>{var Ae;return Ie.id!==L.id&&((Ae=Ie.special.keyLock)==null?void 0:Ae.keyColor)===ve}).forEach(Ie=>{X.push({keyPet:Ie,lockPet:L,color:ve})}),X},[o,e.pets,n]),Le=ae.useMemo(()=>{const L=new Set(f==null?void 0:f.map(K=>`${K.position.x},${K.position.y}`)),X=e.colorWalls.map(K=>{const ve=`${K.position.x},${K.position.y}`;return{wall:K,status:L.has(ve)?"disappearing":"visible"}});return f==null||f.forEach(K=>{X.some(ve=>ve.wall.position.x===K.position.x&&ve.wall.position.y===K.position.y)||X.push({wall:K,status:"disappearing"})}),X},[e.colorWalls,f]),G=L=>{if(!de.current)return null;const X=de.current.getBoundingClientRect(),K=L.clientX-X.left,ve=L.clientY-X.top,_e=Math.floor(K/O),Ie=Math.floor((X.height-ve)/O);return _e<0||_e>=ce||Ie<0||Ie>=Y?null:{x:_e,y:Ie}},se=L=>{const X=G(L);X&&m(X,L)},pe=L=>{if(v){const X=G(L);X&&v(X,L)}},ke=L=>{x&&x(G(L),L)},Ge=L=>{T&&T(L)},I={display:"grid",gridTemplateColumns:`repeat(${ce}, ${O}px)`,gridTemplateRows:`repeat(${Y}, ${O}px)`,width:`${ce*O}px`,height:`${Y*O}px`,border:"2px solid #4a5568",backgroundColor:"transparent",position:"relative"},j=Array.from({length:ce*Y},(L,X)=>{var Ae;const K=X%ce,ve=Math.floor(X/ce),_e=Y-1-ve,Ie=((Ae=Ee[_e])==null?void 0:Ae[K])==="0";return{key:`${K}-${_e}`,x:K,y:_e,isWall:Ie}}),re=L=>{if(!o)return!1;switch(o.type){case"pet":const X=b.find(Ae=>Ae.id===o.id);return!!(X!=null&&X.positions.some(Ae=>Ae.x===L.x&&Ae.y===L.y));case"crate":const K=k.find(Ae=>Ae.id===o.id);return!!(K!=null&&K.listPositions.some(Ae=>Ae.x===L.x&&Ae.y===L.y));case"movable_box":const ve=N.find(Ae=>Ae.id===o.id);return!!(ve!=null&&ve.listPositions.some(Ae=>Ae.x===L.x&&Ae.y===L.y));case"obstacle":const _e=$.find(Ae=>Ae.id===o.id);return!!(_e!=null&&_e.listPositions.some(Ae=>Ae.x===L.x&&Ae.y===L.y));case"tree_root":const Ie=oe.find(Ae=>Ae.id===o.id);return!!Ie&&Yo(Ie).some(Ae=>Ae.x===L.x&&Ae.y===L.y);case"ribbon":return!!(P!=null&&P.listPositions.some(Ae=>Ae.x===L.x&&Ae.y===L.y));case"exit":case"stone":case"colored_path":case"color_wall":return o.pos.x===L.x&&o.pos.y===L.y;default:return!1}},ue=u==null?void 0:u.pet.id;return S.jsx("div",{ref:de,style:{cursor:s||u?"grabbing":"default",width:I.width,height:I.height},onMouseDown:se,onMouseMove:pe,onMouseUp:ke,onMouseLeave:Ge,onContextMenu:L=>L.preventDefault(),children:S.jsxs("div",{style:I,children:[j.map(({key:L,x:X,y:K,isWall:ve})=>S.jsx(kx,{x:X,y:K,gridWidth:ce,gridHeight:Y,isWall:ve,isSelected:re({x:X,y:K}),onMouseDown:()=>{}},L)),b.map(L=>L.special.iceCount>0?L.positions.map((X,K)=>S.jsx(Rx,{pos:X,height:Y,isDimmed:(r==null?void 0:r.object.type)==="pet"&&r.object.id===L.id},`ice-${L.id}-${K}`)):null),w.map((L,X)=>{const K=(h==null?void 0:h.type)==="colored_path"&&h.id.x===L.position.x&&h.id.y===L.position.y?h:null;return S.jsx(Ax,{path:L,height:Y,isDimmed:(r==null?void 0:r.object.type)==="colored_path"&&r.object.pos.x===L.position.x&&r.object.pos.y===L.position.y,visualOffset:K==null?void 0:K.offset},`cp-${X}`)}),Le.map(({wall:L,status:X},K)=>{const ve=(h==null?void 0:h.type)==="color_wall"&&h.id.x===L.position.x&&h.id.y===L.position.y?h:null;return S.jsx(bx,{wall:L,height:Y,isDimmed:(r==null?void 0:r.object.type)==="color_wall"&&r.object.pos.x===L.position.x&&r.object.pos.y===L.position.y,isDisappearing:X==="disappearing",visualOffset:ve==null?void 0:ve.offset},`cw-${L.position.x}-${L.position.y}-${K}`)}),k.map((L,X)=>{const K=(h==null?void 0:h.type)==="crate"&&h.id===L.id?h:null;return S.jsx(Mx,{crate:L,height:Y,isDimmed:(r==null?void 0:r.object.type)==="crate"&&r.object.id===L.id,visualOffset:K==null?void 0:K.offset},`cr-${X}`)}),N.map((L,X)=>{const K=(h==null?void 0:h.type)==="movable_box"&&h.id===L.id?h:null;return S.jsx(Ix,{box:L,height:Y,mode:n,isDimmed:(r==null?void 0:r.object.type)==="movable_box"&&r.object.id===L.id,visualOffset:K==null?void 0:K.offset},`mb-${X}`)}),P&&P.listPositions.length>0&&S.jsx(Nx,{ribbon:P,height:Y,isDimmed:(r==null?void 0:r.object.type)==="ribbon"}),A.map((L,X)=>{const K=(h==null?void 0:h.type)==="exit"&&h.id.x===L.position.x&&h.id.y===L.position.y?h:null;return S.jsx(Ex,{exit:L,height:Y,theme:e.theme,isDimmed:(r==null?void 0:r.object.type)==="exit"&&r.object.pos.x===L.position.x&&r.object.pos.y===L.position.y,visualOffset:K==null?void 0:K.offset},`e-${X}`)}),q.map((L,X)=>{const K=(h==null?void 0:h.type)==="stone"&&h.id.x===L.position.x&&h.id.y===L.position.y?h:null;return S.jsx(_x,{stone:L,height:Y,theme:e.theme,isDimmed:(r==null?void 0:r.object.type)==="stone"&&r.object.pos.x===L.position.x&&r.object.pos.y===L.position.y,visualOffset:K==null?void 0:K.offset},`sw-${X}`)}),$.map((L,X)=>{const K=(h==null?void 0:h.type)==="obstacle"&&h.id===L.id?h:null;return S.jsx(Dx,{obstacle:L,height:Y,isDimmed:(r==null?void 0:r.object.type)==="obstacle"&&r.object.id===L.id,visualOffset:K==null?void 0:K.offset},`obs-${X}`)}),oe.map((L,X)=>{const K=(h==null?void 0:h.type)==="tree_root"&&h.id===L.id?h:null;return S.jsx(wx,{root:L,height:Y,isDimmed:(r==null?void 0:r.object.type)==="tree_root"&&r.object.id===L.id,visualOffset:K==null?void 0:K.offset},`tr-${X}`)}),S.jsxs("svg",{width:ce*O,height:Y*O,style:{position:"absolute",top:0,left:0,pointerEvents:"none",zIndex:10},"aria-hidden":"true",children:[g==null?void 0:g.map((L,X)=>{if(L.length<2)return null;const K=L.map(ve=>{const _e=ve.x*O+O/2,Ie=(Y-1-ve.y)*O+O/2;return`${_e},${Ie}`}).join(" ");return S.jsx("polyline",{points:K,fill:"none",stroke:"#FFFFFF",strokeWidth:O*.15,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:`${O*.2} ${O*.15}`,style:{animation:"pulse-white 2s ease-in-out infinite",pointerEvents:"none"}},`path-vis-${X}`)}),b.map(L=>{const X=(h==null?void 0:h.type)==="pet"&&h.id===L.id?h:null;return S.jsx(Cx,{pet:L,mode:n,gridHeight:Y,tileSize:O,theme:e.theme,isDimmed:(r==null?void 0:r.object.type)==="pet"&&r.object.id===L.id,isBeingDragged:L.id===ue,visualOffset:X==null?void 0:X.offset,onPetMouseDown:(K,ve)=>m(K,ve)},L.id)}),Oe.map((L,X)=>{const K=L.keyPet.headPos,ve=L.lockPet.positions[L.lockPet.positions.length-1];if(!K||!ve)return null;const _e=K.x*O+O/2,Ie=(Y-1-K.y)*O+O/2,Ae=ve.x*O+O/2,Cn=(Y-1-ve.y)*O+O/2,Sn=L.color===nt.Gold?"#FBBF24":"#E5E7EB";return S.jsx("line",{x1:_e,y1:Ie,x2:Ae,y2:Cn,stroke:Sn,strokeWidth:O*.1,strokeLinecap:"round",strokeDasharray:`${O*.2} ${O*.15}`,style:{pointerEvents:"none",filter:"drop-shadow(0 0 2px rgba(0,0,0,0.7))"}},`link-${X}`)}),P&&P.listPositions.length>1&&S.jsx("line",{x1:P.listPositions[0].x*O+O/2,y1:(Y-1-P.listPositions[0].y)*O+O/2,x2:P.listPositions[1].x*O+O/2,y2:(Y-1-P.listPositions[1].y)*O+O/2,stroke:"#F472B6",strokeWidth:O*.1,strokeLinecap:"round",strokeDasharray:`${O*.2} ${O*.1}`,style:{pointerEvents:"none"}})]}),n==="edit"&&o&&!s&&S.jsx(S.Fragment,{children:[...Ce].map(L=>{const[X,K]=L.split(",").map(Number),ve={position:"absolute",left:`${X*O}px`,top:`${(Y-1-K)*O}px`,width:`${O}px`,height:`${O}px`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:`${Math.max(8,O*.2)}px`,textShadow:"0 0 4px black, 0 0 4px black",pointerEvents:"none",zIndex:12,fontFamily:"monospace"};return S.jsxs("div",{style:ve,children:["(",X,",",K,")"]},`coord-${L}`)})}),n==="edit"&&r&&r.currentPositions.map((L,X)=>{const K=r.isValidDrop?"#2dd4bf":"#f87171",ve={position:"absolute",left:`${L.x*O}px`,top:`${(Y-1-L.y)*O}px`,width:`${O}px`,height:`${O}px`,backgroundColor:r.isValidDrop?"rgba(45, 212, 191, 0.2)":"rgba(248, 113, 113, 0.2)",outline:`3px solid ${K}`,outlineOffset:"-3px",zIndex:20,pointerEvents:"none",opacity:.8,borderRadius:"4px",transition:"background-color 0.2s ease, outline-color 0.2s ease"};return S.jsx("div",{style:ve},`ghost-${X}`)})]})})},qx=["pet","exit","stone","wall","colored_path","color_wall","crate","ribbon","movable_box","obstacle","tree_root","eraser"],zx=({selectedTool:e,isDrawing:n,onToolChange:o,onFinishDrawing:s})=>S.jsxs("div",{children:[S.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"Tools"}),S.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[qx.map(r=>S.jsx("button",{onClick:()=>o(r),className:`capitalize px-4 py-2 rounded-lg font-bold text-white transition-all transform hover:scale-105 ${e===r?"bg-teal-600 ring-2 ring-white":"bg-gray-700 hover:bg-gray-600"}`,children:r.replace("_"," ")},r)),n&&S.jsx("button",{onClick:s,className:"col-span-2 mt-2 px-4 py-3 bg-green-600 hover:bg-green-500 rounded-lg font-bold text-white transition-transform transform hover:scale-105",children:"Finish Drawing"})]})]}),Vx=["pet","exit","colored_path","color_wall"],Ox=ae.forwardRef(({selectedTool:e,selectedColor:n,isOpen:o,setIsOpen:s,onColorChange:r,selectedObjectData:u},f)=>{if(!Vx.includes(e))return null;const[h,g]=ae.useState([n]);ae.useEffect(()=>{let T=[];if(u)switch(u.type){case"pet":case"exit":T.push(u.color),u.special.layerColors&&T.push(...u.special.layerColors);break;case"colored_path":case"color_wall":T.push(u.color);break}T.length>0?g(T):g([n])},[u,n]);const m=h[0]??Pt.Unk,v=xn[m]||"#6B7280",x=vr(v,20);return S.jsxs("div",{ref:f,children:[S.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"Color"}),S.jsxs("div",{className:"relative",children:[S.jsxs("button",{onClick:()=>s(!o),style:{backgroundColor:v,borderColor:x},className:"w-full h-12 rounded-lg border-2 flex items-center justify-between px-4 font-bold text-white shadow-lg transition-transform transform hover:scale-105","aria-label":`Selected color: ${Pt[m]||"Unknown"}. Click to change.`,children:[S.jsx("span",{className:"capitalize",children:Pt[m]?Pt[m].replace(/([A-Z])/g," $1").trim():"Unknown"}),S.jsx("div",{className:"flex items-center gap-1.5",children:h.map((T,E)=>{const b=xn[T],A=vr(b,20);return S.jsx("div",{style:{backgroundColor:b,borderColor:A},className:`w-5 h-5 rounded-full border-2 shadow-md ${E===0?"ring-2 ring-white/70":""}`,title:`${E===0?"Primary":`Layer ${E}`}: ${Pt[T]?Pt[T].replace(/([A-Z])/g," $1").trim():"Unknown"}`},E)})})]}),o&&S.jsx("div",{className:"absolute top-full mt-2 w-full bg-gray-700 p-2 rounded-lg shadow-xl z-10 border border-gray-600",children:S.jsx("div",{className:"grid grid-cols-6 gap-2",children:vx.map(T=>{const E=xn[T],b=vr(E,20);return S.jsx("button",{onClick:()=>r(T),"aria-label":`Select color ${Pt[T]}`,style:{backgroundColor:E,borderColor:b},className:`w-10 h-10 rounded-full border-2 transition-transform transform hover:scale-110 ${n===T?"ring-2 ring-offset-2 ring-offset-gray-700 ring-white":""}`},T)})})})]})]})}),Fx=({level:e,onLevelChange:n,onSizeChange:o,isSolutionPlaying:s,solutionPlaybackIndex:r,onPlaySolution:u,onStopSolution:f})=>{const h=v=>{const x=parseInt(v.target.value,10)||1;n({...e,level:x,levelName:`Level_${x}`})},g=(v,x)=>{n({...e,[v]:x})},m=()=>{n({...e,solution:[]})};return S.jsxs("div",{children:[S.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"Level Settings"}),S.jsxs("div",{className:"flex flex-col gap-3",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"levelName",className:"block text-sm font-medium text-gray-300 mb-1",children:"Level Name"}),S.jsx("input",{type:"text",id:"levelName",value:e.levelName,readOnly:!0,className:"w-full bg-gray-800 border border-gray-600 rounded-md px-3 py-2 text-gray-400 focus:ring-teal-500 focus:border-teal-500 cursor-default"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"levelNumber",className:"block text-sm font-medium text-gray-300 mb-1",children:"Level Number"}),S.jsx("input",{type:"number",id:"levelNumber",min:"1",value:e.level,onChange:h,className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500"})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"width",className:"block text-sm font-medium text-gray-300 mb-1",children:"Width"}),S.jsx("input",{type:"number",id:"width",min:"3",max:"30",value:e.gridData.width,onChange:v=>o(parseInt(v.target.value,10)||e.gridData.width,e.gridData.height),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"height",className:"block text-sm font-medium text-gray-300 mb-1",children:"Height"}),S.jsx("input",{type:"number",id:"height",min:"3",max:"30",value:e.gridData.height,onChange:v=>o(e.gridData.width,parseInt(v.target.value,10)||e.gridData.height),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500"})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"time",className:"block text-sm font-medium text-gray-300 mb-1",children:"Time (seconds)"}),S.jsx("input",{type:"number",id:"time",min:"0",value:e.time,onChange:v=>g("time",parseInt(v.target.value,10)||0),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"levelDifficulty",className:"block text-sm font-medium text-gray-300 mb-1",children:"Difficulty"}),S.jsxs("select",{id:"levelDifficulty",value:e.levelDifficulty,onChange:v=>g("levelDifficulty",parseInt(v.target.value,10)||0),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500",children:[S.jsx("option",{value:"0",children:"Easy"}),S.jsx("option",{value:"1",children:"Medium"}),S.jsx("option",{value:"2",children:"Hard"}),S.jsx("option",{value:"3",children:"Very Hard"}),S.jsx("option",{value:"4",children:"Insane"})]})]})]}),S.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[S.jsx("h3",{className:"text-md font-semibold text-white mb-2",children:"Visual Theme"}),S.jsx("div",{className:"flex flex-col gap-2",children:Object.values(Rn).map(v=>S.jsx("button",{onClick:()=>g("theme",v),className:`px-4 py-2 rounded-lg font-bold text-white transition-all transform hover:scale-105 ${e.theme===v?"bg-teal-600 ring-2 ring-white":"bg-gray-700 hover:bg-gray-600"}`,children:v},v))})]}),S.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[S.jsxs("div",{className:"flex justify-between items-center mb-2",children:[S.jsx("h3",{className:"text-md font-semibold text-white",children:"Solution"}),S.jsxs("div",{className:"flex gap-2",children:[e.solution&&e.solution.length>0&&!s&&S.jsx("button",{onClick:u,className:"px-3 py-1 text-sm bg-green-600 hover:bg-green-500 rounded-md font-bold text-white transition-colors",children:"Play"}),s&&S.jsx("button",{onClick:f,className:"px-3 py-1 text-sm bg-yellow-600 hover:bg-yellow-500 rounded-md font-bold text-white transition-colors",children:"Stop"}),e.solution&&e.solution.length>0&&S.jsx("button",{onClick:m,disabled:s,className:"px-3 py-1 text-sm bg-red-700 hover:bg-red-600 rounded-md font-bold text-white transition-colors disabled:bg-gray-500",children:"Clear"})]})]}),e.solution&&e.solution.length>0?S.jsxs(S.Fragment,{children:[S.jsxs("p",{className:"text-sm text-gray-300 mb-2",children:[e.solution.length," steps recorded."]}),S.jsx("div",{className:"w-full h-24 bg-gray-800 border border-gray-600 rounded-md p-2 text-xs text-gray-400 font-mono resize-none overflow-y-auto","aria-label":"Recorded solution steps",children:e.solution.map((v,x)=>S.jsx("div",{className:`whitespace-nowrap overflow-hidden text-ellipsis transition-colors duration-150 ${x===r&&s?"bg-teal-500/30 rounded -mx-1 px-1 text-white":""}`,children:v},x))})]}):S.jsx("p",{className:"text-sm text-gray-400",children:"No solution recorded."})]})]})},$x=({isSolving:e,guideSolver:n,hasRecordedSolution:o,onGuideSolverChange:s,onLoadClick:r,onSaveUnityAsset:u,onSolveLevel:f,fileInputRef:h,onFileLoad:g})=>S.jsxs("div",{children:[S.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"Actions"}),S.jsxs("div",{className:"flex flex-col gap-2",children:[S.jsx("button",{onClick:r,disabled:e,className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-500 rounded-lg font-bold text-white transition-all transform hover:scale-105 disabled:bg-gray-500 disabled:cursor-not-allowed disabled:transform-none",children:"Load Level..."}),S.jsx("input",{type:"file",ref:h,onChange:g,className:"hidden",accept:".json,.yaml,.yml,.asset"}),S.jsx("button",{onClick:u,disabled:e,className:"w-full px-4 py-3 bg-teal-600 hover:bg-teal-500 rounded-lg font-bold text-white transition-all transform hover:scale-105 disabled:bg-gray-500 disabled:cursor-not-allowed disabled:transform-none",children:"Save Unity Asset"}),S.jsx("button",{onClick:f,disabled:e,className:`w-full px-4 py-3 rounded-lg font-bold text-white transition-all transform hover:scale-105 disabled:cursor-not-allowed disabled:transform-none ${e?"bg-yellow-700 animate-pulse":"bg-yellow-600 hover:bg-yellow-500"}`,children:e?"Solving...":"Solve Level"}),S.jsxs("div",{className:"flex items-center justify-start gap-2 mt-3 pt-3 border-t border-gray-700",children:[S.jsx("input",{type:"checkbox",id:"guideSolver",checked:n,onChange:m=>s(m.target.checked),disabled:!o||e,className:"h-5 w-5 bg-gray-700 border-gray-600 rounded text-teal-500 focus:ring-teal-500 disabled:opacity-50 disabled:cursor-not-allowed","aria-describedby":"guideSolverDescription"}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"guideSolver",className:`text-sm font-medium ${!o||e?"text-gray-500":"text-gray-300"}`,children:"Learn from my recording"}),S.jsx("p",{id:"guideSolverDescription",className:"text-xs text-gray-400",children:"Guides the solver with your recorded path."})]})]})]})]}),Yx=({selectedObjectData:e,level:n,onLevelChange:o})=>{if(!e)return null;const s=(M,k)=>{if((e==null?void 0:e.type)!=="stone")return;const P=structuredClone(n),N=P.stoneWalls.find($=>$.position.x===e.position.x&&$.position.y===e.position.y);N&&(N[M]=k,o(P))},r=(M,k)=>{const P=structuredClone(n),N=P.pets.find($=>$.id===e.id);N&&(N.special[M]=k,M==="layerColors"&&delete N.special.rawLayerColors,o(P))},u=(M,k)=>{const P=structuredClone(n),N=P.pets.find($=>$.id===e.id);if(N){const $=N.special.keyLock?{...N.special.keyLock}:{keyColor:nt.Unk,lockColor:nt.Unk};$[M]=parseInt(k,10),$.keyColor===nt.Unk&&$.lockColor===nt.Unk?N.special.keyLock=null:N.special.keyLock=$,o(P)}},f=(M,k)=>{if((e==null?void 0:e.type)!=="exit")return;const P=structuredClone(n),N=P.exits.find($=>$.position.x===e.position.x&&$.position.y===e.position.y);N&&(N.special[M]=k,M==="layerColors"&&delete N.special.rawLayerColors,o(P))},h=(M,k)=>{const P=structuredClone(n),N=P.crateInfos.find($=>$.id===e.id);N&&(N[M]=k,o(P))},g=(M,k)=>{const P=structuredClone(n),N=P.movableBoxes.find($=>$.id===e.id);N&&(N[M]=k,o(P))},m=(M,k)=>{const P=structuredClone(n),N=P.treeRoots.find($=>$.id===e.id);N&&(N[M]=k,o(P))},v=M=>S.jsxs("div",{children:[S.jsx("h3",{className:"text-md font-semibold text-white mb-2",children:"Stone Wall"}),S.jsxs("div",{className:"flex flex-col gap-3",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"stoneCount",className:"block text-sm font-medium text-gray-300 mb-1",children:"Hit Count"}),S.jsx("input",{type:"number",id:"stoneCount",min:"1",value:M.count,onChange:k=>s("count",parseInt(k.target.value,10)||1),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"stoneIceCount",className:"block text-sm font-medium text-gray-300 mb-1",children:"Ice Count"}),S.jsx("input",{type:"number",id:"stoneIceCount",min:"0",value:M.iceCount??0,onChange:k=>s("iceCount",parseInt(k.target.value,10)||0),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500"})]})]})]}),x=M=>{var de,Ee;const k=M.special,P=(O,Ce)=>{const Oe=Ce===""?null:parseInt(Ce,10),Le=M.special.layerColors||[];let G=[...Le];for(G.length<=O&&(G.length=O+1,G.fill(null,Le.length)),G[O]=Oe,O===0&&Oe===null&&(G[1]=null);G.length>0&&G[G.length-1]===null;)G.pop();const se=G.filter(pe=>pe!==null);r("layerColors",se.length>0?se:null)},N=(k.layerColors||[])[0]??"",$=(k.layerColors||[])[1]??"",oe=N==="",ce=Object.keys(nt).filter(O=>isNaN(Number(O))),Y=O=>Pt[O]?Pt[O].replace(/([A-Z])/g," $1").trim():"Unknown";return S.jsxs("div",{className:"flex flex-col gap-3",children:[S.jsxs("h3",{className:"text-md font-semibold text-white mb-0",children:["Pet ",M.editorName," - Special"]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"layer1Color",className:"block text-sm font-medium text-gray-300 mb-1",children:"Layer 1 Color"}),S.jsxs("select",{id:"layer1Color",value:N,onChange:O=>P(0,O.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500",children:[S.jsx("option",{value:"",children:"None"}),mr.map(O=>S.jsx("option",{value:O,children:Y(O)},`l1-${O}`))]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"layer2Color",className:"block text-sm font-medium text-gray-300 mb-1",children:"Layer 2 Color"}),S.jsxs("select",{id:"layer2Color",value:$,onChange:O=>P(1,O.target.value),disabled:oe,className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500 disabled:opacity-50",children:[S.jsx("option",{value:"",children:"None"}),mr.map(O=>S.jsx("option",{value:O,children:Y(O)},`l2-${O}`))]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"petCount",className:"block text-sm font-medium text-gray-300 mb-1",children:"Hit Count"}),S.jsx("input",{type:"number",id:"petCount",min:"0",value:k.count??0,onChange:O=>r("count",parseInt(O.target.value,10)||0),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"iceCount",className:"block text-sm font-medium text-gray-300 mb-1",children:"Ice Count"}),S.jsx("input",{type:"number",id:"iceCount",min:"0",value:k.iceCount,onChange:O=>r("iceCount",parseInt(O.target.value)||0),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"hiddenCount",className:"block text-sm font-medium text-gray-300 mb-1",children:"Hidden Count"}),S.jsx("input",{type:"number",id:"hiddenCount",min:"0",value:k.hiddenCount,onChange:O=>r("hiddenCount",parseInt(O.target.value)||0),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"timeExplode",className:"block text-sm font-medium text-gray-300 mb-1",children:"Time to Explode"}),S.jsx("input",{type:"number",id:"timeExplode",min:"0",value:k.timeExplode??0,onChange:O=>r("timeExplode",parseInt(O.target.value,10)||0),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"keyColor",className:"block text-sm font-medium text-gray-300 mb-1",children:"Key Color"}),S.jsx("select",{id:"keyColor",value:((de=k.keyLock)==null?void 0:de.keyColor)??nt.Unk,onChange:O=>u("keyColor",O.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500",children:ce.map(O=>S.jsx("option",{value:nt[O],children:O},O))})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"lockColor",className:"block text-sm font-medium text-gray-300 mb-1",children:"Lock Color"}),S.jsx("select",{id:"lockColor",value:((Ee=k.keyLock)==null?void 0:Ee.lockColor)??nt.Unk,onChange:O=>u("lockColor",O.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500",children:ce.map(O=>S.jsx("option",{value:nt[O],children:O},O))})]}),S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("label",{htmlFor:"hasScissor",className:"text-sm font-medium text-gray-300",children:"Has Scissor"}),S.jsx("input",{type:"checkbox",id:"hasScissor",checked:k.hasScissor,onChange:O=>r("hasScissor",O.target.checked),className:"h-5 w-5 bg-gray-700 border-gray-600 rounded text-teal-500 focus:ring-teal-500"})]}),S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("label",{htmlFor:"isSingleDirection",className:"text-sm font-medium text-gray-300",children:"Single Direction"}),S.jsx("input",{type:"checkbox",id:"isSingleDirection",checked:k.isSingleDirection,onChange:O=>r("isSingleDirection",O.target.checked),className:"h-5 w-5 bg-gray-700 border-gray-600 rounded text-teal-500 focus:ring-teal-500"})]})]})},T=M=>{const k=M.special,P=(Y,de)=>{const Ee=de===""?null:parseInt(de,10),O=k.layerColors||[];let Ce=[...O];for(Ce.length<=Y&&(Ce.length=Y+1,Ce.fill(null,O.length)),Ce[Y]=Ee,Y===0&&Ee===null&&(Ce[1]=null);Ce.length>0&&Ce[Ce.length-1]===null;)Ce.pop();const Oe=Ce.filter(Le=>Le!==null);f("layerColors",Oe.length>0?Oe:null)},N=(k.layerColors||[])[0]??"",$=(k.layerColors||[])[1]??"",oe=N==="",ce=Y=>Pt[Y]?Pt[Y].replace(/([A-Z])/g," $1").trim():"Unknown";return S.jsxs("div",{className:"flex flex-col gap-3",children:[S.jsx("h3",{className:"text-md font-semibold text-white mb-0",children:"Exit Special"}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"exitCount",className:"block text-sm font-medium text-gray-300 mb-1",children:"Hit Count"}),S.jsx("input",{type:"number",id:"exitCount",min:"0",value:k.count??0,onChange:Y=>f("count",parseInt(Y.target.value,10)||0),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"exitIceCount",className:"block text-sm font-medium text-gray-300 mb-1",children:"Ice Count"}),S.jsx("input",{type:"number",id:"exitIceCount",min:"0",value:k.iceCount,onChange:Y=>f("iceCount",parseInt(Y.target.value,10)||0),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"exitLayer1Color",className:"block text-sm font-medium text-gray-300 mb-1",children:"Layer 1 Color"}),S.jsxs("select",{id:"exitLayer1Color",value:N,onChange:Y=>P(0,Y.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500",children:[S.jsx("option",{value:"",children:"None"}),mr.map(Y=>S.jsx("option",{value:Y,children:ce(Y)},`ex-l1-${Y}`))]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"exitLayer2Color",className:"block text-sm font-medium text-gray-300 mb-1",children:"Layer 2 Color"}),S.jsxs("select",{id:"exitLayer2Color",value:$,onChange:Y=>P(1,Y.target.value),disabled:oe,className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500 disabled:opacity-50",children:[S.jsx("option",{value:"",children:"None"}),mr.map(Y=>S.jsx("option",{value:Y,children:ce(Y)},`ex-l2-${Y}`))]})]}),S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("label",{htmlFor:"exitIsPermanent",className:"text-sm font-medium text-gray-300",children:"Is Permanent"}),S.jsx("input",{type:"checkbox",id:"exitIsPermanent",checked:k.isPermanent,onChange:Y=>f("isPermanent",Y.target.checked),className:"h-5 w-5 bg-gray-700 border-gray-600 rounded text-teal-500 focus:ring-teal-500"})]})]})},E=M=>S.jsxs("div",{children:[S.jsx("h3",{className:"text-md font-semibold text-white mb-2",children:"Crate"}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"requiredSnake",className:"block text-sm font-medium text-gray-300 mb-1",children:"Required Snake"}),S.jsx("input",{type:"number",id:"requiredSnake",min:"0",value:M.requiredSnake,onChange:k=>h("requiredSnake",parseInt(k.target.value,10)||0),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500"})]})]}),b=M=>S.jsxs("div",{children:[S.jsx("h3",{className:"text-md font-semibold text-white mb-2",children:"Movable Box"}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"boxDirection",className:"block text-sm font-medium text-gray-300 mb-1",children:"Direction"}),S.jsxs("select",{id:"boxDirection",value:M.direction,onChange:k=>g("direction",parseInt(k.target.value,10)),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500",children:[S.jsx("option",{value:jt.None,children:"None"}),S.jsx("option",{value:jt.Vertical,children:"Vertical"}),S.jsx("option",{value:jt.Horizontal,children:"Horizontal"})]})]})]}),A=M=>S.jsxs("div",{children:[S.jsx("h3",{className:"text-md font-semibold text-white mb-2",children:"Obstacle"}),S.jsxs("div",{className:"flex flex-col gap-3",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"ID"}),S.jsx("p",{className:"text-sm text-gray-400 bg-gray-800 border border-gray-600 rounded-md px-3 py-2",children:M.id})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Positions"}),S.jsx("div",{className:"text-xs text-gray-400 bg-gray-800 border border-gray-600 rounded-md p-2 max-h-24 overflow-y-auto",children:M.listPositions.map((k,P)=>S.jsx("span",{className:"block font-mono",children:`{ x: ${k.x}, y: ${k.y} }`},P))})]})]})]}),q=M=>{const k=N=>N.x===1?"Right":N.x===-1?"Left":N.y===1?"Up":N.y===-1?"Down":"Right",P=N=>N==="Right"?{x:1,y:0}:N==="Left"?{x:-1,y:0}:N==="Up"?{x:0,y:1}:N==="Down"?{x:0,y:-1}:{x:1,y:0};return S.jsxs("div",{children:[S.jsx("h3",{className:"text-md font-semibold text-white mb-2",children:"Tree Root"}),S.jsxs("div",{className:"flex flex-col gap-3",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"treeRootLength",className:"block text-sm font-medium text-gray-300 mb-1",children:"Length"}),S.jsx("input",{type:"number",id:"treeRootLength",min:"1",value:M.length,onChange:N=>m("length",parseInt(N.target.value,10)||1),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"treeRootDirection",className:"block text-sm font-medium text-gray-300 mb-1",children:"Direction"}),S.jsxs("select",{id:"treeRootDirection",value:k(M.direction),onChange:N=>m("direction",P(N.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500",children:[S.jsx("option",{children:"Right"}),S.jsx("option",{children:"Left"}),S.jsx("option",{children:"Up"}),S.jsx("option",{children:"Down"})]})]})]})]})},w=()=>{switch(e.type){case"stone":return v(e);case"pet":return x(e);case"exit":return T(e);case"crate":return E(e);case"movable_box":return b(e);case"obstacle":return A(e);case"tree_root":return q(e);default:return null}};return S.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[S.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"Properties"}),w()]})},Jx=(e,n)=>ae.useMemo(()=>{if(!n)return null;switch(n.type){case"pet":{const s=e.pets.find(r=>r.id===n.id);return s?{...s,type:"pet"}:null}case"exit":{const s=e.exits.find(r=>r.position.x===n.pos.x&&r.position.y===n.pos.y);return s?{...s,type:"exit"}:null}case"stone":{const s=e.stoneWalls.find(r=>r.position.x===n.pos.x&&r.position.y===n.pos.y);return s?{...s,type:"stone"}:null}case"colored_path":{const s=e.coloredPaths.find(r=>r.position.x===n.pos.x&&r.position.y===n.pos.y);return s?{...s,type:"colored_path"}:null}case"color_wall":{const s=e.colorWalls.find(r=>r.position.x===n.pos.x&&r.position.y===n.pos.y);return s?{...s,type:"color_wall"}:null}case"crate":{const s=e.crateInfos.find(r=>r.id===n.id);return s?{...s,type:"crate"}:null}case"ribbon":return e.ribbonInfo?{...e.ribbonInfo,type:"ribbon"}:null;case"movable_box":{const s=e.movableBoxes.find(r=>r.id===n.id);return s?{...s,type:"movable_box"}:null}case"obstacle":{const s=e.obstacleInfos.find(r=>r.id===n.id);return s?{...s,type:"obstacle"}:null}case"tree_root":{const s=e.treeRoots.find(r=>r.id===n.id);return s?{...s,type:"tree_root"}:null}default:return null}},[e,n]);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Kx,Xx;function Qx(){return{geminiUrl:Kx,vertexUrl:Xx}}function Zx(e,n,o,s){var r,u;if(!(e!=null&&e.baseUrl)){const f=Qx();return n?(r=f.vertexUrl)!==null&&r!==void 0?r:o:(u=f.geminiUrl)!==null&&u!==void 0?u:s}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yi{}function me(e,n){const o=/\{([^}]+)\}/g;return e.replace(o,(s,r)=>{if(Object.prototype.hasOwnProperty.call(n,r)){const u=n[r];return u!=null?String(u):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(e,n,o){for(let u=0;u<n.length-1;u++){const f=n[u];if(f.endsWith("[]")){const h=f.slice(0,-2);if(!(h in e))if(Array.isArray(o))e[h]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${f}`);if(Array.isArray(e[h])){const g=e[h];if(Array.isArray(o))for(let m=0;m<g.length;m++){const v=g[m];p(v,n.slice(u+1),o[m])}else for(const m of g)p(m,n.slice(u+1),o)}return}else if(f.endsWith("[0]")){const h=f.slice(0,-3);h in e||(e[h]=[{}]);const g=e[h];p(g[0],n.slice(u+1),o);return}(!e[f]||typeof e[f]!="object")&&(e[f]={}),e=e[f]}const s=n[n.length-1],r=e[s];if(r!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===r)return;if(typeof r=="object"&&typeof o=="object"&&r!==null&&o!==null)Object.assign(r,o);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(e,o):e[s]=o}function c(e,n,o=void 0){try{if(n.length===1&&n[0]==="_self")return e;for(let s=0;s<n.length;s++){if(typeof e!="object"||e===null)return o;const r=n[s];if(r.endsWith("[]")){const u=r.slice(0,-2);if(u in e){const f=e[u];return Array.isArray(f)?f.map(h=>c(h,n.slice(s+1),o)):o}else return o}else e=e[r]}return e}catch(s){if(s instanceof TypeError)return o;throw s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ac(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wx(e){const n={},o=c(e,["operationName"]);o!=null&&p(n,["operationName"],o);const s=c(e,["resourceName"]);return s!=null&&p(n,["_url","resourceName"],s),n}function jx(e){const n={},o=c(e,["name"]);o!=null&&p(n,["name"],o);const s=c(e,["metadata"]);s!=null&&p(n,["metadata"],s);const r=c(e,["done"]);r!=null&&p(n,["done"],r);const u=c(e,["error"]);u!=null&&p(n,["error"],u);const f=c(e,["response","generateVideoResponse"]);return f!=null&&p(n,["response"],tT(f)),n}function eT(e){const n={},o=c(e,["name"]);o!=null&&p(n,["name"],o);const s=c(e,["metadata"]);s!=null&&p(n,["metadata"],s);const r=c(e,["done"]);r!=null&&p(n,["done"],r);const u=c(e,["error"]);u!=null&&p(n,["error"],u);const f=c(e,["response"]);return f!=null&&p(n,["response"],nT(f)),n}function tT(e){const n={},o=c(e,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>iT(f))),p(n,["generatedVideos"],u)}const s=c(e,["raiMediaFilteredCount"]);s!=null&&p(n,["raiMediaFilteredCount"],s);const r=c(e,["raiMediaFilteredReasons"]);return r!=null&&p(n,["raiMediaFilteredReasons"],r),n}function nT(e){const n={},o=c(e,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>oT(f))),p(n,["generatedVideos"],u)}const s=c(e,["raiMediaFilteredCount"]);s!=null&&p(n,["raiMediaFilteredCount"],s);const r=c(e,["raiMediaFilteredReasons"]);return r!=null&&p(n,["raiMediaFilteredReasons"],r),n}function iT(e){const n={},o=c(e,["_self"]);return o!=null&&p(n,["video"],rT(o)),n}function oT(e){const n={},o=c(e,["_self"]);return o!=null&&p(n,["video"],aT(o)),n}function lT(e){const n={},o=c(e,["operationName"]);return o!=null&&p(n,["_url","operationName"],o),n}function sT(e){const n={},o=c(e,["operationName"]);return o!=null&&p(n,["_url","operationName"],o),n}function rT(e){const n={},o=c(e,["video","uri"]);o!=null&&p(n,["uri"],o);const s=c(e,["video","encodedVideo"]);s!=null&&p(n,["videoBytes"],Ac(s));const r=c(e,["encoding"]);return r!=null&&p(n,["mimeType"],r),n}function aT(e){const n={},o=c(e,["gcsUri"]);o!=null&&p(n,["uri"],o);const s=c(e,["bytesBase64Encoded"]);s!=null&&p(n,["videoBytes"],Ac(s));const r=c(e,["mimeType"]);return r!=null&&p(n,["mimeType"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Oh;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Oh||(Oh={}));var Fh;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(Fh||(Fh={}));var Ci;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(Ci||(Ci={}));var $h;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})($h||($h={}));var Yh;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Yh||(Yh={}));var Jh;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Jh||(Jh={}));var Kh;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Kh||(Kh={}));var Xh;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(Xh||(Xh={}));var Qh;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Qh||(Qh={}));var Zh;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Zh||(Zh={}));var Wh;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"})(Wh||(Wh={}));var jh;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(jh||(jh={}));var em;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(em||(em={}));var tm;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY"})(tm||(tm={}));var nm;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(nm||(nm={}));var Tr;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Tr||(Tr={}));var im;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(im||(im={}));var ac;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ac||(ac={}));var om;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(om||(om={}));var lm;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(lm||(lm={}));var sm;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V"})(sm||(sm={}));var rm;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(rm||(rm={}));var am;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(am||(am={}));var um;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(um||(um={}));var cm;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(cm||(cm={}));var fm;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(fm||(fm={}));var dm;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(dm||(dm={}));var pm;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(pm||(pm={}));var hm;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(hm||(hm={}));var mm;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(mm||(mm={}));var gm;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(gm||(gm={}));var ym;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ym||(ym={}));var vm;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(vm||(vm={}));var xm;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(xm||(xm={}));var Tm;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(Tm||(Tm={}));var Cm;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Cm||(Cm={}));var Sm;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(Sm||(Sm={}));var Em;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(Em||(Em={}));var _m;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(_m||(_m={}));var Am;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Am||(Am={}));var bm;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(bm||(bm={}));var Mm;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Mm||(Mm={}));var Nm;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Nm||(Nm={}));var Rm;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(Rm||(Rm={}));var Im;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Im||(Im={}));var Dm;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(Dm||(Dm={}));var wm;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(wm||(wm={}));var km;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(km||(km={}));var Ho;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Ho||(Ho={}));class uc{constructor(n){const o={};for(const s of n.headers.entries())o[s[0]]=s[1];this.headers=o,this.responseInternal=n}json(){return this.responseInternal.json()}}class Fl{get text(){var n,o,s,r,u,f,h,g;if(((r=(s=(o=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const x=[];for(const T of(g=(h=(f=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[E,b]of Object.entries(T))E!=="text"&&E!=="thought"&&(b!==null||b!==void 0)&&x.push(E);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;v=!0,m+=T.text}}return x.length>0&&console.warn(`there are non-text parts ${x} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var n,o,s,r,u,f,h,g;if(((r=(s=(o=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const x of(g=(h=(f=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[T,E]of Object.entries(x))T!=="inlineData"&&(E!==null||E!==void 0)&&v.push(T);x.inlineData&&typeof x.inlineData.data=="string"&&(m+=atob(x.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var n,o,s,r,u,f,h,g;if(((r=(s=(o=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(h=(f=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var n,o,s,r,u,f,h,g,m;if(((r=(s=(o=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(h=(f=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(x=>x.executableCode).map(x=>x.executableCode).filter(x=>x!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var n,o,s,r,u,f,h,g,m;if(((r=(s=(o=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(h=(f=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(x=>x.codeExecutionResult).map(x=>x.codeExecutionResult).filter(x=>x!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class Um{}class Pm{}class uT{}class cT{}class fT{}class dT{}class Lm{}class Gm{}class Hm{}class pT{}class Cr{_fromAPIResponse({apiResponse:n,isVertexAI:o}){const s=new Cr;let r;const u=n;return o?r=eT(u):r=jx(u),Object.assign(s,r),s}}class Bm{}class qm{}class zm{}class hT{}class mT{}class gT{}class Vm{}class yT{get text(){var n,o,s;let r="",u=!1;const f=[];for(const h of(s=(o=(n=this.serverContent)===null||n===void 0?void 0:n.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&m!==null&&f.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;u=!0,r+=h.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?r:void 0}get data(){var n,o,s;let r="";const u=[];for(const f of(s=(o=(n=this.serverContent)===null||n===void 0?void 0:n.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[h,g]of Object.entries(f))h!=="inlineData"&&g!==null&&u.push(h);f.inlineData&&typeof f.inlineData.data=="string"&&(r+=atob(f.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class vT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ve(e,n){if(!n||typeof n!="string")throw new Error("model is required and must be a string");if(e.isVertexAI()){if(n.startsWith("publishers/")||n.startsWith("projects/")||n.startsWith("models/"))return n;if(n.indexOf("/")>=0){const o=n.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${n}`}else return n.startsWith("models/")||n.startsWith("tunedModels/")?n:`models/${n}`}function Dg(e,n){const o=Ve(e,n);return o?o.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${o}`:o.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${o}`:o:""}function wg(e){return Array.isArray(e)?e.map(n=>Sr(n)):[Sr(e)]}function Sr(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function kg(e){const n=Sr(e);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function Ug(e){const n=Sr(e);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function Om(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Pg(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(n=>Om(n)):[Om(e)]}function cc(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function Fm(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function $m(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function It(e){if(e==null)throw new Error("ContentUnion is required");return cc(e)?e:{role:"user",parts:Pg(e)}}function bc(e,n){if(!n)return[];if(e.isVertexAI()&&Array.isArray(n))return n.flatMap(o=>{const s=It(o);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(e.isVertexAI()){const o=It(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(n)?n.map(o=>It(o)):[It(n)]}function hn(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Fm(e)||$m(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[It(e)]}const n=[],o=[],s=cc(e[0]);for(const r of e){const u=cc(r);if(u!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)n.push(r);else{if(Fm(r)||$m(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(r)}}return s||n.push({role:"user",parts:Pg(o)}),n}function xT(e,n){e.includes("null")&&(n.nullable=!0);const o=e.filter(s=>s!=="null");if(o.length===1)n.type=Object.values(Ci).includes(o[0].toUpperCase())?o[0].toUpperCase():Ci.TYPE_UNSPECIFIED;else{n.anyOf=[];for(const s of o)n.anyOf.push({type:Object.values(Ci).includes(s.toUpperCase())?s.toUpperCase():Ci.TYPE_UNSPECIFIED})}}function Vo(e){const n={},o=["items"],s=["anyOf"],r=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const u=e.anyOf;u!=null&&u.length==2&&(u[0].type==="null"?(n.nullable=!0,e=u[1]):u[1].type==="null"&&(n.nullable=!0,e=u[0])),e.type instanceof Array&&xT(e.type,n);for(const[f,h]of Object.entries(e))if(h!=null)if(f=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;n.type=Object.values(Ci).includes(h.toUpperCase())?h.toUpperCase():Ci.TYPE_UNSPECIFIED}else if(o.includes(f))n[f]=Vo(h);else if(s.includes(f)){const g=[];for(const m of h){if(m.type=="null"){n.nullable=!0;continue}g.push(Vo(m))}n[f]=g}else if(r.includes(f)){const g={};for(const[m,v]of Object.entries(h))g[m]=Vo(v);n[f]=g}else{if(f==="additionalProperties")continue;n[f]=h}return n}function Mc(e){return Vo(e)}function Nc(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Rc(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Ko(e){if(e.functionDeclarations)for(const n of e.functionDeclarations)n.parameters&&(Object.keys(n.parameters).includes("$schema")?n.parametersJsonSchema||(n.parametersJsonSchema=n.parameters,delete n.parameters):n.parameters=Vo(n.parameters)),n.response&&(Object.keys(n.response).includes("$schema")?n.responseJsonSchema||(n.responseJsonSchema=n.response,delete n.response):n.response=Vo(n.response));return e}function Xo(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const n=[];for(const o of e)n.push(o);return n}function TT(e,n,o,s=1){const r=!n.startsWith(`${o}/`)&&n.split("/").length===s;return e.isVertexAI()?n.startsWith("projects/")?n:n.startsWith("locations/")?`projects/${e.getProject()}/${n}`:n.startsWith(`${o}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:r?`projects/${e.getProject()}/locations/${e.getLocation()}/${o}/${n}`:n:r?`${o}/${n}`:n}function Qn(e,n){if(typeof n!="string")throw new Error("name must be a string");return TT(e,n,"cachedContents")}function Lg(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function _i(e){return Ac(e)}function CT(e){return e!=null&&typeof e=="object"&&"name"in e}function ST(e){return e!=null&&typeof e=="object"&&"video"in e}function ET(e){return e!=null&&typeof e=="object"&&"uri"in e}function Gg(e){var n;let o;if(CT(e)&&(o=e.name),!(ET(e)&&(o=e.uri,o===void 0))&&!(ST(e)&&(o=(n=e.video)===null||n===void 0?void 0:n.uri,o===void 0))){if(typeof e=="string"&&(o=e),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const r=o.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${o}`);o=r[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function Hg(e,n){let o;return e.isVertexAI()?o=n?"publishers/google/models":"models":o=n?"models":"tunedModels",o}function Bg(e){for(const n of["models","tunedModels","publisherModels"])if(_T(e,n))return e[n];return[]}function _T(e,n){return e!==null&&typeof e=="object"&&n in e}function AT(e,n={}){const o=e,s={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(s.responseJsonSchema=o.outputSchema),n.behavior&&(s.behavior=n.behavior),{functionDeclarations:[s]}}function bT(e,n={}){const o=[],s=new Set;for(const r of e){const u=r.name;if(s.has(u))throw new Error(`Duplicate function name ${u} found in MCP tools. Please ensure function names are unique.`);s.add(u);const f=AT(r,n);f.functionDeclarations&&o.push(...f.functionDeclarations)}return{functionDeclarations:o}}function qg(e,n){let o;if(typeof n=="string")if(e.isVertexAI())if(n.startsWith("gs://"))o={format:"jsonl",gcsUri:[n]};else if(n.startsWith("bq://"))o={format:"bigquery",bigqueryUri:n};else throw new Error(`Unsupported string source for Vertex AI: ${n}`);else if(n.startsWith("files/"))o={fileName:n};else throw new Error(`Unsupported string source for Gemini API: ${n}`);else if(Array.isArray(n)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:n}}else o=n;const s=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,r=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(e.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function MT(e){if(typeof e!="string")return e;const n=e;if(n.startsWith("gs://"))return{format:"jsonl",gcsUri:n};if(n.startsWith("bq://"))return{format:"bigquery",bigqueryUri:n};throw new Error(`Unsupported destination: ${n}`)}function zg(e){if(typeof e!="object"||e===null)return{};const n=e,o=n.inlinedResponses;if(typeof o!="object"||o===null)return e;const r=o.inlinedResponses;if(!Array.isArray(r)||r.length===0)return e;let u=!1;for(const f of r){if(typeof f!="object"||f===null)continue;const g=f.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){u=!0;break}}return u&&(n.inlinedEmbedContentResponses=n.inlinedResponses,delete n.inlinedResponses),e}function Qo(e,n){const o=n;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function Vg(e){const n=e;return n==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":n==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":n==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":n==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":n==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":n==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":n==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NT(e){const n={},o=c(e,["responsesFile"]);o!=null&&p(n,["fileName"],o);const s=c(e,["inlinedResponses","inlinedResponses"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>iC(f))),p(n,["inlinedResponses"],u)}const r=c(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),p(n,["inlinedEmbedContentResponses"],u)}return n}function RT(e){const n={},o=c(e,["predictionsFormat"]);o!=null&&p(n,["format"],o);const s=c(e,["gcsDestination","outputUriPrefix"]);s!=null&&p(n,["gcsUri"],s);const r=c(e,["bigqueryDestination","outputUri"]);return r!=null&&p(n,["bigqueryUri"],r),n}function IT(e){const n={},o=c(e,["format"]);o!=null&&p(n,["predictionsFormat"],o);const s=c(e,["gcsUri"]);s!=null&&p(n,["gcsDestination","outputUriPrefix"],s);const r=c(e,["bigqueryUri"]);if(r!=null&&p(n,["bigqueryDestination","outputUri"],r),c(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return n}function $l(e){const n={},o=c(e,["name"]);o!=null&&p(n,["name"],o);const s=c(e,["metadata","displayName"]);s!=null&&p(n,["displayName"],s);const r=c(e,["metadata","state"]);r!=null&&p(n,["state"],Vg(r));const u=c(e,["metadata","createTime"]);u!=null&&p(n,["createTime"],u);const f=c(e,["metadata","endTime"]);f!=null&&p(n,["endTime"],f);const h=c(e,["metadata","updateTime"]);h!=null&&p(n,["updateTime"],h);const g=c(e,["metadata","model"]);g!=null&&p(n,["model"],g);const m=c(e,["metadata","output"]);return m!=null&&p(n,["dest"],NT(zg(m))),n}function fc(e){const n={},o=c(e,["name"]);o!=null&&p(n,["name"],o);const s=c(e,["displayName"]);s!=null&&p(n,["displayName"],s);const r=c(e,["state"]);r!=null&&p(n,["state"],Vg(r));const u=c(e,["error"]);u!=null&&p(n,["error"],u);const f=c(e,["createTime"]);f!=null&&p(n,["createTime"],f);const h=c(e,["startTime"]);h!=null&&p(n,["startTime"],h);const g=c(e,["endTime"]);g!=null&&p(n,["endTime"],g);const m=c(e,["updateTime"]);m!=null&&p(n,["updateTime"],m);const v=c(e,["model"]);v!=null&&p(n,["model"],v);const x=c(e,["inputConfig"]);x!=null&&p(n,["src"],DT(x));const T=c(e,["outputConfig"]);return T!=null&&p(n,["dest"],RT(zg(T))),n}function DT(e){const n={},o=c(e,["instancesFormat"]);o!=null&&p(n,["format"],o);const s=c(e,["gcsSource","uris"]);s!=null&&p(n,["gcsUri"],s);const r=c(e,["bigquerySource","inputUri"]);return r!=null&&p(n,["bigqueryUri"],r),n}function wT(e,n){const o={};if(c(n,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(n,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=c(n,["fileName"]);s!=null&&p(o,["fileName"],s);const r=c(n,["inlinedRequests"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>nC(e,f))),p(o,["requests","requests"],u)}return o}function kT(e){const n={},o=c(e,["format"]);o!=null&&p(n,["instancesFormat"],o);const s=c(e,["gcsUri"]);s!=null&&p(n,["gcsSource","uris"],s);const r=c(e,["bigqueryUri"]);if(r!=null&&p(n,["bigquerySource","inputUri"],r),c(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return n}function UT(e){const n={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["data"]);o!=null&&p(n,["data"],o);const s=c(e,["mimeType"]);return s!=null&&p(n,["mimeType"],s),n}function PT(e,n){const o={},s=c(n,["name"]);return s!=null&&p(o,["_url","name"],Qo(e,s)),o}function LT(e,n){const o={},s=c(n,["name"]);return s!=null&&p(o,["_url","name"],Qo(e,s)),o}function GT(e){const n={},o=c(e,["content"]);o!=null&&p(n,["content"],o);const s=c(e,["citationMetadata"]);s!=null&&p(n,["citationMetadata"],HT(s));const r=c(e,["tokenCount"]);r!=null&&p(n,["tokenCount"],r);const u=c(e,["finishReason"]);u!=null&&p(n,["finishReason"],u);const f=c(e,["urlContextMetadata"]);f!=null&&p(n,["urlContextMetadata"],f);const h=c(e,["avgLogprobs"]);h!=null&&p(n,["avgLogprobs"],h);const g=c(e,["groundingMetadata"]);g!=null&&p(n,["groundingMetadata"],g);const m=c(e,["index"]);m!=null&&p(n,["index"],m);const v=c(e,["logprobsResult"]);v!=null&&p(n,["logprobsResult"],v);const x=c(e,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(E=>E)),p(n,["safetyRatings"],T)}return n}function HT(e){const n={},o=c(e,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),p(n,["citations"],s)}return n}function Og(e){const n={},o=c(e,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>cC(u))),p(n,["parts"],r)}const s=c(e,["role"]);return s!=null&&p(n,["role"],s),n}function BT(e,n){const o={},s=c(e,["displayName"]);if(n!==void 0&&s!=null&&p(n,["batch","displayName"],s),c(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function qT(e,n){const o={},s=c(e,["displayName"]);n!==void 0&&s!=null&&p(n,["displayName"],s);const r=c(e,["dest"]);return n!==void 0&&r!=null&&p(n,["outputConfig"],IT(MT(r))),o}function Ym(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["src"]);r!=null&&p(o,["batch","inputConfig"],wT(e,qg(e,r)));const u=c(n,["config"]);return u!=null&&BT(u,o),o}function zT(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["model"],Ve(e,s));const r=c(n,["src"]);r!=null&&p(o,["inputConfig"],kT(qg(e,r)));const u=c(n,["config"]);return u!=null&&qT(u,o),o}function VT(e,n){const o={},s=c(e,["displayName"]);return n!==void 0&&s!=null&&p(n,["batch","displayName"],s),o}function tc(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["src"]);r!=null&&p(o,["batch","inputConfig"],XT(e,r));const u=c(n,["config"]);return u!=null&&VT(u,o),o}function OT(e,n){const o={},s=c(n,["name"]);return s!=null&&p(o,["_url","name"],Qo(e,s)),o}function FT(e,n){const o={},s=c(n,["name"]);return s!=null&&p(o,["_url","name"],Qo(e,s)),o}function $T(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["name"]);s!=null&&p(n,["name"],s);const r=c(e,["done"]);r!=null&&p(n,["done"],r);const u=c(e,["error"]);return u!=null&&p(n,["error"],u),n}function YT(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["name"]);s!=null&&p(n,["name"],s);const r=c(e,["done"]);r!=null&&p(n,["done"],r);const u=c(e,["error"]);return u!=null&&p(n,["error"],u),n}function JT(e,n){const o={},s=c(n,["contents"]);if(s!=null){let u=bc(e,s);Array.isArray(u)&&(u=u.map(f=>f)),p(o,["requests[]","request","content"],u)}const r=c(n,["config"]);return r!=null&&p(o,["_self"],KT(r,o)),o}function KT(e,n){const o={},s=c(e,["taskType"]);n!==void 0&&s!=null&&p(n,["requests[]","taskType"],s);const r=c(e,["title"]);n!==void 0&&r!=null&&p(n,["requests[]","title"],r);const u=c(e,["outputDimensionality"]);if(n!==void 0&&u!=null&&p(n,["requests[]","outputDimensionality"],u),c(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function XT(e,n){const o={},s=c(n,["fileName"]);s!=null&&p(o,["file_name"],s);const r=c(n,["inlinedRequests"]);return r!=null&&p(o,["requests"],JT(e,r)),o}function QT(e){const n={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["fileUri"]);o!=null&&p(n,["fileUri"],o);const s=c(e,["mimeType"]);return s!=null&&p(n,["mimeType"],s),n}function ZT(e,n,o){const s={},r=c(n,["systemInstruction"]);o!==void 0&&r!=null&&p(o,["systemInstruction"],Og(It(r)));const u=c(n,["temperature"]);u!=null&&p(s,["temperature"],u);const f=c(n,["topP"]);f!=null&&p(s,["topP"],f);const h=c(n,["topK"]);h!=null&&p(s,["topK"],h);const g=c(n,["candidateCount"]);g!=null&&p(s,["candidateCount"],g);const m=c(n,["maxOutputTokens"]);m!=null&&p(s,["maxOutputTokens"],m);const v=c(n,["stopSequences"]);v!=null&&p(s,["stopSequences"],v);const x=c(n,["responseLogprobs"]);x!=null&&p(s,["responseLogprobs"],x);const T=c(n,["logprobs"]);T!=null&&p(s,["logprobs"],T);const E=c(n,["presencePenalty"]);E!=null&&p(s,["presencePenalty"],E);const b=c(n,["frequencyPenalty"]);b!=null&&p(s,["frequencyPenalty"],b);const A=c(n,["seed"]);A!=null&&p(s,["seed"],A);const q=c(n,["responseMimeType"]);q!=null&&p(s,["responseMimeType"],q);const w=c(n,["responseSchema"]);w!=null&&p(s,["responseSchema"],Mc(w));const M=c(n,["responseJsonSchema"]);if(M!=null&&p(s,["responseJsonSchema"],M),c(n,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(n,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=c(n,["safetySettings"]);if(o!==void 0&&k!=null){let O=k;Array.isArray(O)&&(O=O.map(Ce=>fC(Ce))),p(o,["safetySettings"],O)}const P=c(n,["tools"]);if(o!==void 0&&P!=null){let O=Xo(P);Array.isArray(O)&&(O=O.map(Ce=>dC(Ko(Ce)))),p(o,["tools"],O)}const N=c(n,["toolConfig"]);if(o!==void 0&&N!=null&&p(o,["toolConfig"],N),c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=c(n,["cachedContent"]);o!==void 0&&$!=null&&p(o,["cachedContent"],Qn(e,$));const oe=c(n,["responseModalities"]);oe!=null&&p(s,["responseModalities"],oe);const ce=c(n,["mediaResolution"]);ce!=null&&p(s,["mediaResolution"],ce);const Y=c(n,["speechConfig"]);if(Y!=null&&p(s,["speechConfig"],Nc(Y)),c(n,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const de=c(n,["thinkingConfig"]);de!=null&&p(s,["thinkingConfig"],de);const Ee=c(n,["imageConfig"]);return Ee!=null&&p(s,["imageConfig"],Ee),s}function WT(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(m=>GT(m))),p(n,["candidates"],g)}const r=c(e,["modelVersion"]);r!=null&&p(n,["modelVersion"],r);const u=c(e,["promptFeedback"]);u!=null&&p(n,["promptFeedback"],u);const f=c(e,["responseId"]);f!=null&&p(n,["responseId"],f);const h=c(e,["usageMetadata"]);return h!=null&&p(n,["usageMetadata"],h),n}function jT(e,n){const o={},s=c(n,["name"]);return s!=null&&p(o,["_url","name"],Qo(e,s)),o}function eC(e,n){const o={},s=c(n,["name"]);return s!=null&&p(o,["_url","name"],Qo(e,s)),o}function tC(e){const n={},o=c(e,["timeRangeFilter"]);if(o!=null&&p(n,["timeRangeFilter"],o),c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return n}function nC(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["request","model"],Ve(e,s));const r=c(n,["contents"]);if(r!=null){let f=hn(r);Array.isArray(f)&&(f=f.map(h=>Og(h))),p(o,["request","contents"],f)}const u=c(n,["config"]);return u!=null&&p(o,["request","generationConfig"],ZT(e,u,c(o,["request"],{}))),o}function iC(e){const n={},o=c(e,["response"]);o!=null&&p(n,["response"],WT(o));const s=c(e,["error"]);return s!=null&&p(n,["error"],s),n}function oC(e,n){const o={},s=c(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const r=c(e,["pageToken"]);if(n!==void 0&&r!=null&&p(n,["_query","pageToken"],r),c(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function lC(e,n){const o={},s=c(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const r=c(e,["pageToken"]);n!==void 0&&r!=null&&p(n,["_query","pageToken"],r);const u=c(e,["filter"]);return n!==void 0&&u!=null&&p(n,["_query","filter"],u),o}function sC(e){const n={},o=c(e,["config"]);return o!=null&&oC(o,n),n}function rC(e){const n={},o=c(e,["config"]);return o!=null&&lC(o,n),n}function aC(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const r=c(e,["operations"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>$l(f))),p(n,["batchJobs"],u)}return n}function uC(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const r=c(e,["batchPredictionJobs"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>fc(f))),p(n,["batchJobs"],u)}return n}function cC(e){const n={},o=c(e,["videoMetadata"]);o!=null&&p(n,["videoMetadata"],o);const s=c(e,["thought"]);s!=null&&p(n,["thought"],s);const r=c(e,["inlineData"]);r!=null&&p(n,["inlineData"],UT(r));const u=c(e,["fileData"]);u!=null&&p(n,["fileData"],QT(u));const f=c(e,["thoughtSignature"]);f!=null&&p(n,["thoughtSignature"],f);const h=c(e,["functionCall"]);h!=null&&p(n,["functionCall"],h);const g=c(e,["codeExecutionResult"]);g!=null&&p(n,["codeExecutionResult"],g);const m=c(e,["executableCode"]);m!=null&&p(n,["executableCode"],m);const v=c(e,["functionResponse"]);v!=null&&p(n,["functionResponse"],v);const x=c(e,["text"]);return x!=null&&p(n,["text"],x),n}function fC(e){const n={};if(c(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=c(e,["category"]);o!=null&&p(n,["category"],o);const s=c(e,["threshold"]);return s!=null&&p(n,["threshold"],s),n}function dC(e){const n={},o=c(e,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>m)),p(n,["functionDeclarations"],g)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(e,["googleSearch"]);s!=null&&p(n,["googleSearch"],tC(s));const r=c(e,["googleSearchRetrieval"]);if(r!=null&&p(n,["googleSearchRetrieval"],r),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const u=c(e,["urlContext"]);u!=null&&p(n,["urlContext"],u);const f=c(e,["computerUse"]);f!=null&&p(n,["computerUse"],f);const h=c(e,["codeExecution"]);return h!=null&&p(n,["codeExecution"],h),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $i;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})($i||($i={}));class es{constructor(n,o,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(n,s,r)}init(n,o,s){var r,u;this.nameInternal=n,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o==null?void 0:o.sdkHttpResponse,this.idxInternal=0;let f={config:{}};!s||Object.keys(s).length===0?f={config:{}}:typeof s=="object"?f=Object.assign({},s):f=s,f.config&&(f.config.pageToken=o.nextPageToken),this.paramsInternal=f,this.pageInternalSize=(u=(r=f.config)===null||r===void 0?void 0:r.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(n){this.init(this.nameInternal,n,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(n){return this.pageInternal[n]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const n=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:n,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const n=await this.requestInternal(this.params);return this.initNextPage(n),this.page}hasNextPage(){var n;return((n=this.params.config)===null||n===void 0?void 0:n.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pC extends Yi{constructor(n){super(),this.apiClient=n,this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{var s,r;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(o.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(o);const h=this.createInlinedEmbedContentRequest(o),g=h.path,m=h.body,v=tc(this.apiClient,o)._query||{};return this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=o.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=o.config)===null||r===void 0?void 0:r.abortSignal}).then(T=>T.json()).then(T=>$l(T))},this.list=async(o={})=>new es($i.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(o),o)}createInlinedGenerateContentRequest(n){const o=Ym(this.apiClient,n),s=o._url,r=me("{model}:batchGenerateContent",s),h=o.batch.inputConfig.requests,g=h.requests,m=[];for(const v of g){const x=Object.assign({},v);if(x.systemInstruction){const T=x.systemInstruction;delete x.systemInstruction;const E=x.request;E.systemInstruction=T,x.request=E}m.push(x)}return h.requests=m,delete o.config,delete o._url,delete o._query,{path:r,body:o}}createInlinedEmbedContentRequest(n){const o=tc(this.apiClient,n),s=o._url,r=me("{model}:asyncBatchEmbedContent",s),h=o.batch.inputConfig.requests,g=h.requests,m=[];delete h.config;for(const v of g){const x=Object.assign({},v),T=x.request;for(const E in x)E!=="request"&&(T[E]=x[E],delete x[E]);m.push(x)}return h.requests=m,delete o.config,delete o._url,delete o._query,{path:r,body:o}}getGcsUri(n){if(typeof n=="string")return n.startsWith("gs://")?n:void 0;if(!Array.isArray(n)&&n.gcsUri&&n.gcsUri.length>0)return n.gcsUri[0]}getBigqueryUri(n){if(typeof n=="string")return n.startsWith("bq://")?n:void 0;if(!Array.isArray(n))return n.bigqueryUri}formatDestination(n,o){const s=o?Object.assign({},o):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const u=this.getGcsUri(n),f=this.getBigqueryUri(n);if(u)u.endsWith(".jsonl")?s.dest=`${u.slice(0,-6)}/dest`:s.dest=`${u}_dest_${r}`;else if(f)s.dest=`${f}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=zT(this.apiClient,n);return h=me("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>fc(v))}else{const m=Ym(this.apiClient,n);return h=me("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f.then(v=>$l(v))}}async createEmbeddingsInternal(n){var o,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=tc(this.apiClient,n);return u=me("{model}:asyncBatchEmbedContent",h._url),f=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>$l(g))}}async get(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=eC(this.apiClient,n);return h=me("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>fc(v))}else{const m=jT(this.apiClient,n);return h=me("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f.then(v=>$l(v))}}async cancel(n){var o,s,r,u;let f="",h={};if(this.apiClient.isVertexAI()){const g=LT(this.apiClient,n);f=me("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=PT(this.apiClient,n);f=me("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal})}}async listInternal(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=rC(n);return h=me("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=uC(v),T=new Vm;return Object.assign(T,x),T})}else{const m=sC(n);return h=me("batches",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=aC(v),T=new Vm;return Object.assign(T,x),T})}}async delete(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=FT(this.apiClient,n);return h=me("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>YT(v))}else{const m=OT(this.apiClient,n);return h=me("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>$T(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hC(e){const n={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["data"]);o!=null&&p(n,["data"],o);const s=c(e,["mimeType"]);return s!=null&&p(n,["mimeType"],s),n}function Jm(e){const n={},o=c(e,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>UC(u))),p(n,["parts"],r)}const s=c(e,["role"]);return s!=null&&p(n,["role"],s),n}function mC(e,n){const o={},s=c(e,["ttl"]);n!==void 0&&s!=null&&p(n,["ttl"],s);const r=c(e,["expireTime"]);n!==void 0&&r!=null&&p(n,["expireTime"],r);const u=c(e,["displayName"]);n!==void 0&&u!=null&&p(n,["displayName"],u);const f=c(e,["contents"]);if(n!==void 0&&f!=null){let v=hn(f);Array.isArray(v)&&(v=v.map(x=>Jm(x))),p(n,["contents"],v)}const h=c(e,["systemInstruction"]);n!==void 0&&h!=null&&p(n,["systemInstruction"],Jm(It(h)));const g=c(e,["tools"]);if(n!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(x=>PC(x))),p(n,["tools"],v)}const m=c(e,["toolConfig"]);if(n!==void 0&&m!=null&&p(n,["toolConfig"],m),c(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function gC(e,n){const o={},s=c(e,["ttl"]);n!==void 0&&s!=null&&p(n,["ttl"],s);const r=c(e,["expireTime"]);n!==void 0&&r!=null&&p(n,["expireTime"],r);const u=c(e,["displayName"]);n!==void 0&&u!=null&&p(n,["displayName"],u);const f=c(e,["contents"]);if(n!==void 0&&f!=null){let x=hn(f);Array.isArray(x)&&(x=x.map(T=>T)),p(n,["contents"],x)}const h=c(e,["systemInstruction"]);n!==void 0&&h!=null&&p(n,["systemInstruction"],It(h));const g=c(e,["tools"]);if(n!==void 0&&g!=null){let x=g;Array.isArray(x)&&(x=x.map(T=>LC(T))),p(n,["tools"],x)}const m=c(e,["toolConfig"]);n!==void 0&&m!=null&&p(n,["toolConfig"],m);const v=c(e,["kmsKeyName"]);return n!==void 0&&v!=null&&p(n,["encryption_spec","kmsKeyName"],v),o}function yC(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["model"],Dg(e,s));const r=c(n,["config"]);return r!=null&&mC(r,o),o}function vC(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["model"],Dg(e,s));const r=c(n,["config"]);return r!=null&&gC(r,o),o}function xC(e,n){const o={},s=c(n,["name"]);return s!=null&&p(o,["_url","name"],Qn(e,s)),o}function TC(e,n){const o={},s=c(n,["name"]);return s!=null&&p(o,["_url","name"],Qn(e,s)),o}function CC(e){const n={},o=c(e,["sdkHttpResponse"]);return o!=null&&p(n,["sdkHttpResponse"],o),n}function SC(e){const n={},o=c(e,["sdkHttpResponse"]);return o!=null&&p(n,["sdkHttpResponse"],o),n}function EC(e){const n={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["fileUri"]);o!=null&&p(n,["fileUri"],o);const s=c(e,["mimeType"]);return s!=null&&p(n,["mimeType"],s),n}function _C(e){const n={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(e,["description"]);o!=null&&p(n,["description"],o);const s=c(e,["name"]);s!=null&&p(n,["name"],s);const r=c(e,["parameters"]);r!=null&&p(n,["parameters"],r);const u=c(e,["parametersJsonSchema"]);u!=null&&p(n,["parametersJsonSchema"],u);const f=c(e,["response"]);f!=null&&p(n,["response"],f);const h=c(e,["responseJsonSchema"]);return h!=null&&p(n,["responseJsonSchema"],h),n}function AC(e,n){const o={},s=c(n,["name"]);return s!=null&&p(o,["_url","name"],Qn(e,s)),o}function bC(e,n){const o={},s=c(n,["name"]);return s!=null&&p(o,["_url","name"],Qn(e,s)),o}function MC(e){const n={},o=c(e,["timeRangeFilter"]);if(o!=null&&p(n,["timeRangeFilter"],o),c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return n}function NC(e,n){const o={},s=c(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const r=c(e,["pageToken"]);return n!==void 0&&r!=null&&p(n,["_query","pageToken"],r),o}function RC(e,n){const o={},s=c(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const r=c(e,["pageToken"]);return n!==void 0&&r!=null&&p(n,["_query","pageToken"],r),o}function IC(e){const n={},o=c(e,["config"]);return o!=null&&NC(o,n),n}function DC(e){const n={},o=c(e,["config"]);return o!=null&&RC(o,n),n}function wC(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const r=c(e,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),p(n,["cachedContents"],u)}return n}function kC(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const r=c(e,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),p(n,["cachedContents"],u)}return n}function UC(e){const n={},o=c(e,["videoMetadata"]);o!=null&&p(n,["videoMetadata"],o);const s=c(e,["thought"]);s!=null&&p(n,["thought"],s);const r=c(e,["inlineData"]);r!=null&&p(n,["inlineData"],hC(r));const u=c(e,["fileData"]);u!=null&&p(n,["fileData"],EC(u));const f=c(e,["thoughtSignature"]);f!=null&&p(n,["thoughtSignature"],f);const h=c(e,["functionCall"]);h!=null&&p(n,["functionCall"],h);const g=c(e,["codeExecutionResult"]);g!=null&&p(n,["codeExecutionResult"],g);const m=c(e,["executableCode"]);m!=null&&p(n,["executableCode"],m);const v=c(e,["functionResponse"]);v!=null&&p(n,["functionResponse"],v);const x=c(e,["text"]);return x!=null&&p(n,["text"],x),n}function PC(e){const n={},o=c(e,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>m)),p(n,["functionDeclarations"],g)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(e,["googleSearch"]);s!=null&&p(n,["googleSearch"],MC(s));const r=c(e,["googleSearchRetrieval"]);if(r!=null&&p(n,["googleSearchRetrieval"],r),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const u=c(e,["urlContext"]);u!=null&&p(n,["urlContext"],u);const f=c(e,["computerUse"]);f!=null&&p(n,["computerUse"],f);const h=c(e,["codeExecution"]);return h!=null&&p(n,["codeExecution"],h),n}function LC(e){const n={},o=c(e,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(T=>_C(T))),p(n,["functionDeclarations"],x)}const s=c(e,["retrieval"]);s!=null&&p(n,["retrieval"],s);const r=c(e,["googleSearch"]);r!=null&&p(n,["googleSearch"],r);const u=c(e,["googleSearchRetrieval"]);u!=null&&p(n,["googleSearchRetrieval"],u);const f=c(e,["enterpriseWebSearch"]);f!=null&&p(n,["enterpriseWebSearch"],f);const h=c(e,["googleMaps"]);h!=null&&p(n,["googleMaps"],h);const g=c(e,["urlContext"]);g!=null&&p(n,["urlContext"],g);const m=c(e,["computerUse"]);m!=null&&p(n,["computerUse"],m);const v=c(e,["codeExecution"]);return v!=null&&p(n,["codeExecution"],v),n}function GC(e,n){const o={},s=c(e,["ttl"]);n!==void 0&&s!=null&&p(n,["ttl"],s);const r=c(e,["expireTime"]);return n!==void 0&&r!=null&&p(n,["expireTime"],r),o}function HC(e,n){const o={},s=c(e,["ttl"]);n!==void 0&&s!=null&&p(n,["ttl"],s);const r=c(e,["expireTime"]);return n!==void 0&&r!=null&&p(n,["expireTime"],r),o}function BC(e,n){const o={},s=c(n,["name"]);s!=null&&p(o,["_url","name"],Qn(e,s));const r=c(n,["config"]);return r!=null&&GC(r,o),o}function qC(e,n){const o={},s=c(n,["name"]);s!=null&&p(o,["_url","name"],Qn(e,s));const r=c(n,["config"]);return r!=null&&HC(r,o),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zC extends Yi{constructor(n){super(),this.apiClient=n,this.list=async(o={})=>new es($i.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(o),o)}async create(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=vC(this.apiClient,n);return h=me("cachedContents",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const m=yC(this.apiClient,n);return h=me("cachedContents",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async get(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=bC(this.apiClient,n);return h=me("{name}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const m=AC(this.apiClient,n);return h=me("{name}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async delete(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=TC(this.apiClient,n);return h=me("{name}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=SC(v),T=new qm;return Object.assign(T,x),T})}else{const m=xC(this.apiClient,n);return h=me("{name}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=CC(v),T=new qm;return Object.assign(T,x),T})}}async update(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=qC(this.apiClient,n);return h=me("{name}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const m=BC(this.apiClient,n);return h=me("{name}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async listInternal(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=DC(n);return h=me("cachedContents",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=kC(v),T=new zm;return Object.assign(T,x),T})}else{const m=IC(n);return h=me("cachedContents",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=wC(v),T=new zm;return Object.assign(T,x),T})}}}function Km(e){var n=typeof Symbol=="function"&&Symbol.iterator,o=n&&e[n],s=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function tt(e){return this instanceof tt?(this.v=e,this):new tt(e)}function Oo(e,n,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o.apply(e,n||[]),r,u=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",f),r[Symbol.asyncIterator]=function(){return this},r;function f(E){return function(b){return Promise.resolve(b).then(E,x)}}function h(E,b){s[E]&&(r[E]=function(A){return new Promise(function(q,w){u.push([E,A,q,w])>1||g(E,A)})},b&&(r[E]=b(r[E])))}function g(E,b){try{m(s[E](b))}catch(A){T(u[0][3],A)}}function m(E){E.value instanceof tt?Promise.resolve(E.value.v).then(v,x):T(u[0][2],E)}function v(E){g("next",E)}function x(E){g("throw",E)}function T(E,b){E(b),u.shift(),u.length&&g(u[0][0],u[0][1])}}function Xl(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e[Symbol.asyncIterator],o;return n?n.call(e):(e=typeof Km=="function"?Km(e):e[Symbol.iterator](),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(u){o[u]=e[u]&&function(f){return new Promise(function(h,g){f=e[u](f),r(h,g,f.done,f.value)})}}function r(u,f,h,g){Promise.resolve(g).then(function(m){u({value:m,done:h})},f)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VC(e){var n;if(e.candidates==null||e.candidates.length===0)return!1;const o=(n=e.candidates[0])===null||n===void 0?void 0:n.content;return o===void 0?!1:Fg(o)}function Fg(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const n of e.parts)if(n===void 0||Object.keys(n).length===0)return!1;return!0}function OC(e){if(e.length!==0){for(const n of e)if(n.role!=="user"&&n.role!=="model")throw new Error(`Role must be user or model, but got ${n.role}.`)}}function Xm(e){if(e===void 0||e.length===0)return[];const n=[],o=e.length;let s=0;for(;s<o;)if(e[s].role==="user")n.push(e[s]),s++;else{const r=[];let u=!0;for(;s<o&&e[s].role==="model";)r.push(e[s]),u&&!Fg(e[s])&&(u=!1),s++;u?n.push(...r):n.pop()}return n}class FC{constructor(n,o){this.modelsModule=n,this.apiClient=o}create(n){return new $C(this.apiClient,this.modelsModule,n.model,n.config,structuredClone(n.history))}}class $C{constructor(n,o,s,r={},u=[]){this.apiClient=n,this.modelsModule=o,this.model=s,this.config=r,this.history=u,this.sendPromise=Promise.resolve(),OC(u)}async sendMessage(n){var o;await this.sendPromise;const s=It(n.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=n.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var u,f,h;const g=await r,m=(f=(u=g.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content,v=g.automaticFunctionCallingHistory,x=this.getHistory(!0).length;let T=[];v!=null&&(T=(h=v.slice(x))!==null&&h!==void 0?h:[]);const E=m?[m]:[];this.recordHistory(s,E,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(n){var o;await this.sendPromise;const s=It(n.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=n.config)!==null&&o!==void 0?o:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const u=await r;return this.processStreamResponse(u,s)}getHistory(n=!1){const o=n?Xm(this.history):this.history;return structuredClone(o)}processStreamResponse(n,o){var s,r;return Oo(this,arguments,function*(){var f,h,g,m;const v=[];try{for(var x=!0,T=Xl(n),E;E=yield tt(T.next()),f=E.done,!f;x=!0){m=E.value,x=!1;const b=m;if(VC(b)){const A=(r=(s=b.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content;A!==void 0&&v.push(A)}yield yield tt(b)}}catch(b){h={error:b}}finally{try{!x&&!f&&(g=T.return)&&(yield tt(g.call(T)))}finally{if(h)throw h.error}}this.recordHistory(o,v)})}recordHistory(n,o,s){let r=[];o.length>0&&o.every(u=>u.role!==void 0)?r=o:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Xm(s)):this.history.push(n),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rr extends Error{constructor(n){super(n.message),this.name="ApiError",this.status=n.status,Object.setPrototypeOf(this,Rr.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YC(e){const n={},o=c(e,["file"]);return o!=null&&p(n,["file"],o),n}function JC(e){const n={},o=c(e,["sdkHttpResponse"]);return o!=null&&p(n,["sdkHttpResponse"],o),n}function KC(e){const n={},o=c(e,["name"]);return o!=null&&p(n,["_url","file"],Gg(o)),n}function XC(e){const n={},o=c(e,["sdkHttpResponse"]);return o!=null&&p(n,["sdkHttpResponse"],o),n}function QC(e){const n={},o=c(e,["name"]);return o!=null&&p(n,["_url","file"],Gg(o)),n}function ZC(e,n){const o={},s=c(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const r=c(e,["pageToken"]);return n!==void 0&&r!=null&&p(n,["_query","pageToken"],r),o}function WC(e){const n={},o=c(e,["config"]);return o!=null&&ZC(o,n),n}function jC(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const r=c(e,["files"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),p(n,["files"],u)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eS extends Yi{constructor(n){super(),this.apiClient=n,this.list=async(o={})=>new es($i.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(o),o)}async upload(n){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(n.file,n.config).then(o=>o)}async download(n){await this.apiClient.downloadFile(n)}async listInternal(n){var o,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=WC(n);return u=me("files",h._url),f=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=jC(g),v=new hT;return Object.assign(v,m),v})}}async createInternal(n){var o,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=YC(n);return u=me("upload/v1beta/files",h._url),f=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=JC(g),v=new mT;return Object.assign(v,m),v})}}async get(n){var o,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=QC(n);return u=me("files/{file}",h._url),f=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(n){var o,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=KC(n);return u=me("files/{file}",h._url),f=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=XC(g),v=new gT;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xr(e){const n={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["data"]);o!=null&&p(n,["data"],o);const s=c(e,["mimeType"]);return s!=null&&p(n,["mimeType"],s),n}function tS(e){const n={},o=c(e,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>mS(u))),p(n,["parts"],r)}const s=c(e,["role"]);return s!=null&&p(n,["role"],s),n}function nS(e){const n={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["fileUri"]);o!=null&&p(n,["fileUri"],o);const s=c(e,["mimeType"]);return s!=null&&p(n,["mimeType"],s),n}function iS(e){const n={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(e,["description"]);o!=null&&p(n,["description"],o);const s=c(e,["name"]);s!=null&&p(n,["name"],s);const r=c(e,["parameters"]);r!=null&&p(n,["parameters"],r);const u=c(e,["parametersJsonSchema"]);u!=null&&p(n,["parametersJsonSchema"],u);const f=c(e,["response"]);f!=null&&p(n,["response"],f);const h=c(e,["responseJsonSchema"]);return h!=null&&p(n,["responseJsonSchema"],h),n}function oS(e){const n={},o=c(e,["modelSelectionConfig"]);o!=null&&p(n,["modelConfig"],o);const s=c(e,["audioTimestamp"]);s!=null&&p(n,["audioTimestamp"],s);const r=c(e,["candidateCount"]);r!=null&&p(n,["candidateCount"],r);const u=c(e,["enableAffectiveDialog"]);u!=null&&p(n,["enableAffectiveDialog"],u);const f=c(e,["frequencyPenalty"]);f!=null&&p(n,["frequencyPenalty"],f);const h=c(e,["logprobs"]);h!=null&&p(n,["logprobs"],h);const g=c(e,["maxOutputTokens"]);g!=null&&p(n,["maxOutputTokens"],g);const m=c(e,["mediaResolution"]);m!=null&&p(n,["mediaResolution"],m);const v=c(e,["presencePenalty"]);v!=null&&p(n,["presencePenalty"],v);const x=c(e,["responseJsonSchema"]);x!=null&&p(n,["responseJsonSchema"],x);const T=c(e,["responseLogprobs"]);T!=null&&p(n,["responseLogprobs"],T);const E=c(e,["responseMimeType"]);E!=null&&p(n,["responseMimeType"],E);const b=c(e,["responseModalities"]);b!=null&&p(n,["responseModalities"],b);const A=c(e,["responseSchema"]);A!=null&&p(n,["responseSchema"],A);const q=c(e,["routingConfig"]);q!=null&&p(n,["routingConfig"],q);const w=c(e,["seed"]);w!=null&&p(n,["seed"],w);const M=c(e,["speechConfig"]);M!=null&&p(n,["speechConfig"],$g(M));const k=c(e,["stopSequences"]);k!=null&&p(n,["stopSequences"],k);const P=c(e,["temperature"]);P!=null&&p(n,["temperature"],P);const N=c(e,["thinkingConfig"]);N!=null&&p(n,["thinkingConfig"],N);const $=c(e,["topK"]);$!=null&&p(n,["topK"],$);const oe=c(e,["topP"]);return oe!=null&&p(n,["topP"],oe),n}function lS(e){const n={},o=c(e,["timeRangeFilter"]);if(o!=null&&p(n,["timeRangeFilter"],o),c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return n}function sS(e,n){const o={},s=c(e,["generationConfig"]);n!==void 0&&s!=null&&p(n,["setup","generationConfig"],s);const r=c(e,["responseModalities"]);n!==void 0&&r!=null&&p(n,["setup","generationConfig","responseModalities"],r);const u=c(e,["temperature"]);n!==void 0&&u!=null&&p(n,["setup","generationConfig","temperature"],u);const f=c(e,["topP"]);n!==void 0&&f!=null&&p(n,["setup","generationConfig","topP"],f);const h=c(e,["topK"]);n!==void 0&&h!=null&&p(n,["setup","generationConfig","topK"],h);const g=c(e,["maxOutputTokens"]);n!==void 0&&g!=null&&p(n,["setup","generationConfig","maxOutputTokens"],g);const m=c(e,["mediaResolution"]);n!==void 0&&m!=null&&p(n,["setup","generationConfig","mediaResolution"],m);const v=c(e,["seed"]);n!==void 0&&v!=null&&p(n,["setup","generationConfig","seed"],v);const x=c(e,["speechConfig"]);n!==void 0&&x!=null&&p(n,["setup","generationConfig","speechConfig"],Rc(x));const T=c(e,["thinkingConfig"]);n!==void 0&&T!=null&&p(n,["setup","generationConfig","thinkingConfig"],T);const E=c(e,["enableAffectiveDialog"]);n!==void 0&&E!=null&&p(n,["setup","generationConfig","enableAffectiveDialog"],E);const b=c(e,["systemInstruction"]);n!==void 0&&b!=null&&p(n,["setup","systemInstruction"],tS(It(b)));const A=c(e,["tools"]);if(n!==void 0&&A!=null){let $=Xo(A);Array.isArray($)&&($=$.map(oe=>yS(Ko(oe)))),p(n,["setup","tools"],$)}const q=c(e,["sessionResumption"]);n!==void 0&&q!=null&&p(n,["setup","sessionResumption"],gS(q));const w=c(e,["inputAudioTranscription"]);n!==void 0&&w!=null&&p(n,["setup","inputAudioTranscription"],w);const M=c(e,["outputAudioTranscription"]);n!==void 0&&M!=null&&p(n,["setup","outputAudioTranscription"],M);const k=c(e,["realtimeInputConfig"]);n!==void 0&&k!=null&&p(n,["setup","realtimeInputConfig"],k);const P=c(e,["contextWindowCompression"]);n!==void 0&&P!=null&&p(n,["setup","contextWindowCompression"],P);const N=c(e,["proactivity"]);return n!==void 0&&N!=null&&p(n,["setup","proactivity"],N),o}function rS(e,n){const o={},s=c(e,["generationConfig"]);n!==void 0&&s!=null&&p(n,["setup","generationConfig"],oS(s));const r=c(e,["responseModalities"]);n!==void 0&&r!=null&&p(n,["setup","generationConfig","responseModalities"],r);const u=c(e,["temperature"]);n!==void 0&&u!=null&&p(n,["setup","generationConfig","temperature"],u);const f=c(e,["topP"]);n!==void 0&&f!=null&&p(n,["setup","generationConfig","topP"],f);const h=c(e,["topK"]);n!==void 0&&h!=null&&p(n,["setup","generationConfig","topK"],h);const g=c(e,["maxOutputTokens"]);n!==void 0&&g!=null&&p(n,["setup","generationConfig","maxOutputTokens"],g);const m=c(e,["mediaResolution"]);n!==void 0&&m!=null&&p(n,["setup","generationConfig","mediaResolution"],m);const v=c(e,["seed"]);n!==void 0&&v!=null&&p(n,["setup","generationConfig","seed"],v);const x=c(e,["speechConfig"]);n!==void 0&&x!=null&&p(n,["setup","generationConfig","speechConfig"],$g(Rc(x)));const T=c(e,["thinkingConfig"]);n!==void 0&&T!=null&&p(n,["setup","generationConfig","thinkingConfig"],T);const E=c(e,["enableAffectiveDialog"]);n!==void 0&&E!=null&&p(n,["setup","generationConfig","enableAffectiveDialog"],E);const b=c(e,["systemInstruction"]);n!==void 0&&b!=null&&p(n,["setup","systemInstruction"],It(b));const A=c(e,["tools"]);if(n!==void 0&&A!=null){let $=Xo(A);Array.isArray($)&&($=$.map(oe=>vS(Ko(oe)))),p(n,["setup","tools"],$)}const q=c(e,["sessionResumption"]);n!==void 0&&q!=null&&p(n,["setup","sessionResumption"],q);const w=c(e,["inputAudioTranscription"]);n!==void 0&&w!=null&&p(n,["setup","inputAudioTranscription"],w);const M=c(e,["outputAudioTranscription"]);n!==void 0&&M!=null&&p(n,["setup","outputAudioTranscription"],M);const k=c(e,["realtimeInputConfig"]);n!==void 0&&k!=null&&p(n,["setup","realtimeInputConfig"],k);const P=c(e,["contextWindowCompression"]);n!==void 0&&P!=null&&p(n,["setup","contextWindowCompression"],P);const N=c(e,["proactivity"]);return n!==void 0&&N!=null&&p(n,["setup","proactivity"],N),o}function aS(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["setup","model"],Ve(e,s));const r=c(n,["config"]);return r!=null&&p(o,["config"],sS(r,o)),o}function uS(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["setup","model"],Ve(e,s));const r=c(n,["config"]);return r!=null&&p(o,["config"],rS(r,o)),o}function cS(e){const n={},o=c(e,["musicGenerationConfig"]);return o!=null&&p(n,["musicGenerationConfig"],o),n}function fS(e){const n={},o=c(e,["weightedPrompts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),p(n,["weightedPrompts"],s)}return n}function dS(e){const n={},o=c(e,["media"]);if(o!=null){let m=wg(o);Array.isArray(m)&&(m=m.map(v=>xr(v))),p(n,["mediaChunks"],m)}const s=c(e,["audio"]);s!=null&&p(n,["audio"],xr(Ug(s)));const r=c(e,["audioStreamEnd"]);r!=null&&p(n,["audioStreamEnd"],r);const u=c(e,["video"]);u!=null&&p(n,["video"],xr(kg(u)));const f=c(e,["text"]);f!=null&&p(n,["text"],f);const h=c(e,["activityStart"]);h!=null&&p(n,["activityStart"],h);const g=c(e,["activityEnd"]);return g!=null&&p(n,["activityEnd"],g),n}function pS(e){const n={},o=c(e,["media"]);if(o!=null){let m=wg(o);Array.isArray(m)&&(m=m.map(v=>v)),p(n,["mediaChunks"],m)}const s=c(e,["audio"]);s!=null&&p(n,["audio"],Ug(s));const r=c(e,["audioStreamEnd"]);r!=null&&p(n,["audioStreamEnd"],r);const u=c(e,["video"]);u!=null&&p(n,["video"],kg(u));const f=c(e,["text"]);f!=null&&p(n,["text"],f);const h=c(e,["activityStart"]);h!=null&&p(n,["activityStart"],h);const g=c(e,["activityEnd"]);return g!=null&&p(n,["activityEnd"],g),n}function hS(e){const n={},o=c(e,["setupComplete"]);o!=null&&p(n,["setupComplete"],o);const s=c(e,["serverContent"]);s!=null&&p(n,["serverContent"],s);const r=c(e,["toolCall"]);r!=null&&p(n,["toolCall"],r);const u=c(e,["toolCallCancellation"]);u!=null&&p(n,["toolCallCancellation"],u);const f=c(e,["usageMetadata"]);f!=null&&p(n,["usageMetadata"],xS(f));const h=c(e,["goAway"]);h!=null&&p(n,["goAway"],h);const g=c(e,["sessionResumptionUpdate"]);return g!=null&&p(n,["sessionResumptionUpdate"],g),n}function mS(e){const n={},o=c(e,["videoMetadata"]);o!=null&&p(n,["videoMetadata"],o);const s=c(e,["thought"]);s!=null&&p(n,["thought"],s);const r=c(e,["inlineData"]);r!=null&&p(n,["inlineData"],xr(r));const u=c(e,["fileData"]);u!=null&&p(n,["fileData"],nS(u));const f=c(e,["thoughtSignature"]);f!=null&&p(n,["thoughtSignature"],f);const h=c(e,["functionCall"]);h!=null&&p(n,["functionCall"],h);const g=c(e,["codeExecutionResult"]);g!=null&&p(n,["codeExecutionResult"],g);const m=c(e,["executableCode"]);m!=null&&p(n,["executableCode"],m);const v=c(e,["functionResponse"]);v!=null&&p(n,["functionResponse"],v);const x=c(e,["text"]);return x!=null&&p(n,["text"],x),n}function gS(e){const n={},o=c(e,["handle"]);if(o!=null&&p(n,["handle"],o),c(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function $g(e){const n={},o=c(e,["voiceConfig"]);if(o!=null&&p(n,["voiceConfig"],o),c(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=c(e,["languageCode"]);return s!=null&&p(n,["languageCode"],s),n}function yS(e){const n={},o=c(e,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>m)),p(n,["functionDeclarations"],g)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(e,["googleSearch"]);s!=null&&p(n,["googleSearch"],lS(s));const r=c(e,["googleSearchRetrieval"]);if(r!=null&&p(n,["googleSearchRetrieval"],r),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const u=c(e,["urlContext"]);u!=null&&p(n,["urlContext"],u);const f=c(e,["computerUse"]);f!=null&&p(n,["computerUse"],f);const h=c(e,["codeExecution"]);return h!=null&&p(n,["codeExecution"],h),n}function vS(e){const n={},o=c(e,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(T=>iS(T))),p(n,["functionDeclarations"],x)}const s=c(e,["retrieval"]);s!=null&&p(n,["retrieval"],s);const r=c(e,["googleSearch"]);r!=null&&p(n,["googleSearch"],r);const u=c(e,["googleSearchRetrieval"]);u!=null&&p(n,["googleSearchRetrieval"],u);const f=c(e,["enterpriseWebSearch"]);f!=null&&p(n,["enterpriseWebSearch"],f);const h=c(e,["googleMaps"]);h!=null&&p(n,["googleMaps"],h);const g=c(e,["urlContext"]);g!=null&&p(n,["urlContext"],g);const m=c(e,["computerUse"]);m!=null&&p(n,["computerUse"],m);const v=c(e,["codeExecution"]);return v!=null&&p(n,["codeExecution"],v),n}function xS(e){const n={},o=c(e,["promptTokenCount"]);o!=null&&p(n,["promptTokenCount"],o);const s=c(e,["cachedContentTokenCount"]);s!=null&&p(n,["cachedContentTokenCount"],s);const r=c(e,["candidatesTokenCount"]);r!=null&&p(n,["responseTokenCount"],r);const u=c(e,["toolUsePromptTokenCount"]);u!=null&&p(n,["toolUsePromptTokenCount"],u);const f=c(e,["thoughtsTokenCount"]);f!=null&&p(n,["thoughtsTokenCount"],f);const h=c(e,["totalTokenCount"]);h!=null&&p(n,["totalTokenCount"],h);const g=c(e,["promptTokensDetails"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(b=>b)),p(n,["promptTokensDetails"],E)}const m=c(e,["cacheTokensDetails"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(b=>b)),p(n,["cacheTokensDetails"],E)}const v=c(e,["candidatesTokensDetails"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(b=>b)),p(n,["responseTokensDetails"],E)}const x=c(e,["toolUsePromptTokensDetails"]);if(x!=null){let E=x;Array.isArray(E)&&(E=E.map(b=>b)),p(n,["toolUsePromptTokensDetails"],E)}const T=c(e,["trafficType"]);return T!=null&&p(n,["trafficType"],T),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TS(e){const n={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["data"]);o!=null&&p(n,["data"],o);const s=c(e,["mimeType"]);return s!=null&&p(n,["mimeType"],s),n}function CS(e){const n={},o=c(e,["content"]);o!=null&&p(n,["content"],o);const s=c(e,["citationMetadata"]);s!=null&&p(n,["citationMetadata"],SS(s));const r=c(e,["tokenCount"]);r!=null&&p(n,["tokenCount"],r);const u=c(e,["finishReason"]);u!=null&&p(n,["finishReason"],u);const f=c(e,["urlContextMetadata"]);f!=null&&p(n,["urlContextMetadata"],f);const h=c(e,["avgLogprobs"]);h!=null&&p(n,["avgLogprobs"],h);const g=c(e,["groundingMetadata"]);g!=null&&p(n,["groundingMetadata"],g);const m=c(e,["index"]);m!=null&&p(n,["index"],m);const v=c(e,["logprobsResult"]);v!=null&&p(n,["logprobsResult"],v);const x=c(e,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(E=>E)),p(n,["safetyRatings"],T)}return n}function SS(e){const n={},o=c(e,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),p(n,["citations"],s)}return n}function ES(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["contents"]);if(r!=null){let u=hn(r);Array.isArray(u)&&(u=u.map(f=>f)),p(o,["contents"],u)}return o}function _S(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>u)),p(n,["tokensInfo"],r)}return n}function AS(e){const n={},o=c(e,["values"]);o!=null&&p(n,["values"],o);const s=c(e,["statistics"]);return s!=null&&p(n,["statistics"],bS(s)),n}function bS(e){const n={},o=c(e,["truncated"]);o!=null&&p(n,["truncated"],o);const s=c(e,["token_count"]);return s!=null&&p(n,["tokenCount"],s),n}function Ir(e){const n={},o=c(e,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>IE(u))),p(n,["parts"],r)}const s=c(e,["role"]);return s!=null&&p(n,["role"],s),n}function MS(e){const n={},o=c(e,["controlType"]);o!=null&&p(n,["controlType"],o);const s=c(e,["enableControlImageComputation"]);return s!=null&&p(n,["computeControl"],s),n}function NS(e){const n={};if(c(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function RS(e,n){const o={},s=c(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],It(s));const r=c(e,["tools"]);if(n!==void 0&&r!=null){let f=r;Array.isArray(f)&&(f=f.map(h=>Qg(h))),p(n,["tools"],f)}const u=c(e,["generationConfig"]);return n!==void 0&&u!=null&&p(n,["generationConfig"],vE(u)),o}function IS(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["contents"]);if(r!=null){let f=hn(r);Array.isArray(f)&&(f=f.map(h=>Ir(h))),p(o,["contents"],f)}const u=c(n,["config"]);return u!=null&&NS(u),o}function DS(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["contents"]);if(r!=null){let f=hn(r);Array.isArray(f)&&(f=f.map(h=>h)),p(o,["contents"],f)}const u=c(n,["config"]);return u!=null&&RS(u,o),o}function wS(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["totalTokens"]);s!=null&&p(n,["totalTokens"],s);const r=c(e,["cachedContentTokenCount"]);return r!=null&&p(n,["cachedContentTokenCount"],r),n}function kS(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["totalTokens"]);return s!=null&&p(n,["totalTokens"],s),n}function US(e,n){const o={},s=c(n,["model"]);return s!=null&&p(o,["_url","name"],Ve(e,s)),o}function PS(e,n){const o={},s=c(n,["model"]);return s!=null&&p(o,["_url","name"],Ve(e,s)),o}function LS(e){const n={},o=c(e,["sdkHttpResponse"]);return o!=null&&p(n,["sdkHttpResponse"],o),n}function GS(e){const n={},o=c(e,["sdkHttpResponse"]);return o!=null&&p(n,["sdkHttpResponse"],o),n}function HS(e,n){const o={},s=c(e,["outputGcsUri"]);n!==void 0&&s!=null&&p(n,["parameters","storageUri"],s);const r=c(e,["negativePrompt"]);n!==void 0&&r!=null&&p(n,["parameters","negativePrompt"],r);const u=c(e,["numberOfImages"]);n!==void 0&&u!=null&&p(n,["parameters","sampleCount"],u);const f=c(e,["aspectRatio"]);n!==void 0&&f!=null&&p(n,["parameters","aspectRatio"],f);const h=c(e,["guidanceScale"]);n!==void 0&&h!=null&&p(n,["parameters","guidanceScale"],h);const g=c(e,["seed"]);n!==void 0&&g!=null&&p(n,["parameters","seed"],g);const m=c(e,["safetyFilterLevel"]);n!==void 0&&m!=null&&p(n,["parameters","safetySetting"],m);const v=c(e,["personGeneration"]);n!==void 0&&v!=null&&p(n,["parameters","personGeneration"],v);const x=c(e,["includeSafetyAttributes"]);n!==void 0&&x!=null&&p(n,["parameters","includeSafetyAttributes"],x);const T=c(e,["includeRaiReason"]);n!==void 0&&T!=null&&p(n,["parameters","includeRaiReason"],T);const E=c(e,["language"]);n!==void 0&&E!=null&&p(n,["parameters","language"],E);const b=c(e,["outputMimeType"]);n!==void 0&&b!=null&&p(n,["parameters","outputOptions","mimeType"],b);const A=c(e,["outputCompressionQuality"]);n!==void 0&&A!=null&&p(n,["parameters","outputOptions","compressionQuality"],A);const q=c(e,["addWatermark"]);n!==void 0&&q!=null&&p(n,["parameters","addWatermark"],q);const w=c(e,["labels"]);n!==void 0&&w!=null&&p(n,["labels"],w);const M=c(e,["editMode"]);n!==void 0&&M!=null&&p(n,["parameters","editMode"],M);const k=c(e,["baseSteps"]);return n!==void 0&&k!=null&&p(n,["parameters","editConfig","baseSteps"],k),o}function BS(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["prompt"]);r!=null&&p(o,["instances[0]","prompt"],r);const u=c(n,["referenceImages"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(g=>LE(g))),p(o,["instances[0]","referenceImages"],h)}const f=c(n,["config"]);return f!=null&&HS(f,o),o}function qS(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>Dr(u))),p(n,["generatedImages"],r)}return n}function zS(e,n){const o={},s=c(e,["taskType"]);n!==void 0&&s!=null&&p(n,["requests[]","taskType"],s);const r=c(e,["title"]);n!==void 0&&r!=null&&p(n,["requests[]","title"],r);const u=c(e,["outputDimensionality"]);if(n!==void 0&&u!=null&&p(n,["requests[]","outputDimensionality"],u),c(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function VS(e,n){const o={},s=c(e,["taskType"]);n!==void 0&&s!=null&&p(n,["instances[]","task_type"],s);const r=c(e,["title"]);n!==void 0&&r!=null&&p(n,["instances[]","title"],r);const u=c(e,["outputDimensionality"]);n!==void 0&&u!=null&&p(n,["parameters","outputDimensionality"],u);const f=c(e,["mimeType"]);n!==void 0&&f!=null&&p(n,["instances[]","mimeType"],f);const h=c(e,["autoTruncate"]);return n!==void 0&&h!=null&&p(n,["parameters","autoTruncate"],h),o}function OS(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["contents"]);if(r!=null){let h=bc(e,r);Array.isArray(h)&&(h=h.map(g=>g)),p(o,["requests[]","content"],h)}const u=c(n,["config"]);u!=null&&zS(u,o);const f=c(n,["model"]);return f!==void 0&&p(o,["requests[]","model"],Ve(e,f)),o}function FS(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["contents"]);if(r!=null){let f=bc(e,r);Array.isArray(f)&&(f=f.map(h=>h)),p(o,["instances[]","content"],f)}const u=c(n,["config"]);return u!=null&&VS(u,o),o}function $S(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>f)),p(n,["embeddings"],u)}const r=c(e,["metadata"]);return r!=null&&p(n,["metadata"],r),n}function YS(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["predictions[]","embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>AS(f))),p(n,["embeddings"],u)}const r=c(e,["metadata"]);return r!=null&&p(n,["metadata"],r),n}function JS(e){const n={},o=c(e,["endpoint"]);o!=null&&p(n,["name"],o);const s=c(e,["deployedModelId"]);return s!=null&&p(n,["deployedModelId"],s),n}function KS(e){const n={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["fileUri"]);o!=null&&p(n,["fileUri"],o);const s=c(e,["mimeType"]);return s!=null&&p(n,["mimeType"],s),n}function XS(e){const n={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(e,["description"]);o!=null&&p(n,["description"],o);const s=c(e,["name"]);s!=null&&p(n,["name"],s);const r=c(e,["parameters"]);r!=null&&p(n,["parameters"],r);const u=c(e,["parametersJsonSchema"]);u!=null&&p(n,["parametersJsonSchema"],u);const f=c(e,["response"]);f!=null&&p(n,["response"],f);const h=c(e,["responseJsonSchema"]);return h!=null&&p(n,["responseJsonSchema"],h),n}function QS(e,n,o){const s={},r=c(n,["systemInstruction"]);o!==void 0&&r!=null&&p(o,["systemInstruction"],Ir(It(r)));const u=c(n,["temperature"]);u!=null&&p(s,["temperature"],u);const f=c(n,["topP"]);f!=null&&p(s,["topP"],f);const h=c(n,["topK"]);h!=null&&p(s,["topK"],h);const g=c(n,["candidateCount"]);g!=null&&p(s,["candidateCount"],g);const m=c(n,["maxOutputTokens"]);m!=null&&p(s,["maxOutputTokens"],m);const v=c(n,["stopSequences"]);v!=null&&p(s,["stopSequences"],v);const x=c(n,["responseLogprobs"]);x!=null&&p(s,["responseLogprobs"],x);const T=c(n,["logprobs"]);T!=null&&p(s,["logprobs"],T);const E=c(n,["presencePenalty"]);E!=null&&p(s,["presencePenalty"],E);const b=c(n,["frequencyPenalty"]);b!=null&&p(s,["frequencyPenalty"],b);const A=c(n,["seed"]);A!=null&&p(s,["seed"],A);const q=c(n,["responseMimeType"]);q!=null&&p(s,["responseMimeType"],q);const w=c(n,["responseSchema"]);w!=null&&p(s,["responseSchema"],Mc(w));const M=c(n,["responseJsonSchema"]);if(M!=null&&p(s,["responseJsonSchema"],M),c(n,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(n,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=c(n,["safetySettings"]);if(o!==void 0&&k!=null){let O=k;Array.isArray(O)&&(O=O.map(Ce=>GE(Ce))),p(o,["safetySettings"],O)}const P=c(n,["tools"]);if(o!==void 0&&P!=null){let O=Xo(P);Array.isArray(O)&&(O=O.map(Ce=>OE(Ko(Ce)))),p(o,["tools"],O)}const N=c(n,["toolConfig"]);if(o!==void 0&&N!=null&&p(o,["toolConfig"],N),c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=c(n,["cachedContent"]);o!==void 0&&$!=null&&p(o,["cachedContent"],Qn(e,$));const oe=c(n,["responseModalities"]);oe!=null&&p(s,["responseModalities"],oe);const ce=c(n,["mediaResolution"]);ce!=null&&p(s,["mediaResolution"],ce);const Y=c(n,["speechConfig"]);if(Y!=null&&p(s,["speechConfig"],Nc(Y)),c(n,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const de=c(n,["thinkingConfig"]);de!=null&&p(s,["thinkingConfig"],de);const Ee=c(n,["imageConfig"]);return Ee!=null&&p(s,["imageConfig"],Ee),s}function ZS(e,n,o){const s={},r=c(n,["systemInstruction"]);o!==void 0&&r!=null&&p(o,["systemInstruction"],It(r));const u=c(n,["temperature"]);u!=null&&p(s,["temperature"],u);const f=c(n,["topP"]);f!=null&&p(s,["topP"],f);const h=c(n,["topK"]);h!=null&&p(s,["topK"],h);const g=c(n,["candidateCount"]);g!=null&&p(s,["candidateCount"],g);const m=c(n,["maxOutputTokens"]);m!=null&&p(s,["maxOutputTokens"],m);const v=c(n,["stopSequences"]);v!=null&&p(s,["stopSequences"],v);const x=c(n,["responseLogprobs"]);x!=null&&p(s,["responseLogprobs"],x);const T=c(n,["logprobs"]);T!=null&&p(s,["logprobs"],T);const E=c(n,["presencePenalty"]);E!=null&&p(s,["presencePenalty"],E);const b=c(n,["frequencyPenalty"]);b!=null&&p(s,["frequencyPenalty"],b);const A=c(n,["seed"]);A!=null&&p(s,["seed"],A);const q=c(n,["responseMimeType"]);q!=null&&p(s,["responseMimeType"],q);const w=c(n,["responseSchema"]);w!=null&&p(s,["responseSchema"],Mc(w));const M=c(n,["responseJsonSchema"]);M!=null&&p(s,["responseJsonSchema"],M);const k=c(n,["routingConfig"]);k!=null&&p(s,["routingConfig"],k);const P=c(n,["modelSelectionConfig"]);P!=null&&p(s,["modelConfig"],P);const N=c(n,["safetySettings"]);if(o!==void 0&&N!=null){let G=N;Array.isArray(G)&&(G=G.map(se=>se)),p(o,["safetySettings"],G)}const $=c(n,["tools"]);if(o!==void 0&&$!=null){let G=Xo($);Array.isArray(G)&&(G=G.map(se=>Qg(Ko(se)))),p(o,["tools"],G)}const oe=c(n,["toolConfig"]);o!==void 0&&oe!=null&&p(o,["toolConfig"],oe);const ce=c(n,["labels"]);o!==void 0&&ce!=null&&p(o,["labels"],ce);const Y=c(n,["cachedContent"]);o!==void 0&&Y!=null&&p(o,["cachedContent"],Qn(e,Y));const de=c(n,["responseModalities"]);de!=null&&p(s,["responseModalities"],de);const Ee=c(n,["mediaResolution"]);Ee!=null&&p(s,["mediaResolution"],Ee);const O=c(n,["speechConfig"]);O!=null&&p(s,["speechConfig"],Xg(Nc(O)));const Ce=c(n,["audioTimestamp"]);Ce!=null&&p(s,["audioTimestamp"],Ce);const Oe=c(n,["thinkingConfig"]);Oe!=null&&p(s,["thinkingConfig"],Oe);const Le=c(n,["imageConfig"]);return Le!=null&&p(s,["imageConfig"],Le),s}function Qm(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["contents"]);if(r!=null){let f=hn(r);Array.isArray(f)&&(f=f.map(h=>Ir(h))),p(o,["contents"],f)}const u=c(n,["config"]);return u!=null&&p(o,["generationConfig"],QS(e,u,o)),o}function Zm(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["contents"]);if(r!=null){let f=hn(r);Array.isArray(f)&&(f=f.map(h=>h)),p(o,["contents"],f)}const u=c(n,["config"]);return u!=null&&p(o,["generationConfig"],ZS(e,u,o)),o}function Wm(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(m=>CS(m))),p(n,["candidates"],g)}const r=c(e,["modelVersion"]);r!=null&&p(n,["modelVersion"],r);const u=c(e,["promptFeedback"]);u!=null&&p(n,["promptFeedback"],u);const f=c(e,["responseId"]);f!=null&&p(n,["responseId"],f);const h=c(e,["usageMetadata"]);return h!=null&&p(n,["usageMetadata"],h),n}function jm(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),p(n,["candidates"],m)}const r=c(e,["createTime"]);r!=null&&p(n,["createTime"],r);const u=c(e,["modelVersion"]);u!=null&&p(n,["modelVersion"],u);const f=c(e,["promptFeedback"]);f!=null&&p(n,["promptFeedback"],f);const h=c(e,["responseId"]);h!=null&&p(n,["responseId"],h);const g=c(e,["usageMetadata"]);return g!=null&&p(n,["usageMetadata"],g),n}function WS(e,n){const o={};if(c(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=c(e,["numberOfImages"]);n!==void 0&&s!=null&&p(n,["parameters","sampleCount"],s);const r=c(e,["aspectRatio"]);n!==void 0&&r!=null&&p(n,["parameters","aspectRatio"],r);const u=c(e,["guidanceScale"]);if(n!==void 0&&u!=null&&p(n,["parameters","guidanceScale"],u),c(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=c(e,["safetyFilterLevel"]);n!==void 0&&f!=null&&p(n,["parameters","safetySetting"],f);const h=c(e,["personGeneration"]);n!==void 0&&h!=null&&p(n,["parameters","personGeneration"],h);const g=c(e,["includeSafetyAttributes"]);n!==void 0&&g!=null&&p(n,["parameters","includeSafetyAttributes"],g);const m=c(e,["includeRaiReason"]);n!==void 0&&m!=null&&p(n,["parameters","includeRaiReason"],m);const v=c(e,["language"]);n!==void 0&&v!=null&&p(n,["parameters","language"],v);const x=c(e,["outputMimeType"]);n!==void 0&&x!=null&&p(n,["parameters","outputOptions","mimeType"],x);const T=c(e,["outputCompressionQuality"]);if(n!==void 0&&T!=null&&p(n,["parameters","outputOptions","compressionQuality"],T),c(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=c(e,["imageSize"]);if(n!==void 0&&E!=null&&p(n,["parameters","sampleImageSize"],E),c(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function jS(e,n){const o={},s=c(e,["outputGcsUri"]);n!==void 0&&s!=null&&p(n,["parameters","storageUri"],s);const r=c(e,["negativePrompt"]);n!==void 0&&r!=null&&p(n,["parameters","negativePrompt"],r);const u=c(e,["numberOfImages"]);n!==void 0&&u!=null&&p(n,["parameters","sampleCount"],u);const f=c(e,["aspectRatio"]);n!==void 0&&f!=null&&p(n,["parameters","aspectRatio"],f);const h=c(e,["guidanceScale"]);n!==void 0&&h!=null&&p(n,["parameters","guidanceScale"],h);const g=c(e,["seed"]);n!==void 0&&g!=null&&p(n,["parameters","seed"],g);const m=c(e,["safetyFilterLevel"]);n!==void 0&&m!=null&&p(n,["parameters","safetySetting"],m);const v=c(e,["personGeneration"]);n!==void 0&&v!=null&&p(n,["parameters","personGeneration"],v);const x=c(e,["includeSafetyAttributes"]);n!==void 0&&x!=null&&p(n,["parameters","includeSafetyAttributes"],x);const T=c(e,["includeRaiReason"]);n!==void 0&&T!=null&&p(n,["parameters","includeRaiReason"],T);const E=c(e,["language"]);n!==void 0&&E!=null&&p(n,["parameters","language"],E);const b=c(e,["outputMimeType"]);n!==void 0&&b!=null&&p(n,["parameters","outputOptions","mimeType"],b);const A=c(e,["outputCompressionQuality"]);n!==void 0&&A!=null&&p(n,["parameters","outputOptions","compressionQuality"],A);const q=c(e,["addWatermark"]);n!==void 0&&q!=null&&p(n,["parameters","addWatermark"],q);const w=c(e,["labels"]);n!==void 0&&w!=null&&p(n,["labels"],w);const M=c(e,["imageSize"]);n!==void 0&&M!=null&&p(n,["parameters","sampleImageSize"],M);const k=c(e,["enhancePrompt"]);return n!==void 0&&k!=null&&p(n,["parameters","enhancePrompt"],k),o}function eE(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["prompt"]);r!=null&&p(o,["instances[0]","prompt"],r);const u=c(n,["config"]);return u!=null&&WS(u,o),o}function tE(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["prompt"]);r!=null&&p(o,["instances[0]","prompt"],r);const u=c(n,["config"]);return u!=null&&jS(u,o),o}function nE(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>hE(f))),p(n,["generatedImages"],u)}const r=c(e,["positivePromptSafetyAttributes"]);return r!=null&&p(n,["positivePromptSafetyAttributes"],Jg(r)),n}function iE(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>Dr(f))),p(n,["generatedImages"],u)}const r=c(e,["positivePromptSafetyAttributes"]);return r!=null&&p(n,["positivePromptSafetyAttributes"],Kg(r)),n}function oE(e,n){const o={},s=c(e,["numberOfVideos"]);if(n!==void 0&&s!=null&&p(n,["parameters","sampleCount"],s),c(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(e,["durationSeconds"]);if(n!==void 0&&r!=null&&p(n,["parameters","durationSeconds"],r),c(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=c(e,["aspectRatio"]);n!==void 0&&u!=null&&p(n,["parameters","aspectRatio"],u);const f=c(e,["resolution"]);n!==void 0&&f!=null&&p(n,["parameters","resolution"],f);const h=c(e,["personGeneration"]);if(n!==void 0&&h!=null&&p(n,["parameters","personGeneration"],h),c(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=c(e,["negativePrompt"]);n!==void 0&&g!=null&&p(n,["parameters","negativePrompt"],g);const m=c(e,["enhancePrompt"]);if(n!==void 0&&m!=null&&p(n,["parameters","enhancePrompt"],m),c(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=c(e,["lastFrame"]);n!==void 0&&v!=null&&p(n,["instances[0]","lastFrame"],wr(v));const x=c(e,["referenceImages"]);if(n!==void 0&&x!=null){let T=x;Array.isArray(T)&&(T=T.map(E=>n_(E))),p(n,["instances[0]","referenceImages"],T)}if(c(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function lE(e,n){const o={},s=c(e,["numberOfVideos"]);n!==void 0&&s!=null&&p(n,["parameters","sampleCount"],s);const r=c(e,["outputGcsUri"]);n!==void 0&&r!=null&&p(n,["parameters","storageUri"],r);const u=c(e,["fps"]);n!==void 0&&u!=null&&p(n,["parameters","fps"],u);const f=c(e,["durationSeconds"]);n!==void 0&&f!=null&&p(n,["parameters","durationSeconds"],f);const h=c(e,["seed"]);n!==void 0&&h!=null&&p(n,["parameters","seed"],h);const g=c(e,["aspectRatio"]);n!==void 0&&g!=null&&p(n,["parameters","aspectRatio"],g);const m=c(e,["resolution"]);n!==void 0&&m!=null&&p(n,["parameters","resolution"],m);const v=c(e,["personGeneration"]);n!==void 0&&v!=null&&p(n,["parameters","personGeneration"],v);const x=c(e,["pubsubTopic"]);n!==void 0&&x!=null&&p(n,["parameters","pubsubTopic"],x);const T=c(e,["negativePrompt"]);n!==void 0&&T!=null&&p(n,["parameters","negativePrompt"],T);const E=c(e,["enhancePrompt"]);n!==void 0&&E!=null&&p(n,["parameters","enhancePrompt"],E);const b=c(e,["generateAudio"]);n!==void 0&&b!=null&&p(n,["parameters","generateAudio"],b);const A=c(e,["lastFrame"]);n!==void 0&&A!=null&&p(n,["instances[0]","lastFrame"],Tn(A));const q=c(e,["referenceImages"]);if(n!==void 0&&q!=null){let k=q;Array.isArray(k)&&(k=k.map(P=>i_(P))),p(n,["instances[0]","referenceImages"],k)}const w=c(e,["mask"]);n!==void 0&&w!=null&&p(n,["instances[0]","mask"],t_(w));const M=c(e,["compressionQuality"]);return n!==void 0&&M!=null&&p(n,["parameters","compressionQuality"],M),o}function sE(e){const n={},o=c(e,["name"]);o!=null&&p(n,["name"],o);const s=c(e,["metadata"]);s!=null&&p(n,["metadata"],s);const r=c(e,["done"]);r!=null&&p(n,["done"],r);const u=c(e,["error"]);u!=null&&p(n,["error"],u);const f=c(e,["response","generateVideoResponse"]);return f!=null&&p(n,["response"],cE(f)),n}function rE(e){const n={},o=c(e,["name"]);o!=null&&p(n,["name"],o);const s=c(e,["metadata"]);s!=null&&p(n,["metadata"],s);const r=c(e,["done"]);r!=null&&p(n,["done"],r);const u=c(e,["error"]);u!=null&&p(n,["error"],u);const f=c(e,["response"]);return f!=null&&p(n,["response"],fE(f)),n}function aE(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["prompt"]);r!=null&&p(o,["instances[0]","prompt"],r);const u=c(n,["image"]);u!=null&&p(o,["instances[0]","image"],wr(u));const f=c(n,["video"]);f!=null&&p(o,["instances[0]","video"],Zg(f));const h=c(n,["source"]);h!=null&&dE(h,o);const g=c(n,["config"]);return g!=null&&oE(g,o),o}function uE(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["prompt"]);r!=null&&p(o,["instances[0]","prompt"],r);const u=c(n,["image"]);u!=null&&p(o,["instances[0]","image"],Tn(u));const f=c(n,["video"]);f!=null&&p(o,["instances[0]","video"],Wg(f));const h=c(n,["source"]);h!=null&&pE(h,o);const g=c(n,["config"]);return g!=null&&lE(g,o),o}function cE(e){const n={},o=c(e,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>gE(f))),p(n,["generatedVideos"],u)}const s=c(e,["raiMediaFilteredCount"]);s!=null&&p(n,["raiMediaFilteredCount"],s);const r=c(e,["raiMediaFilteredReasons"]);return r!=null&&p(n,["raiMediaFilteredReasons"],r),n}function fE(e){const n={},o=c(e,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>yE(f))),p(n,["generatedVideos"],u)}const s=c(e,["raiMediaFilteredCount"]);s!=null&&p(n,["raiMediaFilteredCount"],s);const r=c(e,["raiMediaFilteredReasons"]);return r!=null&&p(n,["raiMediaFilteredReasons"],r),n}function dE(e,n){const o={},s=c(e,["prompt"]);n!==void 0&&s!=null&&p(n,["instances[0]","prompt"],s);const r=c(e,["image"]);n!==void 0&&r!=null&&p(n,["instances[0]","image"],wr(r));const u=c(e,["video"]);return n!==void 0&&u!=null&&p(n,["instances[0]","video"],Zg(u)),o}function pE(e,n){const o={},s=c(e,["prompt"]);n!==void 0&&s!=null&&p(n,["instances[0]","prompt"],s);const r=c(e,["image"]);n!==void 0&&r!=null&&p(n,["instances[0]","image"],Tn(r));const u=c(e,["video"]);return n!==void 0&&u!=null&&p(n,["instances[0]","video"],Wg(u)),o}function hE(e){const n={},o=c(e,["_self"]);o!=null&&p(n,["image"],SE(o));const s=c(e,["raiFilteredReason"]);s!=null&&p(n,["raiFilteredReason"],s);const r=c(e,["_self"]);return r!=null&&p(n,["safetyAttributes"],Jg(r)),n}function Dr(e){const n={},o=c(e,["_self"]);o!=null&&p(n,["image"],Yg(o));const s=c(e,["raiFilteredReason"]);s!=null&&p(n,["raiFilteredReason"],s);const r=c(e,["_self"]);r!=null&&p(n,["safetyAttributes"],Kg(r));const u=c(e,["prompt"]);return u!=null&&p(n,["enhancedPrompt"],u),n}function mE(e){const n={},o=c(e,["_self"]);o!=null&&p(n,["mask"],Yg(o));const s=c(e,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>u)),p(n,["labels"],r)}return n}function gE(e){const n={},o=c(e,["_self"]);return o!=null&&p(n,["video"],jE(o)),n}function yE(e){const n={},o=c(e,["_self"]);return o!=null&&p(n,["video"],e_(o)),n}function vE(e){const n={},o=c(e,["modelSelectionConfig"]);o!=null&&p(n,["modelConfig"],o);const s=c(e,["audioTimestamp"]);s!=null&&p(n,["audioTimestamp"],s);const r=c(e,["candidateCount"]);r!=null&&p(n,["candidateCount"],r);const u=c(e,["enableAffectiveDialog"]);u!=null&&p(n,["enableAffectiveDialog"],u);const f=c(e,["frequencyPenalty"]);f!=null&&p(n,["frequencyPenalty"],f);const h=c(e,["logprobs"]);h!=null&&p(n,["logprobs"],h);const g=c(e,["maxOutputTokens"]);g!=null&&p(n,["maxOutputTokens"],g);const m=c(e,["mediaResolution"]);m!=null&&p(n,["mediaResolution"],m);const v=c(e,["presencePenalty"]);v!=null&&p(n,["presencePenalty"],v);const x=c(e,["responseJsonSchema"]);x!=null&&p(n,["responseJsonSchema"],x);const T=c(e,["responseLogprobs"]);T!=null&&p(n,["responseLogprobs"],T);const E=c(e,["responseMimeType"]);E!=null&&p(n,["responseMimeType"],E);const b=c(e,["responseModalities"]);b!=null&&p(n,["responseModalities"],b);const A=c(e,["responseSchema"]);A!=null&&p(n,["responseSchema"],A);const q=c(e,["routingConfig"]);q!=null&&p(n,["routingConfig"],q);const w=c(e,["seed"]);w!=null&&p(n,["seed"],w);const M=c(e,["speechConfig"]);M!=null&&p(n,["speechConfig"],Xg(M));const k=c(e,["stopSequences"]);k!=null&&p(n,["stopSequences"],k);const P=c(e,["temperature"]);P!=null&&p(n,["temperature"],P);const N=c(e,["thinkingConfig"]);N!=null&&p(n,["thinkingConfig"],N);const $=c(e,["topK"]);$!=null&&p(n,["topK"],$);const oe=c(e,["topP"]);return oe!=null&&p(n,["topP"],oe),n}function xE(e,n){const o={},s=c(n,["model"]);return s!=null&&p(o,["_url","name"],Ve(e,s)),o}function TE(e,n){const o={},s=c(n,["model"]);return s!=null&&p(o,["_url","name"],Ve(e,s)),o}function CE(e){const n={},o=c(e,["timeRangeFilter"]);if(o!=null&&p(n,["timeRangeFilter"],o),c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return n}function SE(e){const n={},o=c(e,["bytesBase64Encoded"]);o!=null&&p(n,["imageBytes"],_i(o));const s=c(e,["mimeType"]);return s!=null&&p(n,["mimeType"],s),n}function Yg(e){const n={},o=c(e,["gcsUri"]);o!=null&&p(n,["gcsUri"],o);const s=c(e,["bytesBase64Encoded"]);s!=null&&p(n,["imageBytes"],_i(s));const r=c(e,["mimeType"]);return r!=null&&p(n,["mimeType"],r),n}function wr(e){const n={};if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=c(e,["imageBytes"]);o!=null&&p(n,["bytesBase64Encoded"],_i(o));const s=c(e,["mimeType"]);return s!=null&&p(n,["mimeType"],s),n}function Tn(e){const n={},o=c(e,["gcsUri"]);o!=null&&p(n,["gcsUri"],o);const s=c(e,["imageBytes"]);s!=null&&p(n,["bytesBase64Encoded"],_i(s));const r=c(e,["mimeType"]);return r!=null&&p(n,["mimeType"],r),n}function EE(e,n,o){const s={},r=c(n,["pageSize"]);o!==void 0&&r!=null&&p(o,["_query","pageSize"],r);const u=c(n,["pageToken"]);o!==void 0&&u!=null&&p(o,["_query","pageToken"],u);const f=c(n,["filter"]);o!==void 0&&f!=null&&p(o,["_query","filter"],f);const h=c(n,["queryBase"]);return o!==void 0&&h!=null&&p(o,["_url","models_url"],Hg(e,h)),s}function _E(e,n,o){const s={},r=c(n,["pageSize"]);o!==void 0&&r!=null&&p(o,["_query","pageSize"],r);const u=c(n,["pageToken"]);o!==void 0&&u!=null&&p(o,["_query","pageToken"],u);const f=c(n,["filter"]);o!==void 0&&f!=null&&p(o,["_query","filter"],f);const h=c(n,["queryBase"]);return o!==void 0&&h!=null&&p(o,["_url","models_url"],Hg(e,h)),s}function AE(e,n){const o={},s=c(n,["config"]);return s!=null&&EE(e,s,o),o}function bE(e,n){const o={},s=c(n,["config"]);return s!=null&&_E(e,s,o),o}function ME(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const r=c(e,["_self"]);if(r!=null){let u=Bg(r);Array.isArray(u)&&(u=u.map(f=>dc(f))),p(n,["models"],u)}return n}function NE(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const r=c(e,["_self"]);if(r!=null){let u=Bg(r);Array.isArray(u)&&(u=u.map(f=>pc(f))),p(n,["models"],u)}return n}function RE(e){const n={},o=c(e,["maskMode"]);o!=null&&p(n,["maskMode"],o);const s=c(e,["segmentationClasses"]);s!=null&&p(n,["maskClasses"],s);const r=c(e,["maskDilation"]);return r!=null&&p(n,["dilation"],r),n}function dc(e){const n={},o=c(e,["name"]);o!=null&&p(n,["name"],o);const s=c(e,["displayName"]);s!=null&&p(n,["displayName"],s);const r=c(e,["description"]);r!=null&&p(n,["description"],r);const u=c(e,["version"]);u!=null&&p(n,["version"],u);const f=c(e,["_self"]);f!=null&&p(n,["tunedModelInfo"],FE(f));const h=c(e,["inputTokenLimit"]);h!=null&&p(n,["inputTokenLimit"],h);const g=c(e,["outputTokenLimit"]);g!=null&&p(n,["outputTokenLimit"],g);const m=c(e,["supportedGenerationMethods"]);return m!=null&&p(n,["supportedActions"],m),n}function pc(e){const n={},o=c(e,["name"]);o!=null&&p(n,["name"],o);const s=c(e,["displayName"]);s!=null&&p(n,["displayName"],s);const r=c(e,["description"]);r!=null&&p(n,["description"],r);const u=c(e,["versionId"]);u!=null&&p(n,["version"],u);const f=c(e,["deployedModels"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(T=>JS(T))),p(n,["endpoints"],x)}const h=c(e,["labels"]);h!=null&&p(n,["labels"],h);const g=c(e,["_self"]);g!=null&&p(n,["tunedModelInfo"],$E(g));const m=c(e,["defaultCheckpointId"]);m!=null&&p(n,["defaultCheckpointId"],m);const v=c(e,["checkpoints"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(T=>T)),p(n,["checkpoints"],x)}return n}function IE(e){const n={},o=c(e,["videoMetadata"]);o!=null&&p(n,["videoMetadata"],o);const s=c(e,["thought"]);s!=null&&p(n,["thought"],s);const r=c(e,["inlineData"]);r!=null&&p(n,["inlineData"],TS(r));const u=c(e,["fileData"]);u!=null&&p(n,["fileData"],KS(u));const f=c(e,["thoughtSignature"]);f!=null&&p(n,["thoughtSignature"],f);const h=c(e,["functionCall"]);h!=null&&p(n,["functionCall"],h);const g=c(e,["codeExecutionResult"]);g!=null&&p(n,["codeExecutionResult"],g);const m=c(e,["executableCode"]);m!=null&&p(n,["executableCode"],m);const v=c(e,["functionResponse"]);v!=null&&p(n,["functionResponse"],v);const x=c(e,["text"]);return x!=null&&p(n,["text"],x),n}function DE(e){const n={},o=c(e,["productImage"]);return o!=null&&p(n,["image"],Tn(o)),n}function wE(e,n){const o={},s=c(e,["numberOfImages"]);n!==void 0&&s!=null&&p(n,["parameters","sampleCount"],s);const r=c(e,["baseSteps"]);n!==void 0&&r!=null&&p(n,["parameters","editConfig","baseSteps"],r);const u=c(e,["outputGcsUri"]);n!==void 0&&u!=null&&p(n,["parameters","storageUri"],u);const f=c(e,["seed"]);n!==void 0&&f!=null&&p(n,["parameters","seed"],f);const h=c(e,["safetyFilterLevel"]);n!==void 0&&h!=null&&p(n,["parameters","safetySetting"],h);const g=c(e,["personGeneration"]);n!==void 0&&g!=null&&p(n,["parameters","personGeneration"],g);const m=c(e,["addWatermark"]);n!==void 0&&m!=null&&p(n,["parameters","addWatermark"],m);const v=c(e,["outputMimeType"]);n!==void 0&&v!=null&&p(n,["parameters","outputOptions","mimeType"],v);const x=c(e,["outputCompressionQuality"]);n!==void 0&&x!=null&&p(n,["parameters","outputOptions","compressionQuality"],x);const T=c(e,["enhancePrompt"]);n!==void 0&&T!=null&&p(n,["parameters","enhancePrompt"],T);const E=c(e,["labels"]);return n!==void 0&&E!=null&&p(n,["labels"],E),o}function kE(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["source"]);r!=null&&PE(r,o);const u=c(n,["config"]);return u!=null&&wE(u,o),o}function UE(e){const n={},o=c(e,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>Dr(r))),p(n,["generatedImages"],s)}return n}function PE(e,n){const o={},s=c(e,["prompt"]);n!==void 0&&s!=null&&p(n,["instances[0]","prompt"],s);const r=c(e,["personImage"]);n!==void 0&&r!=null&&p(n,["instances[0]","personImage","image"],Tn(r));const u=c(e,["productImages"]);if(n!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(h=>DE(h))),p(n,["instances[0]","productImages"],f)}return o}function LE(e){const n={},o=c(e,["referenceImage"]);o!=null&&p(n,["referenceImage"],Tn(o));const s=c(e,["referenceId"]);s!=null&&p(n,["referenceId"],s);const r=c(e,["referenceType"]);r!=null&&p(n,["referenceType"],r);const u=c(e,["maskImageConfig"]);u!=null&&p(n,["maskImageConfig"],RE(u));const f=c(e,["controlImageConfig"]);f!=null&&p(n,["controlImageConfig"],MS(f));const h=c(e,["styleImageConfig"]);h!=null&&p(n,["styleImageConfig"],h);const g=c(e,["subjectImageConfig"]);return g!=null&&p(n,["subjectImageConfig"],g),n}function Jg(e){const n={},o=c(e,["safetyAttributes","categories"]);o!=null&&p(n,["categories"],o);const s=c(e,["safetyAttributes","scores"]);s!=null&&p(n,["scores"],s);const r=c(e,["contentType"]);return r!=null&&p(n,["contentType"],r),n}function Kg(e){const n={},o=c(e,["safetyAttributes","categories"]);o!=null&&p(n,["categories"],o);const s=c(e,["safetyAttributes","scores"]);s!=null&&p(n,["scores"],s);const r=c(e,["contentType"]);return r!=null&&p(n,["contentType"],r),n}function GE(e){const n={};if(c(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=c(e,["category"]);o!=null&&p(n,["category"],o);const s=c(e,["threshold"]);return s!=null&&p(n,["threshold"],s),n}function HE(e){const n={},o=c(e,["image"]);return o!=null&&p(n,["image"],Tn(o)),n}function BE(e,n){const o={},s=c(e,["mode"]);n!==void 0&&s!=null&&p(n,["parameters","mode"],s);const r=c(e,["maxPredictions"]);n!==void 0&&r!=null&&p(n,["parameters","maxPredictions"],r);const u=c(e,["confidenceThreshold"]);n!==void 0&&u!=null&&p(n,["parameters","confidenceThreshold"],u);const f=c(e,["maskDilation"]);n!==void 0&&f!=null&&p(n,["parameters","maskDilation"],f);const h=c(e,["binaryColorThreshold"]);n!==void 0&&h!=null&&p(n,["parameters","binaryColorThreshold"],h);const g=c(e,["labels"]);return n!==void 0&&g!=null&&p(n,["labels"],g),o}function qE(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["source"]);r!=null&&VE(r,o);const u=c(n,["config"]);return u!=null&&BE(u,o),o}function zE(e){const n={},o=c(e,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>mE(r))),p(n,["generatedMasks"],s)}return n}function VE(e,n){const o={},s=c(e,["prompt"]);n!==void 0&&s!=null&&p(n,["instances[0]","prompt"],s);const r=c(e,["image"]);n!==void 0&&r!=null&&p(n,["instances[0]","image"],Tn(r));const u=c(e,["scribbleImage"]);return n!==void 0&&u!=null&&p(n,["instances[0]","scribble"],HE(u)),o}function Xg(e){const n={},o=c(e,["voiceConfig"]);if(o!=null&&p(n,["voiceConfig"],o),c(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=c(e,["languageCode"]);return s!=null&&p(n,["languageCode"],s),n}function OE(e){const n={},o=c(e,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>m)),p(n,["functionDeclarations"],g)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(e,["googleSearch"]);s!=null&&p(n,["googleSearch"],CE(s));const r=c(e,["googleSearchRetrieval"]);if(r!=null&&p(n,["googleSearchRetrieval"],r),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const u=c(e,["urlContext"]);u!=null&&p(n,["urlContext"],u);const f=c(e,["computerUse"]);f!=null&&p(n,["computerUse"],f);const h=c(e,["codeExecution"]);return h!=null&&p(n,["codeExecution"],h),n}function Qg(e){const n={},o=c(e,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(T=>XS(T))),p(n,["functionDeclarations"],x)}const s=c(e,["retrieval"]);s!=null&&p(n,["retrieval"],s);const r=c(e,["googleSearch"]);r!=null&&p(n,["googleSearch"],r);const u=c(e,["googleSearchRetrieval"]);u!=null&&p(n,["googleSearchRetrieval"],u);const f=c(e,["enterpriseWebSearch"]);f!=null&&p(n,["enterpriseWebSearch"],f);const h=c(e,["googleMaps"]);h!=null&&p(n,["googleMaps"],h);const g=c(e,["urlContext"]);g!=null&&p(n,["urlContext"],g);const m=c(e,["computerUse"]);m!=null&&p(n,["computerUse"],m);const v=c(e,["codeExecution"]);return v!=null&&p(n,["codeExecution"],v),n}function FE(e){const n={},o=c(e,["baseModel"]);o!=null&&p(n,["baseModel"],o);const s=c(e,["createTime"]);s!=null&&p(n,["createTime"],s);const r=c(e,["updateTime"]);return r!=null&&p(n,["updateTime"],r),n}function $E(e){const n={},o=c(e,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&p(n,["baseModel"],o);const s=c(e,["createTime"]);s!=null&&p(n,["createTime"],s);const r=c(e,["updateTime"]);return r!=null&&p(n,["updateTime"],r),n}function YE(e,n){const o={},s=c(e,["displayName"]);n!==void 0&&s!=null&&p(n,["displayName"],s);const r=c(e,["description"]);n!==void 0&&r!=null&&p(n,["description"],r);const u=c(e,["defaultCheckpointId"]);return n!==void 0&&u!=null&&p(n,["defaultCheckpointId"],u),o}function JE(e,n){const o={},s=c(e,["displayName"]);n!==void 0&&s!=null&&p(n,["displayName"],s);const r=c(e,["description"]);n!==void 0&&r!=null&&p(n,["description"],r);const u=c(e,["defaultCheckpointId"]);return n!==void 0&&u!=null&&p(n,["defaultCheckpointId"],u),o}function KE(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","name"],Ve(e,s));const r=c(n,["config"]);return r!=null&&YE(r,o),o}function XE(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["config"]);return r!=null&&JE(r,o),o}function QE(e,n){const o={},s=c(e,["outputGcsUri"]);n!==void 0&&s!=null&&p(n,["parameters","storageUri"],s);const r=c(e,["includeRaiReason"]);n!==void 0&&r!=null&&p(n,["parameters","includeRaiReason"],r);const u=c(e,["outputMimeType"]);n!==void 0&&u!=null&&p(n,["parameters","outputOptions","mimeType"],u);const f=c(e,["outputCompressionQuality"]);n!==void 0&&f!=null&&p(n,["parameters","outputOptions","compressionQuality"],f);const h=c(e,["enhanceInputImage"]);n!==void 0&&h!=null&&p(n,["parameters","upscaleConfig","enhanceInputImage"],h);const g=c(e,["imagePreservationFactor"]);n!==void 0&&g!=null&&p(n,["parameters","upscaleConfig","imagePreservationFactor"],g);const m=c(e,["labels"]);n!==void 0&&m!=null&&p(n,["labels"],m);const v=c(e,["numberOfImages"]);n!==void 0&&v!=null&&p(n,["parameters","sampleCount"],v);const x=c(e,["mode"]);return n!==void 0&&x!=null&&p(n,["parameters","mode"],x),o}function ZE(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["_url","model"],Ve(e,s));const r=c(n,["image"]);r!=null&&p(o,["instances[0]","image"],Tn(r));const u=c(n,["upscaleFactor"]);u!=null&&p(o,["parameters","upscaleConfig","upscaleFactor"],u);const f=c(n,["config"]);return f!=null&&QE(f,o),o}function WE(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>Dr(u))),p(n,["generatedImages"],r)}return n}function jE(e){const n={},o=c(e,["video","uri"]);o!=null&&p(n,["uri"],o);const s=c(e,["video","encodedVideo"]);s!=null&&p(n,["videoBytes"],_i(s));const r=c(e,["encoding"]);return r!=null&&p(n,["mimeType"],r),n}function e_(e){const n={},o=c(e,["gcsUri"]);o!=null&&p(n,["uri"],o);const s=c(e,["bytesBase64Encoded"]);s!=null&&p(n,["videoBytes"],_i(s));const r=c(e,["mimeType"]);return r!=null&&p(n,["mimeType"],r),n}function t_(e){const n={},o=c(e,["image"]);o!=null&&p(n,["_self"],Tn(o));const s=c(e,["maskMode"]);return s!=null&&p(n,["maskMode"],s),n}function n_(e){const n={},o=c(e,["image"]);o!=null&&p(n,["image"],wr(o));const s=c(e,["referenceType"]);return s!=null&&p(n,["referenceType"],s),n}function i_(e){const n={},o=c(e,["image"]);o!=null&&p(n,["image"],Tn(o));const s=c(e,["referenceType"]);return s!=null&&p(n,["referenceType"],s),n}function Zg(e){const n={},o=c(e,["uri"]);o!=null&&p(n,["video","uri"],o);const s=c(e,["videoBytes"]);s!=null&&p(n,["video","encodedVideo"],_i(s));const r=c(e,["mimeType"]);return r!=null&&p(n,["encoding"],r),n}function Wg(e){const n={},o=c(e,["uri"]);o!=null&&p(n,["gcsUri"],o);const s=c(e,["videoBytes"]);s!=null&&p(n,["bytesBase64Encoded"],_i(s));const r=c(e,["mimeType"]);return r!=null&&p(n,["mimeType"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o_="Content-Type",l_="X-Server-Timeout",s_="User-Agent",hc="x-goog-api-client",r_="1.23.0",a_=`google-genai-sdk/${r_}`,u_="v1beta1",c_="v1beta",eg=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class f_{constructor(n){var o,s;this.clientOptions=Object.assign(Object.assign({},n),{project:n.project,location:n.location,apiKey:n.apiKey,vertexai:n.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:u_,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:c_,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,n.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,n.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var n;return(n=this.clientOptions.vertexai)!==null&&n!==void 0?n:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(n){if(!n||n.baseUrl===void 0||n.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[n.baseUrl.endsWith("/")?n.baseUrl.slice(0,-1):n.baseUrl];return n.apiVersion&&n.apiVersion!==""&&s.push(n.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const n=this.getBaseUrl(),o=new URL(n);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(n){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=n;else throw new Error("HTTP options are not correctly set.")}constructUrl(n,o,s){const r=[this.getRequestUrlInternal(o)];return s&&r.push(this.getBaseResourcePath()),n!==""&&r.push(n),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(n){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||n.path.startsWith("projects/")||n.httpMethod==="GET"&&n.path.startsWith("publishers/google/models"))}async request(n){let o=this.clientOptions.httpOptions;n.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const s=this.shouldPrependVertexProjectPath(n),r=this.constructUrl(n.path,o,s);if(n.queryParams)for(const[f,h]of Object.entries(n.queryParams))r.searchParams.append(f,String(h));let u={};if(n.httpMethod==="GET"){if(n.body&&n.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=n.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,o,n.abortSignal),this.unaryApiCall(r,u,n.httpMethod)}patchHttpOptions(n,o){const s=JSON.parse(JSON.stringify(n));for(const[r,u]of Object.entries(o))typeof u=="object"?s[r]=Object.assign(Object.assign({},s[r]),u):u!==void 0&&(s[r]=u);return s}async requestStream(n){let o=this.clientOptions.httpOptions;n.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const s=this.shouldPrependVertexProjectPath(n),r=this.constructUrl(n.path,o,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let u={};return u.body=n.body,u=await this.includeExtraHttpOptionsToRequestInit(u,o,n.abortSignal),this.streamApiCall(r,u,n.httpMethod)}async includeExtraHttpOptionsToRequestInit(n,o,s){if(o&&o.timeout||s){const r=new AbortController,u=r.signal;if(o.timeout&&(o==null?void 0:o.timeout)>0){const f=setTimeout(()=>r.abort(),o.timeout);f&&typeof f.unref=="function"&&f.unref()}s&&s.addEventListener("abort",()=>{r.abort()}),n.signal=u}return o&&o.extraBody!==null&&d_(n,o.extraBody),n.headers=await this.getHeadersInternal(o),n}async unaryApiCall(n,o,s){return this.apiCall(n.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await tg(r),new uc(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(n,o,s){return this.apiCall(n.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await tg(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(n){var o;return Oo(this,arguments,function*(){const r=(o=n==null?void 0:n.body)===null||o===void 0?void 0:o.getReader(),u=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let f="";for(;;){const{done:h,value:g}=yield tt(r.read());if(h){if(f.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=u.decode(g,{stream:!0});try{const x=JSON.parse(m);if("error"in x){const T=JSON.parse(JSON.stringify(x.error)),E=T.status,b=T.code,A=`got status: ${E}. ${JSON.stringify(x)}`;if(b>=400&&b<600)throw new Rr({message:A,status:b})}}catch(x){if(x.name==="ApiError")throw x}f+=m;let v=f.match(eg);for(;v;){const x=v[1];try{const T=new Response(x,{headers:n==null?void 0:n.headers,status:n==null?void 0:n.status,statusText:n==null?void 0:n.statusText});yield yield tt(new uc(T)),f=f.slice(v[0].length),v=f.match(eg)}catch(T){throw new Error(`exception parsing stream chunk ${x}. ${T}`)}}}}finally{r.releaseLock()}})}async apiCall(n,o){return fetch(n,o).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const n={},o=a_+" "+this.clientOptions.userAgentExtra;return n[s_]=o,n[hc]=o,n[o_]="application/json",n}async getHeadersInternal(n){const o=new Headers;if(n&&n.headers){for(const[s,r]of Object.entries(n.headers))o.append(s,r);n.timeout&&n.timeout>0&&o.append(l_,String(Math.ceil(n.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o),o}async uploadFile(n,o){var s;const r={};o!=null&&(r.mimeType=o.mimeType,r.name=o.name,r.displayName=o.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const u=this.clientOptions.uploader,f=await u.stat(n);r.sizeBytes=String(f.size);const h=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:f.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const g=await this.fetchUploadUrl(r,o);return u.upload(n,g,this)}async downloadFile(n){await this.clientOptions.downloader.download(n,this)}async fetchUploadUrl(n,o){var s;let r={};o!=null&&o.httpOptions?r=o.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${n.mimeType}`}};const u={file:n},f=await this.request({path:me("upload/v1beta/files",u._url),body:JSON.stringify(u),httpMethod:"POST",httpOptions:r});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(s=f==null?void 0:f.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function tg(e){var n;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const o=e.status;let s;!((n=e.headers.get("content-type"))===null||n===void 0)&&n.includes("application/json")?s=await e.json():s={error:{message:await e.text(),code:e.status,status:e.statusText}};const r=JSON.stringify(s);throw o>=400&&o<600?new Rr({message:r,status:o}):new Error(r)}}function d_(e,n){if(!n||Object.keys(n).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof e.body=="string"&&e.body.length>0)try{const u=JSON.parse(e.body);if(typeof u=="object"&&u!==null&&!Array.isArray(u))o=u;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(u,f){const h=Object.assign({},u);for(const g in f)if(Object.prototype.hasOwnProperty.call(f,g)){const m=f[g],v=h[g];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?h[g]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),h[g]=m)}return h}const r=s(o,n);e.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p_="mcp_used/unknown";let h_=!1;function jg(e){for(const n of e)if(m_(n)||typeof n=="object"&&"inputSchema"in n)return!0;return h_}function ey(e){var n;const o=(n=e[hc])!==null&&n!==void 0?n:"";e[hc]=(o+` ${p_}`).trimStart()}function m_(e){return e!==null&&typeof e=="object"&&e instanceof Ic}function g_(e,n=100){return Oo(this,arguments,function*(){let s,r=0;for(;r<n;){const u=yield tt(e.listTools({cursor:s}));for(const f of u.tools)yield yield tt(f),r++;if(!u.nextCursor)break;s=u.nextCursor}})}class Ic{constructor(n=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=n,this.config=o}static create(n,o){return new Ic(n,o)}async initialize(){var n,o,s,r;if(this.mcpTools.length>0)return;const u={},f=[];for(const v of this.mcpClients)try{for(var h=!0,g=(o=void 0,Xl(g_(v))),m;m=await g.next(),n=m.done,!n;h=!0){r=m.value,h=!1;const x=r;f.push(x);const T=x.name;if(u[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);u[T]=v}}catch(x){o={error:x}}finally{try{!h&&!n&&(s=g.return)&&await s.call(g)}finally{if(o)throw o.error}}this.mcpTools=f,this.functionNameToMcpClient=u}async tool(){return await this.initialize(),bT(this.mcpTools,this.config)}async callTool(n){await this.initialize();const o=[];for(const s of n)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let u;this.config.timeout&&(u={timeout:this.config.timeout});const f=await r.callTool({name:s.name,arguments:s.args},void 0,u);o.push({functionResponse:{name:s.name,response:f.isError?{error:f}:f}})}return o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function y_(e,n,o){const s=new vT;let r;o.data instanceof Blob?r=JSON.parse(await o.data.text()):r=JSON.parse(o.data),Object.assign(s,r),n(s)}class v_{constructor(n,o,s){this.apiClient=n,this.auth=o,this.webSocketFactory=s}async connect(n){var o,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),f=C_(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const v=new Promise(k=>{m=k}),x=n.callbacks,T=function(){m({})},E=this.apiClient,b={onopen:T,onmessage:k=>{y_(E,x.onmessage,k)},onerror:(o=x==null?void 0:x.onerror)!==null&&o!==void 0?o:function(k){},onclose:(s=x==null?void 0:x.onclose)!==null&&s!==void 0?s:function(k){}},A=this.webSocketFactory.create(g,T_(f),b);A.connect(),await v;const M={setup:{model:Ve(this.apiClient,n.model)}};return A.send(JSON.stringify(M)),new x_(A,this.apiClient)}}class x_{constructor(n,o){this.conn=n,this.apiClient=o}async setWeightedPrompts(n){if(!n.weightedPrompts||Object.keys(n.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=fS(n);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(n){n.musicGenerationConfig||(n.musicGenerationConfig={});const o=cS(n);this.conn.send(JSON.stringify(o))}sendPlaybackControl(n){const o={playbackControl:n};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Ho.PLAY)}pause(){this.sendPlaybackControl(Ho.PAUSE)}stop(){this.sendPlaybackControl(Ho.STOP)}resetContext(){this.sendPlaybackControl(Ho.RESET_CONTEXT)}close(){this.conn.close()}}function T_(e){const n={};return e.forEach((o,s)=>{n[s]=o}),n}function C_(e){const n=new Headers;for(const[o,s]of Object.entries(e))n.append(o,s);return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S_="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function E_(e,n,o){const s=new yT;let r;o.data instanceof Blob?r=await o.data.text():o.data instanceof ArrayBuffer?r=new TextDecoder().decode(o.data):r=o.data;const u=JSON.parse(r);if(e.isVertexAI()){const f=hS(u);Object.assign(s,f)}else Object.assign(s,u);n(s)}class __{constructor(n,o,s){this.apiClient=n,this.auth=o,this.webSocketFactory=s,this.music=new v_(this.apiClient,this.auth,this.webSocketFactory)}async connect(n){var o,s,r,u,f,h;if(n.config&&n.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const x=this.apiClient.getHeaders();n.config&&n.config.tools&&jg(n.config.tools)&&ey(x);const T=N_(x);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T);else{const Y=this.apiClient.getApiKey();let de="BidiGenerateContent",Ee="key";Y!=null&&Y.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),de="BidiGenerateContentConstrained",Ee="access_token"),v=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${de}?${Ee}=${Y}`}let E=()=>{};const b=new Promise(Y=>{E=Y}),A=n.callbacks,q=function(){var Y;(Y=A==null?void 0:A.onopen)===null||Y===void 0||Y.call(A),E({})},w=this.apiClient,M={onopen:q,onmessage:Y=>{E_(w,A.onmessage,Y)},onerror:(o=A==null?void 0:A.onerror)!==null&&o!==void 0?o:function(Y){},onclose:(s=A==null?void 0:A.onclose)!==null&&s!==void 0?s:function(Y){}},k=this.webSocketFactory.create(v,M_(T),M);k.connect(),await b;let P=Ve(this.apiClient,n.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const Y=this.apiClient.getProject(),de=this.apiClient.getLocation();P=`projects/${Y}/locations/${de}/`+P}let N={};this.apiClient.isVertexAI()&&((r=n.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(n.config===void 0?n.config={responseModalities:[Tr.AUDIO]}:n.config.responseModalities=[Tr.AUDIO]),!((u=n.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const $=(h=(f=n.config)===null||f===void 0?void 0:f.tools)!==null&&h!==void 0?h:[],oe=[];for(const Y of $)if(this.isCallableTool(Y)){const de=Y;oe.push(await de.tool())}else oe.push(Y);oe.length>0&&(n.config.tools=oe);const ce={model:P,config:n.config,callbacks:n.callbacks};return this.apiClient.isVertexAI()?N=uS(this.apiClient,ce):N=aS(this.apiClient,ce),delete N.config,k.send(JSON.stringify(N)),new b_(k,this.apiClient)}isCallableTool(n){return"callTool"in n&&typeof n.callTool=="function"}}const A_={turnComplete:!0};class b_{constructor(n,o){this.conn=n,this.apiClient=o}tLiveClientContent(n,o){if(o.turns!==null&&o.turns!==void 0){let s=[];try{s=hn(o.turns),n.isVertexAI()||(s=s.map(r=>Ir(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:s,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(n,o){let s=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?s=o.functionResponses:s=[o.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const u of s){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!n.isVertexAI()&&!("id"in u))throw new Error(S_)}return{toolResponse:{functionResponses:s}}}sendClientContent(n){n=Object.assign(Object.assign({},A_),n);const o=this.tLiveClientContent(this.apiClient,n);this.conn.send(JSON.stringify(o))}sendRealtimeInput(n){let o={};this.apiClient.isVertexAI()?o={realtimeInput:pS(n)}:o={realtimeInput:dS(n)},this.conn.send(JSON.stringify(o))}sendToolResponse(n){if(n.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,n);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function M_(e){const n={};return e.forEach((o,s)=>{n[s]=o}),n}function N_(e){const n=new Headers;for(const[o,s]of Object.entries(e))n.append(o,s);return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ng=10;function ig(e){var n,o,s;if(!((n=e==null?void 0:e.automaticFunctionCalling)===null||n===void 0)&&n.disable)return!0;let r=!1;for(const f of(o=e==null?void 0:e.tools)!==null&&o!==void 0?o:[])if(Fo(f)){r=!0;break}if(!r)return!0;const u=(s=e==null?void 0:e.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return u&&(u<0||!Number.isInteger(u))||u==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",u),!0):!1}function Fo(e){return"callTool"in e&&typeof e.callTool=="function"}function R_(e){var n,o,s;return(s=(o=(n=e.config)===null||n===void 0?void 0:n.tools)===null||o===void 0?void 0:o.some(r=>Fo(r)))!==null&&s!==void 0?s:!1}function I_(e){var n,o,s;return(s=(o=(n=e.config)===null||n===void 0?void 0:n.tools)===null||o===void 0?void 0:o.some(r=>!Fo(r)))!==null&&s!==void 0?s:!1}function og(e){var n;return!(!((n=e==null?void 0:e.automaticFunctionCalling)===null||n===void 0)&&n.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D_ extends Yi{constructor(n){super(),this.apiClient=n,this.generateContent=async o=>{var s,r,u,f,h;const g=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!R_(o)||ig(o.config))return await this.generateContentInternal(g);if(I_(o))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let m,v;const x=hn(g.contents),T=(u=(r=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&u!==void 0?u:ng;let E=0;for(;E<T&&(m=await this.generateContentInternal(g),!(!m.functionCalls||m.functionCalls.length===0));){const b=m.candidates[0].content,A=[];for(const q of(h=(f=o.config)===null||f===void 0?void 0:f.tools)!==null&&h!==void 0?h:[])if(Fo(q)){const M=await q.callTool(m.functionCalls);A.push(...M)}E++,v={role:"user",parts:A},g.contents=hn(g.contents),g.contents.push(b),g.contents.push(v),og(g.config)&&(x.push(b),x.push(v))}return og(g.config)&&(m.automaticFunctionCallingHistory=x),m},this.generateContentStream=async o=>{if(this.maybeMoveToResponseJsonSchem(o),ig(o.config)){const s=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(s=>{var r;let u;const f=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?u=g==null?void 0:g.safetyAttributes:f.push(g);let h;return u?h={generatedImages:f,positivePromptSafetyAttributes:u,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:f,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async o=>{var s;const f={config:Object.assign(Object.assign({},{queryBase:!0}),o==null?void 0:o.config)};if(this.apiClient.isVertexAI()&&!f.config.queryBase){if(!((s=f.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");f.config.filter="labels.tune-type:*"}return new es($i.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(f),f)},this.editImage=async o=>{const s={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(s.referenceImages=o.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async o=>{let s={numberOfImages:1,mode:"upscale"};o.config&&(s=Object.assign(Object.assign({},s),o.config));const r={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async o=>{if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(n){n.config&&n.config.responseSchema&&(n.config.responseJsonSchema||Object.keys(n.config.responseSchema).includes("$schema")&&(n.config.responseJsonSchema=n.config.responseSchema,delete n.config.responseSchema))}async processParamsMaybeAddMcpUsage(n){var o,s,r;const u=(o=n.config)===null||o===void 0?void 0:o.tools;if(!u)return n;const f=await Promise.all(u.map(async g=>Fo(g)?await g.tool():g)),h={model:n.model,contents:n.contents,config:Object.assign(Object.assign({},n.config),{tools:f})};if(h.config.tools=f,n.config&&n.config.tools&&jg(n.config.tools)){const g=(r=(s=n.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),ey(m),h.config.httpOptions=Object.assign(Object.assign({},n.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(n){var o,s,r;const u=new Map;for(const f of(s=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&s!==void 0?s:[])if(Fo(f)){const h=f,g=await h.tool();for(const m of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(u.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);u.set(m.name,h)}}return u}async processAfcStream(n){var o,s,r;const u=(r=(s=(o=n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:ng;let f=!1,h=0;const g=await this.initAfcToolsMap(n);return(function(m,v,x){var T,E;return Oo(this,arguments,function*(){for(var b,A,q,w;h<u;){f&&(h++,f=!1);const N=yield tt(m.processParamsMaybeAddMcpUsage(x)),$=yield tt(m.generateContentStreamInternal(N)),oe=[],ce=[];try{for(var M=!0,k=(A=void 0,Xl($)),P;P=yield tt(k.next()),b=P.done,!b;M=!0){w=P.value,M=!1;const Y=w;if(yield yield tt(Y),Y.candidates&&(!((T=Y.candidates[0])===null||T===void 0)&&T.content)){ce.push(Y.candidates[0].content);for(const de of(E=Y.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(h<u&&de.functionCall){if(!de.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(de.functionCall.name)){const Ee=yield tt(v.get(de.functionCall.name).callTool([de.functionCall]));oe.push(...Ee)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${de.functionCall.name}`)}}}}catch(Y){A={error:Y}}finally{try{!M&&!b&&(q=k.return)&&(yield tt(q.call(k)))}finally{if(A)throw A.error}}if(oe.length>0){f=!0;const Y=new Fl;Y.candidates=[{content:{role:"user",parts:oe}}],yield yield tt(Y);const de=[];de.push(...ce),de.push({role:"user",parts:oe});const Ee=hn(x.contents).concat(de);x.contents=Ee}else break}})})(this,g,n)}async generateContentInternal(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=Zm(this.apiClient,n);return h=me("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=jm(v),T=new Fl;return Object.assign(T,x),T})}else{const m=Qm(this.apiClient,n);return h=me("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=Wm(v),T=new Fl;return Object.assign(T,x),T})}}async generateContentStreamInternal(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=Zm(this.apiClient,n);return h=me("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}),f.then(function(x){return Oo(this,arguments,function*(){var T,E,b,A;try{for(var q=!0,w=Xl(x),M;M=yield tt(w.next()),T=M.done,!T;q=!0){A=M.value,q=!1;const k=A,P=jm(yield tt(k.json()));P.sdkHttpResponse={headers:k.headers};const N=new Fl;Object.assign(N,P),yield yield tt(N)}}catch(k){E={error:k}}finally{try{!q&&!T&&(b=w.return)&&(yield tt(b.call(w)))}finally{if(E)throw E.error}}})})}else{const m=Qm(this.apiClient,n);return h=me("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}),f.then(function(x){return Oo(this,arguments,function*(){var T,E,b,A;try{for(var q=!0,w=Xl(x),M;M=yield tt(w.next()),T=M.done,!T;q=!0){A=M.value,q=!1;const k=A,P=Wm(yield tt(k.json()));P.sdkHttpResponse={headers:k.headers};const N=new Fl;Object.assign(N,P),yield yield tt(N)}}catch(k){E={error:k}}finally{try{!q&&!T&&(b=w.return)&&(yield tt(b.call(w)))}finally{if(E)throw E.error}}})})}}async embedContent(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=FS(this.apiClient,n);return h=me("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=YS(v),T=new Um;return Object.assign(T,x),T})}else{const m=OS(this.apiClient,n);return h=me("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=$S(v),T=new Um;return Object.assign(T,x),T})}}async generateImagesInternal(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=tE(this.apiClient,n);return h=me("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=iE(v),T=new Pm;return Object.assign(T,x),T})}else{const m=eE(this.apiClient,n);return h=me("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=nE(v),T=new Pm;return Object.assign(T,x),T})}}async editImageInternal(n){var o,s;let r,u="",f={};if(this.apiClient.isVertexAI()){const h=BS(this.apiClient,n);return u=me("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=qS(g),v=new uT;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(n){var o,s;let r,u="",f={};if(this.apiClient.isVertexAI()){const h=ZE(this.apiClient,n);return u=me("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=WE(g),v=new cT;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(n){var o,s;let r,u="",f={};if(this.apiClient.isVertexAI()){const h=kE(this.apiClient,n);return u=me("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=UE(g),v=new fT;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(n){var o,s;let r,u="",f={};if(this.apiClient.isVertexAI()){const h=qE(this.apiClient,n);return u=me("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=zE(g),v=new dT;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=TE(this.apiClient,n);return h=me("{name}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>pc(v))}else{const m=xE(this.apiClient,n);return h=me("{name}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f.then(v=>dc(v))}}async listInternal(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=bE(this.apiClient,n);return h=me("{models_url}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=NE(v),T=new Lm;return Object.assign(T,x),T})}else{const m=AE(this.apiClient,n);return h=me("{models_url}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=ME(v),T=new Lm;return Object.assign(T,x),T})}}async update(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=XE(this.apiClient,n);return h=me("{model}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>pc(v))}else{const m=KE(this.apiClient,n);return h=me("{name}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f.then(v=>dc(v))}}async delete(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=PS(this.apiClient,n);return h=me("{name}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=GS(v),T=new Gm;return Object.assign(T,x),T})}else{const m=US(this.apiClient,n);return h=me("{name}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=LS(v),T=new Gm;return Object.assign(T,x),T})}}async countTokens(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=DS(this.apiClient,n);return h=me("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=kS(v),T=new Hm;return Object.assign(T,x),T})}else{const m=IS(this.apiClient,n);return h=me("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=wS(v),T=new Hm;return Object.assign(T,x),T})}}async computeTokens(n){var o,s;let r,u="",f={};if(this.apiClient.isVertexAI()){const h=ES(this.apiClient,n);return u=me("{model}:computeTokens",h._url),f=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=_S(g),v=new pT;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=uE(this.apiClient,n);return h=me("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>{const x=rE(v),T=new Cr;return Object.assign(T,x),T})}else{const m=aE(this.apiClient,n);return h=me("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f.then(v=>{const x=sE(v),T=new Cr;return Object.assign(T,x),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class w_ extends Yi{constructor(n){super(),this.apiClient=n}async getVideosOperation(n){const o=n.operation,s=n.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let u;s&&"httpOptions"in s&&(u=s.httpOptions);const f=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:f,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(n){const o=n.operation,s=n.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let u;s&&"httpOptions"in s&&(u=s.httpOptions);const f=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:f,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=sT(n);return h=me("{operationName}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f}else{const m=lT(n);return h=me("{operationName}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f}}async fetchPredictVideosOperationInternal(n){var o,s;let r,u="",f={};if(this.apiClient.isVertexAI()){const h=Wx(n);return u=me("{resourceName}:fetchPredictOperation",h._url),f=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k_(e){const n={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["data"]);o!=null&&p(n,["data"],o);const s=c(e,["mimeType"]);return s!=null&&p(n,["mimeType"],s),n}function U_(e){const n={},o=c(e,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>z_(u))),p(n,["parts"],r)}const s=c(e,["role"]);return s!=null&&p(n,["role"],s),n}function P_(e,n,o){const s={},r=c(n,["expireTime"]);o!==void 0&&r!=null&&p(o,["expireTime"],r);const u=c(n,["newSessionExpireTime"]);o!==void 0&&u!=null&&p(o,["newSessionExpireTime"],u);const f=c(n,["uses"]);o!==void 0&&f!=null&&p(o,["uses"],f);const h=c(n,["liveConnectConstraints"]);o!==void 0&&h!=null&&p(o,["bidiGenerateContentSetup"],q_(e,h));const g=c(n,["lockAdditionalFields"]);return o!==void 0&&g!=null&&p(o,["fieldMask"],g),s}function L_(e,n){const o={},s=c(n,["config"]);return s!=null&&p(o,["config"],P_(e,s,o)),o}function G_(e){const n={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["fileUri"]);o!=null&&p(n,["fileUri"],o);const s=c(e,["mimeType"]);return s!=null&&p(n,["mimeType"],s),n}function H_(e){const n={},o=c(e,["timeRangeFilter"]);if(o!=null&&p(n,["timeRangeFilter"],o),c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return n}function B_(e,n){const o={},s=c(e,["generationConfig"]);n!==void 0&&s!=null&&p(n,["setup","generationConfig"],s);const r=c(e,["responseModalities"]);n!==void 0&&r!=null&&p(n,["setup","generationConfig","responseModalities"],r);const u=c(e,["temperature"]);n!==void 0&&u!=null&&p(n,["setup","generationConfig","temperature"],u);const f=c(e,["topP"]);n!==void 0&&f!=null&&p(n,["setup","generationConfig","topP"],f);const h=c(e,["topK"]);n!==void 0&&h!=null&&p(n,["setup","generationConfig","topK"],h);const g=c(e,["maxOutputTokens"]);n!==void 0&&g!=null&&p(n,["setup","generationConfig","maxOutputTokens"],g);const m=c(e,["mediaResolution"]);n!==void 0&&m!=null&&p(n,["setup","generationConfig","mediaResolution"],m);const v=c(e,["seed"]);n!==void 0&&v!=null&&p(n,["setup","generationConfig","seed"],v);const x=c(e,["speechConfig"]);n!==void 0&&x!=null&&p(n,["setup","generationConfig","speechConfig"],Rc(x));const T=c(e,["thinkingConfig"]);n!==void 0&&T!=null&&p(n,["setup","generationConfig","thinkingConfig"],T);const E=c(e,["enableAffectiveDialog"]);n!==void 0&&E!=null&&p(n,["setup","generationConfig","enableAffectiveDialog"],E);const b=c(e,["systemInstruction"]);n!==void 0&&b!=null&&p(n,["setup","systemInstruction"],U_(It(b)));const A=c(e,["tools"]);if(n!==void 0&&A!=null){let $=Xo(A);Array.isArray($)&&($=$.map(oe=>O_(Ko(oe)))),p(n,["setup","tools"],$)}const q=c(e,["sessionResumption"]);n!==void 0&&q!=null&&p(n,["setup","sessionResumption"],V_(q));const w=c(e,["inputAudioTranscription"]);n!==void 0&&w!=null&&p(n,["setup","inputAudioTranscription"],w);const M=c(e,["outputAudioTranscription"]);n!==void 0&&M!=null&&p(n,["setup","outputAudioTranscription"],M);const k=c(e,["realtimeInputConfig"]);n!==void 0&&k!=null&&p(n,["setup","realtimeInputConfig"],k);const P=c(e,["contextWindowCompression"]);n!==void 0&&P!=null&&p(n,["setup","contextWindowCompression"],P);const N=c(e,["proactivity"]);return n!==void 0&&N!=null&&p(n,["setup","proactivity"],N),o}function q_(e,n){const o={},s=c(n,["model"]);s!=null&&p(o,["setup","model"],Ve(e,s));const r=c(n,["config"]);return r!=null&&p(o,["config"],B_(r,o)),o}function z_(e){const n={},o=c(e,["videoMetadata"]);o!=null&&p(n,["videoMetadata"],o);const s=c(e,["thought"]);s!=null&&p(n,["thought"],s);const r=c(e,["inlineData"]);r!=null&&p(n,["inlineData"],k_(r));const u=c(e,["fileData"]);u!=null&&p(n,["fileData"],G_(u));const f=c(e,["thoughtSignature"]);f!=null&&p(n,["thoughtSignature"],f);const h=c(e,["functionCall"]);h!=null&&p(n,["functionCall"],h);const g=c(e,["codeExecutionResult"]);g!=null&&p(n,["codeExecutionResult"],g);const m=c(e,["executableCode"]);m!=null&&p(n,["executableCode"],m);const v=c(e,["functionResponse"]);v!=null&&p(n,["functionResponse"],v);const x=c(e,["text"]);return x!=null&&p(n,["text"],x),n}function V_(e){const n={},o=c(e,["handle"]);if(o!=null&&p(n,["handle"],o),c(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function O_(e){const n={},o=c(e,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>m)),p(n,["functionDeclarations"],g)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(e,["googleSearch"]);s!=null&&p(n,["googleSearch"],H_(s));const r=c(e,["googleSearchRetrieval"]);if(r!=null&&p(n,["googleSearchRetrieval"],r),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const u=c(e,["urlContext"]);u!=null&&p(n,["urlContext"],u);const f=c(e,["computerUse"]);f!=null&&p(n,["computerUse"],f);const h=c(e,["codeExecution"]);return h!=null&&p(n,["codeExecution"],h),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F_(e){const n=[];for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const s=e[o];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(u=>`${o}.${u}`);n.push(...r)}else n.push(o)}return n.join(",")}function $_(e,n){let o=null;const s=e.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const u=s.setup;typeof u=="object"&&u!==null?(e.bidiGenerateContentSetup=u,o=u):delete e.bidiGenerateContentSetup}else s!==void 0&&delete e.bidiGenerateContentSetup;const r=e.fieldMask;if(o){const u=F_(o);if(Array.isArray(n==null?void 0:n.lockAdditionalFields)&&(n==null?void 0:n.lockAdditionalFields.length)===0)u?e.fieldMask=u:delete e.fieldMask;else if(n!=null&&n.lockAdditionalFields&&n.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const f=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(m=>f.includes(m)?`generationConfig.${m}`:m));const g=[];u&&g.push(u),h.length>0&&g.push(...h),g.length>0?e.fieldMask=g.join(","):delete e.fieldMask}else delete e.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?e.fieldMask=r.join(","):delete e.fieldMask;return e}class Y_ extends Yi{constructor(n){super(),this.apiClient=n}async create(n){var o,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=L_(this.apiClient,n);u=me("auth_tokens",h._url),f=h._query,delete h.config,delete h._url,delete h._query;const g=$_(h,n.config);return r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J_(e){const n={},o=c(e,["name"]);return o!=null&&p(n,["_url","name"],o),n}function K_(e){const n={},o=c(e,["name"]);return o!=null&&p(n,["_url","name"],o),n}function X_(e,n){const o={};if(c(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=c(e,["tunedModelDisplayName"]);if(n!==void 0&&s!=null&&p(n,["displayName"],s),c(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=c(e,["epochCount"]);n!==void 0&&r!=null&&p(n,["tuningTask","hyperparameters","epochCount"],r);const u=c(e,["learningRateMultiplier"]);if(u!=null&&p(o,["tuningTask","hyperparameters","learningRateMultiplier"],u),c(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=c(e,["batchSize"]);n!==void 0&&f!=null&&p(n,["tuningTask","hyperparameters","batchSize"],f);const h=c(e,["learningRate"]);if(n!==void 0&&h!=null&&p(n,["tuningTask","hyperparameters","learningRate"],h),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return o}function Q_(e,n){const o={},s=c(e,["validationDataset"]);n!==void 0&&s!=null&&p(n,["supervisedTuningSpec"],fA(s,o));const r=c(e,["tunedModelDisplayName"]);n!==void 0&&r!=null&&p(n,["tunedModelDisplayName"],r);const u=c(e,["description"]);n!==void 0&&u!=null&&p(n,["description"],u);const f=c(e,["epochCount"]);n!==void 0&&f!=null&&p(n,["supervisedTuningSpec","hyperParameters","epochCount"],f);const h=c(e,["learningRateMultiplier"]);n!==void 0&&h!=null&&p(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const g=c(e,["exportLastCheckpointOnly"]);n!==void 0&&g!=null&&p(n,["supervisedTuningSpec","exportLastCheckpointOnly"],g);const m=c(e,["adapterSize"]);if(n!==void 0&&m!=null&&p(n,["supervisedTuningSpec","hyperParameters","adapterSize"],m),c(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=c(e,["labels"]);return n!==void 0&&v!=null&&p(n,["labels"],v),o}function Z_(e){const n={},o=c(e,["baseModel"]);o!=null&&p(n,["baseModel"],o);const s=c(e,["preTunedModel"]);s!=null&&p(n,["preTunedModel"],s);const r=c(e,["trainingDataset"]);r!=null&&p(n,["tuningTask","trainingData"],aA(r));const u=c(e,["config"]);return u!=null&&X_(u,n),n}function W_(e){const n={},o=c(e,["baseModel"]);o!=null&&p(n,["baseModel"],o);const s=c(e,["preTunedModel"]);s!=null&&p(n,["preTunedModel"],s);const r=c(e,["trainingDataset"]);r!=null&&p(n,["supervisedTuningSpec","trainingDatasetUri"],uA(r,n));const u=c(e,["config"]);return u!=null&&Q_(u,n),n}function j_(e){const n={},o=c(e,["name"]);return o!=null&&p(n,["_url","name"],o),n}function eA(e){const n={},o=c(e,["name"]);return o!=null&&p(n,["_url","name"],o),n}function tA(e,n){const o={},s=c(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const r=c(e,["pageToken"]);n!==void 0&&r!=null&&p(n,["_query","pageToken"],r);const u=c(e,["filter"]);return n!==void 0&&u!=null&&p(n,["_query","filter"],u),o}function nA(e,n){const o={},s=c(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const r=c(e,["pageToken"]);n!==void 0&&r!=null&&p(n,["_query","pageToken"],r);const u=c(e,["filter"]);return n!==void 0&&u!=null&&p(n,["_query","filter"],u),o}function iA(e){const n={},o=c(e,["config"]);return o!=null&&tA(o,n),n}function oA(e){const n={},o=c(e,["config"]);return o!=null&&nA(o,n),n}function lA(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const r=c(e,["tunedModels"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>ty(f))),p(n,["tuningJobs"],u)}return n}function sA(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const r=c(e,["tuningJobs"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>mc(f))),p(n,["tuningJobs"],u)}return n}function rA(e){const n={},o=c(e,["name"]);o!=null&&p(n,["model"],o);const s=c(e,["name"]);return s!=null&&p(n,["endpoint"],s),n}function aA(e){const n={};if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=c(e,["examples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),p(n,["examples","examples"],s)}return n}function uA(e,n){const o={},s=c(e,["gcsUri"]);n!==void 0&&s!=null&&p(n,["supervisedTuningSpec","trainingDatasetUri"],s);const r=c(e,["vertexDatasetResource"]);if(n!==void 0&&r!=null&&p(n,["supervisedTuningSpec","trainingDatasetUri"],r),c(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function ty(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["name"]);s!=null&&p(n,["name"],s);const r=c(e,["state"]);r!=null&&p(n,["state"],Lg(r));const u=c(e,["createTime"]);u!=null&&p(n,["createTime"],u);const f=c(e,["tuningTask","startTime"]);f!=null&&p(n,["startTime"],f);const h=c(e,["tuningTask","completeTime"]);h!=null&&p(n,["endTime"],h);const g=c(e,["updateTime"]);g!=null&&p(n,["updateTime"],g);const m=c(e,["description"]);m!=null&&p(n,["description"],m);const v=c(e,["baseModel"]);v!=null&&p(n,["baseModel"],v);const x=c(e,["_self"]);x!=null&&p(n,["tunedModel"],rA(x));const T=c(e,["customBaseModel"]);T!=null&&p(n,["customBaseModel"],T);const E=c(e,["experiment"]);E!=null&&p(n,["experiment"],E);const b=c(e,["labels"]);b!=null&&p(n,["labels"],b);const A=c(e,["outputUri"]);A!=null&&p(n,["outputUri"],A);const q=c(e,["pipelineJob"]);q!=null&&p(n,["pipelineJob"],q);const w=c(e,["serviceAccount"]);w!=null&&p(n,["serviceAccount"],w);const M=c(e,["tunedModelDisplayName"]);M!=null&&p(n,["tunedModelDisplayName"],M);const k=c(e,["veoTuningSpec"]);return k!=null&&p(n,["veoTuningSpec"],k),n}function mc(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["name"]);s!=null&&p(n,["name"],s);const r=c(e,["state"]);r!=null&&p(n,["state"],Lg(r));const u=c(e,["createTime"]);u!=null&&p(n,["createTime"],u);const f=c(e,["startTime"]);f!=null&&p(n,["startTime"],f);const h=c(e,["endTime"]);h!=null&&p(n,["endTime"],h);const g=c(e,["updateTime"]);g!=null&&p(n,["updateTime"],g);const m=c(e,["error"]);m!=null&&p(n,["error"],m);const v=c(e,["description"]);v!=null&&p(n,["description"],v);const x=c(e,["baseModel"]);x!=null&&p(n,["baseModel"],x);const T=c(e,["tunedModel"]);T!=null&&p(n,["tunedModel"],T);const E=c(e,["preTunedModel"]);E!=null&&p(n,["preTunedModel"],E);const b=c(e,["supervisedTuningSpec"]);b!=null&&p(n,["supervisedTuningSpec"],b);const A=c(e,["tuningDataStats"]);A!=null&&p(n,["tuningDataStats"],A);const q=c(e,["encryptionSpec"]);q!=null&&p(n,["encryptionSpec"],q);const w=c(e,["partnerModelTuningSpec"]);w!=null&&p(n,["partnerModelTuningSpec"],w);const M=c(e,["customBaseModel"]);M!=null&&p(n,["customBaseModel"],M);const k=c(e,["experiment"]);k!=null&&p(n,["experiment"],k);const P=c(e,["labels"]);P!=null&&p(n,["labels"],P);const N=c(e,["outputUri"]);N!=null&&p(n,["outputUri"],N);const $=c(e,["pipelineJob"]);$!=null&&p(n,["pipelineJob"],$);const oe=c(e,["serviceAccount"]);oe!=null&&p(n,["serviceAccount"],oe);const ce=c(e,["tunedModelDisplayName"]);ce!=null&&p(n,["tunedModelDisplayName"],ce);const Y=c(e,["veoTuningSpec"]);return Y!=null&&p(n,["veoTuningSpec"],Y),n}function cA(e){const n={},o=c(e,["sdkHttpResponse"]);o!=null&&p(n,["sdkHttpResponse"],o);const s=c(e,["name"]);s!=null&&p(n,["name"],s);const r=c(e,["metadata"]);r!=null&&p(n,["metadata"],r);const u=c(e,["done"]);u!=null&&p(n,["done"],u);const f=c(e,["error"]);return f!=null&&p(n,["error"],f),n}function fA(e,n){const o={},s=c(e,["gcsUri"]);s!=null&&p(o,["validationDatasetUri"],s);const r=c(e,["vertexDatasetResource"]);return n!==void 0&&r!=null&&p(n,["supervisedTuningSpec","trainingDatasetUri"],r),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dA extends Yi{constructor(n){super(),this.apiClient=n,this.get=async o=>await this.getInternal(o),this.list=async(o={})=>new es($i.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.tune=async o=>{var s;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const r={tunedModelName:o.baseModel};!((s=o.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=o.config.preTunedModelCheckpointId);const u=Object.assign(Object.assign({},o),{preTunedModel:r});return u.baseModel=void 0,await this.tuneInternal(u)}else{const r=Object.assign({},o);return await this.tuneInternal(r)}else{const r=Object.assign({},o),u=await this.tuneMldevInternal(r);let f="";return u.metadata!==void 0&&u.metadata.tunedModel!==void 0?f=u.metadata.tunedModel:u.name!==void 0&&u.name.includes("/operations/")&&(f=u.name.split("/operations/")[0]),{name:f,state:ac.JOB_STATE_QUEUED}}}}async getInternal(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=eA(n);return h=me("{name}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>mc(v))}else{const m=j_(n);return h=me("{name}",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>ty(v))}}async listInternal(n){var o,s,r,u;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=oA(n);return h=me("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=sA(v),T=new Bm;return Object.assign(T,x),T})}else{const m=iA(n);return h=me("tunedModels",m._url),g=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const x=lA(v),T=new Bm;return Object.assign(T,x),T})}}async cancel(n){var o,s,r,u;let f="",h={};if(this.apiClient.isVertexAI()){const g=K_(n);f=me("{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=J_(n);f=me("{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=n.config)===null||u===void 0?void 0:u.abortSignal})}}async tuneInternal(n){var o,s;let r,u="",f={};if(this.apiClient.isVertexAI()){const h=W_(n);return u=me("tuningJobs",h._url),f=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>mc(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(n){var o,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Z_(n);return u=me("tunedModels",h._url),f=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>cA(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pA{async download(n,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const hA=1024*1024*8,mA=3,gA=1e3,yA=2,nc="x-goog-upload-status";async function vA(e,n,o){var s,r,u;let f=0,h=0,g=new uc(new Response),m="upload";for(f=e.size;h<f;){const x=Math.min(hA,f-h),T=e.slice(h,h+x);h+x>=f&&(m+=", finalize");let E=0,b=gA;for(;E<mA&&(g=await o.request({path:"",body:T,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:n,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(h),"Content-Length":String(x)}}}),!(!((s=g==null?void 0:g.headers)===null||s===void 0)&&s[nc]));)E++,await TA(b),b=b*yA;if(h+=x,((r=g==null?void 0:g.headers)===null||r===void 0?void 0:r[nc])!=="active")break;if(f<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(g==null?void 0:g.json());if(((u=g==null?void 0:g.headers)===null||u===void 0?void 0:u[nc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function xA(e){return{size:e.size,type:e.type}}function TA(e){return new Promise(n=>setTimeout(n,e))}class CA{async upload(n,o,s){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await vA(n,o,s)}async stat(n){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await xA(n)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SA{create(n,o,s){return new EA(n,o,s)}}class EA{constructor(n,o,s){this.url=n,this.headers=o,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(n){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(n)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lg="x-goog-api-key";class _A{constructor(n){this.apiKey=n}async addAuthHeaders(n){if(n.get(lg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");n.append(lg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AA="gl-node/";class bA{constructor(n){var o;if(n.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(n.project||n.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=n.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=n.apiKey;const s=Zx(n.httpOptions,n.vertexai,void 0,void 0);s&&(n.httpOptions?n.httpOptions.baseUrl=s:n.httpOptions={baseUrl:s}),this.apiVersion=n.apiVersion;const r=new _A(this.apiKey);this.apiClient=new f_({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:n.httpOptions,userAgentExtra:AA+"web",uploader:new CA,downloader:new pA}),this.models=new D_(this.apiClient),this.live=new __(this.apiClient,r,new SA),this.batches=new pC(this.apiClient),this.chats=new FC(this.models,this.apiClient),this.caches=new zC(this.apiClient),this.files=new eS(this.apiClient),this.operations=new w_(this.apiClient),this.authTokens=new Y_(this.apiClient),this.tunings=new dA(this.apiClient)}}const ny=`using System;
using System.Collections.Generic;
using UnityEngine;
using Object = UnityEngine.Object;

public class BaseBehaviour : MonoBehaviour
{
    private static readonly Dictionary<Type, object> FindDictionary = new Dictionary<Type, object>();
    private readonly Dictionary<Type, object> GetDictionary = new Dictionary<Type, object>();
    private readonly Dictionary<Type, object> GetChildDictionary = new Dictionary<Type, object>();
    private readonly Dictionary<string, object> CreateIfNotExistDictionary = new Dictionary<string, object>();

    protected static T SingleFind<T>() where T : Object
    {
        var type = typeof(T);
        if (!FindDictionary.ContainsKey(type)) FindDictionary[type] = FindObjectOfType<T>();
        return (T) FindDictionary[type];
    }

    protected T SingleGet<T>() where T : Object
    {
        var type = typeof(T);
        if (!GetDictionary.ContainsKey(type)) GetDictionary[type] = GetComponent<T>();
        return (T) GetDictionary[type];
    }

    protected T SingleGetChild<T>(bool includeInactive = true) where T : Object
    {
        var type = typeof(T);
        if (!GetChildDictionary.ContainsKey(type))
            GetChildDictionary[type] = GetComponentInChildren<T>(includeInactive);
        return (T) GetChildDictionary[type];
    }

    protected T SingleCreateIfNotExist<T>(string customName, Func<T> createFunc)
    {
        return SingleCreateIfNotExist(createFunc, customName);
    }

    protected T SingleCreateIfNotExist<T>(Func<T> createFunc, string customName = null)
    {
        var dictKey = typeof(T).ToString();
        if (!string.IsNullOrEmpty(customName)) dictKey = customName;
        if (!CreateIfNotExistDictionary.ContainsKey(dictKey)) CreateIfNotExistDictionary[dictKey] = createFunc();
        return (T) CreateIfNotExistDictionary[dictKey];
    }

    public void SetSingleCreateIfNotExist<T>(T obj, string customName = null)
    {
        var dictKey = typeof(T).ToString();
        if (!string.IsNullOrEmpty(customName)) dictKey = customName;
        CreateIfNotExistDictionary[dictKey] = obj;
    }

    public T GetSingleCreate<T>(string customName = null) where T : Object
    {
        var dictKey = typeof(T).ToString();
        if (!string.IsNullOrEmpty(customName)) dictKey = customName;
        if (CreateIfNotExistDictionary.TryGetValue(dictKey, out var obj))
        {
            return (T)obj;
        }
        return null;
    }

    protected void SingleClear<T>()
    {
        var type = typeof(T);
        var typeStr = type.ToString();
        if (CreateIfNotExistDictionary.ContainsKey(typeStr))
        {
            CreateIfNotExistDictionary.Remove(typeStr);
        }
        if (FindDictionary.ContainsKey(type))
        {
            FindDictionary.Remove(type);
        }
    }

    protected void SingleClear(string customName)
    {
        if (CreateIfNotExistDictionary.ContainsKey(customName))
        {
            CreateIfNotExistDictionary.Remove(customName);
        }
    }

    protected void SingleClearCreateIfNotExist()
    {
        CreateIfNotExistDictionary.Clear();
    }

    protected void SingleClearFind()
    {
        FindDictionary.Clear();
    }
}
`,MA=`using System;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.Serialization;

namespace IEC
{
    public class GridInputHandler : _BaseBehaviour
    {
        private GridManager GridManager => InGame.gridManager;

        // for game play handle
        private bool _isDragging;
        private bool _isDragTail;
        private SnakeObject _currentSelectSnake;
        private Vector3 _offsetMouse;
        private Vector3 _lastMousePosition;

        private GridTile _currentHitTile;

        private void Start()
        {
            EventController.AddObserver(EventList.InGame.SnakeMoveOut, StopDragging);
        }

        private void Update()
        {
            HandleInput();
            // if (_currentSelectSnake == null) return;

            // if (Input.GetKeyDown(KeyCode.Keypad8))
            // {
            //     StartCoroutine(_currentSelectSnake.ExecuteSingleMove(Vector2Int.up));
            // }
            // if (Input.GetKeyDown(KeyCode.Keypad2))
            // {
            //     StartCoroutine(_currentSelectSnake.ExecuteSingleMove(Vector2Int.down));
            // }
            // if (Input.GetKeyDown(KeyCode.Keypad4))
            // {
            //     StartCoroutine(_currentSelectSnake.ExecuteSingleMove(Vector2Int.left));
            // }
            // if (Input.GetKeyDown(KeyCode.Keypad6))
            // {
            //     StartCoroutine(_currentSelectSnake.ExecuteSingleMove(Vector2Int.right));
            // }

            if (Input.GetKeyDown(KeyCode.A))
            {
                foreach (var occupiedTile in _currentSelectSnake.listOccupiedTiles)
                {
                    Debug.Log("---> " + occupiedTile.gridPos);
                }
            }
        }

        #region Handle Input

        private void HandleInput()
        {
            // Check if any popup is showing - if so, don't handle input
            if (UI.hasPopupShowed)
            {
                return;
            }

            if (InGame.gameState == GameState.Playing)
            {
                HandleDragSnake();
                return;
            }

            if (InGame.gameState == GameState.UsingHelper && InGame.UsingHelper == ResourceType.Grabber)
            {
                if (Input.GetMouseButtonDown(0))
                {
                    var snake = GetSnakeInput();
                    if (!snake || !snake.CanGrab())
                    {
                        return;
                    }

                    GridManager.GrabSnake(snake);
                }
            }
        }

        private void HandleDragSnake()
        {
            if (Input.GetMouseButtonDown(0))
            {
                TryStartDragging();
            }
            else if (Input.GetMouseButtonUp(0) && _isDragging)
            {
                StopDragging();
            }
            else if (_isDragging)
            {
                OnDrag();
            }
            
        }

        private SnakeObject GetSnakeInput()
        {
            var mouseWorldPos = GridManager.GetMouseWorldPosition();
            var gridTile = GridManager.GetNearestValidGridTile(mouseWorldPos);
            if (!gridTile || gridTile.status != GridStatus.Pet) return null;
            var snake = gridTile.snakeObject;
            if (!snake || !snake.CanMove()) return null;
            return snake;
        }

        private (SnakeObject, GridTile) GetSnakeNearestInput()
        {
            var mouseWorldPos = GridManager.GetMouseWorldPosition();
            var gridTile = GridManager.GetNearestValidGridTile(mouseWorldPos);
            if (!gridTile || gridTile.movableObject) return (null, null);

            foreach (var direction in InGame.gridManager.GetPositionAroundPosition(gridTile.gridPos))
            {
                var expandGrid = GridManager.GetGridTile(gridTile.gridPos + direction);
                if (!expandGrid || expandGrid.status != GridStatus.Pet) continue;
                var snake = expandGrid.snakeObject;
                if (!snake || !snake.CanMove()) continue;

                var index = snake.listOccupiedTiles.IndexOf(expandGrid);
                if (index != 0 && index != snake.listOccupiedTiles.Count - 1) continue;
                return (snake, expandGrid);
            }

            return (null, null);
        }

        private void TryStartDragging()
        {
            var mouseWorldPos = GridManager.GetMouseWorldPosition();
            var gridTile = GridManager.GetNearestValidGridTile(mouseWorldPos);
            _currentSelectSnake = GetSnakeInput();
            if (!_currentSelectSnake)
            {
                var infoAround = GetSnakeNearestInput();
                _currentSelectSnake = infoAround.Item1;
                if (!_currentSelectSnake) return;
                gridTile = infoAround.Item2;
                if (!gridTile) return;
            }

            // Debug.Log($"select snake: {_currentSelectSnake.name} -> grid pos: {gridTile.gridPos}");
            EventController.Notify(EventList.InGame.SelectSnake);
            _isDragging = true;
            var index = _currentSelectSnake.listOccupiedTiles.IndexOf(gridTile);
            _isDragTail = index > _currentSelectSnake.listOccupiedTiles.Count / 2;
            _lastMousePosition = mouseWorldPos;
        }

        private void OnDrag()
        {
            if (!_isDragging) return;
            if (!_currentSelectSnake) return;
            if (_currentSelectSnake.IsMoving) return;
            if (_currentSelectSnake.IsDone) return;

            var mousePos = GridManager.GetMouseWorldPosition();
            _offsetMouse = mousePos - _lastMousePosition;
            var targetTile = GridManager.GetNearestValidGridTile(mousePos);

            var targetTileIsSnapTile = false;
            if (!targetTile || !targetTile.CanMoveInForInput(_currentSelectSnake))
            {
                // smart find tile
                targetTile = GetSnapTileWithMouseOffset();
                targetTileIsSnapTile = targetTile;
            }

            if (!targetTile)
            {
                _currentSelectSnake.AlignBodyToGrid();
                return;
            }

            if (targetTile.CanMoveIn(_currentSelectSnake))
            {
                // Debug.Log("move normal");
                NormalMoveSnake(targetTile);
                return;
            }

            if (targetTile.status == GridStatus.Pet)
            {
                if (_currentSelectSnake.IsContainTile(targetTile))
                {
                    var index = _currentSelectSnake.listOccupiedTiles.IndexOf(targetTile);
                    var current = !_isDragTail ? 0 : _currentSelectSnake.listOccupiedTiles.Count;
                    var offset = Math.Abs(index - current);
                    // Debug.Log($"index: {index}, current: {current}, offset: {offset}");

                    if (offset > 2)
                    {
                        _currentSelectSnake.AlignBodyToGrid();
                        return;
                    }

                    //todo: find the reverse target tile
                    var moveBackTile = GetMoveBackTile(_isDragTail);
                    if (moveBackTile && moveBackTile.CanMoveIn(_currentSelectSnake))
                    {
                        ReverseMoveSnake(moveBackTile);
                        return;
                    }
                }
            }

            if (_currentSelectSnake.IsMoving)
                return; // Wait for grid movement to complete before allowing cursor following
    
            FollowCursorMoveSnake(targetTile, targetTileIsSnapTile);
        }

        private void StopDragging()
        {
            _isDragging = false;
            if (_currentSelectSnake)
            {
                // _currentSelectSnake.AlignBodyToGrid();
                _currentSelectSnake.OnStopDrag();
            }

            _currentSelectSnake = null;
        }
        

        private GridTile GetSnapTileWithMouseOffset(bool normalizeOffset = false, bool alsoCheckInvertedOffset = true)
        {
            var currentInteractTile =
                _isDragTail ? _currentSelectSnake.GetTailTile() : _currentSelectSnake.GetHeadTile();
            if (!currentInteractTile) return null;
            var offsetMouse = GridManager.GetMouseWorldPosition() - currentInteractTile.transform.position;
            return GetSnapTileWithMouseOffset(offsetMouse, currentInteractTile, normalizeOffset,
                alsoCheckInvertedOffset);
        }

        private GridTile GetSnapTileWithMouseOffset(Vector3 offsetMouse, GridTile currentInteractTile = null,
            bool normalizeOffset = false, bool alsoCheckInvertedOffset = true)
        {
            currentInteractTile ??= _isDragTail ? _currentSelectSnake.GetTailTile() : _currentSelectSnake.GetHeadTile();

            var offsetCheck = normalizeOffset ? GetDirectionNormalized(offsetMouse) : GetDirection(offsetMouse);

            var normalCandidate = GridManager.GetNearestValidGridTile(currentInteractTile.gridPos + offsetCheck);
            if (!alsoCheckInvertedOffset)
                return normalCandidate;
            if (normalCandidate && normalCandidate != currentInteractTile &&
                normalCandidate.CanMoveInForInput(_currentSelectSnake))
            {
                return normalCandidate;
            }

            offsetCheck = normalizeOffset
                ? GetDirectionNormalizedInverted(offsetMouse)
                : GetDirectionInverted(offsetMouse);
            var invertedCandidate = GridManager.GetNearestValidGridTile(currentInteractTile.gridPos + offsetCheck);
            if (invertedCandidate && invertedCandidate != currentInteractTile &&
                invertedCandidate.CanMoveInForInput(_currentSelectSnake))
            {
                return invertedCandidate;
            }

            return normalCandidate;
        }

        private GridTile GetMoveBackTile(bool isDragTail, bool normalizeOffset = false)
        {
            var currentInteractTile =
                isDragTail ? _currentSelectSnake.GetTailTile() : _currentSelectSnake.GetHeadTile();

            var offsetMouse = GridManager.GetMouseWorldPosition() - currentInteractTile.transform.position;
            var anchorTile = isDragTail ? _currentSelectSnake.GetHeadTile() : _currentSelectSnake.GetTailTile();
            var mouseDir = normalizeOffset ? GetDirectionNormalized(offsetMouse) : GetDirection(offsetMouse);

            if (mouseDir == Vector2Int.zero) return null;

            var offsetCheck = isDragTail
                ? _currentSelectSnake.GetHeadDirection()
                : _currentSelectSnake.GetTailDirection();
            var checkTile = GridManager.GetGridTile(anchorTile.gridPos + offsetCheck);
            if (checkTile && checkTile.CanMoveIn(_currentSelectSnake))
            {
                return checkTile;
            }

            // Debug.Log("can not found forward tile -> find remain tile ");

            var listDirection = new List<Vector2Int>()
            {
                Vector2Int.up,
                Vector2Int.right,
                Vector2Int.down,
                Vector2Int.left,
            };
            listDirection.Remove(offsetCheck);

            // u tin tm v hng bn phi so vi offsetCheck
            var rightDirection = GetRightDirection(offsetCheck);
            if (listDirection.Contains(rightDirection))
            {
                var rightTile = GridManager.GetGridTile(anchorTile.gridPos + rightDirection);
                if (rightTile && rightTile.CanMoveIn(_currentSelectSnake))
                {
                    return rightTile;
                }
            }

            // Nu khng tm thy hng bn phi, kim tra cc hng cn li
            for (var index = 0; index < listDirection.Count; index++)
            {
                var dir = listDirection[index];
                var secondCheckTile = GridManager.GetGridTile(anchorTile.gridPos + dir);
                if (!secondCheckTile || !secondCheckTile.CanMoveIn(_currentSelectSnake)) continue;
                return secondCheckTile;
            }

            return null;
        }

        private Vector2Int GetRightDirection(Vector2Int direction)
        {
            // Tr v hng bn phi so vi direction
            if (direction == Vector2Int.up) return Vector2Int.right;
            if (direction == Vector2Int.right) return Vector2Int.down;
            if (direction == Vector2Int.down) return Vector2Int.left;
            if (direction == Vector2Int.left) return Vector2Int.up;
            return Vector2Int.zero;
        }

        private void NormalMoveSnake(GridTile targetTile)
        {
            if (!targetTile) return;
            if (targetTile.CanMoveIn(_currentSelectSnake))
            {
                _currentSelectSnake.TryMoveToEmptyTile(targetTile, _isDragTail);
            }
        }

        private void ReverseMoveSnake(GridTile targetTile)
        {
            if (!targetTile) return;
            if (targetTile.CanMoveIn(_currentSelectSnake))
            {
                _currentSelectSnake.TryMoveToEmptyTile(targetTile, !_isDragTail);
            }
        }


        private void FollowCursorMoveSnake(GridTile targetTile, bool isSnapTile)
        {
            if (!targetTile.CanMoveIn(_currentSelectSnake))
            {
                var currentInteractTile =
                    _isDragTail ? _currentSelectSnake.GetTailTile() : _currentSelectSnake.GetHeadTile();
                if (isSnapTile)
                    targetTile = currentInteractTile;
                if (currentInteractTile != targetTile)
                    return;

                var offsetMouse = GridManager.GetMouseWorldPosition() - currentInteractTile.transform.position;
                if (isSnapTile)
                {
                    var absX = Math.Abs(offsetMouse.x);
                    var absZ = Math.Abs(offsetMouse.z);
                    if (absX > 0.5f && absX > absZ)
                    {
                        offsetMouse.x = 0f;
                    }
                    else if (absZ > 0.5f && absZ > absX)
                    {
                        offsetMouse.z = 0f;
                    }
                }

                offsetMouse = Vector3.ClampMagnitude(offsetMouse, 0.49999f);
                // offsetMouse.x = 0;

                var offsetCheck = new Vector2(offsetMouse.x, offsetMouse.z);

                if (offsetCheck.sqrMagnitude < 0.0025f)
                    return;
                
                var occupiedTiles = _currentSelectSnake.listOccupiedTiles;
                var currentInteractTileIndex = occupiedTiles.IndexOf(currentInteractTile);
                var adjacentInteractTile =
                    occupiedTiles[_isDragTail ? currentInteractTileIndex - 1 : currentInteractTileIndex + 1];
                var targetTileToAdjacent = adjacentInteractTile.gridPos - targetTile.gridPos;
                var offsetPos = targetTile.gridPos + offsetCheck;
                var isNormalMove = Vector2.Dot(offsetPos - targetTile.gridPos,
                    targetTileToAdjacent) < 0;

                // todo: use getmovebacktile for special case to determine in moving back scenarios, where to that point be
                // use isNormalMove to determine
                if (!isNormalMove)
                {
                    targetTile = occupiedTiles[occupiedTiles.Count - 1 - occupiedTiles.IndexOf(targetTile)];
                    int targetTileIndex = occupiedTiles.IndexOf(targetTile);

                    var moveBackTile = GetMoveBackTile(_isDragTail, true);
                    if (moveBackTile)
                    {
                        offsetCheck = GetDirectionNonRounded(moveBackTile.transform.position -
                                                             targetTile.transform.position);
                    }
                    else
                    {
                        var adjacentOccupiedTile =
                            occupiedTiles[!_isDragTail ? targetTileIndex - 1 : targetTileIndex + 1];
                        offsetCheck = GetDirectionNonRounded(occupiedTiles[targetTileIndex].transform.position -
                                                             adjacentOccupiedTile.transform.position);
                    }

                    offsetCheck = offsetCheck.normalized * (targetTileToAdjacent.magnitude -
                                                            (offsetPos - adjacentInteractTile.gridPos)
                                                            .magnitude);
                }

                var isMoveFromTail = isNormalMove ? _isDragTail : !_isDragTail;
                _currentSelectSnake.FollowCursorWithinTile(targetTile, isMoveFromTail, offsetCheck);
            }
        }


        // private void OnDrawGizmos()
        // {
        //     if (!_currentSelectSnake)
        //         return;
        //     var start = _currentSelectSnake.head.transform.position + Vector3.up;
        //     Gizmos.DrawLine(start, start + _offsetMouse);
        // }
        
        #endregion

        #region Helper method

        public static Vector2Int GetDirection(Vector3 offset)
        {
            var offsetCheck = Vector2Int.zero;

            if (Math.Abs(offset.x) >= Math.Abs(offset.z))
            {
                var xOffset = Mathf.RoundToInt(offset.x);
                if (xOffset > 0) offsetCheck = Vector2Int.right;
                if (xOffset < 0) offsetCheck = Vector2Int.left;
            }
            else
            {
                var yOffset = Mathf.RoundToInt(offset.z);
                if (yOffset > 0) offsetCheck = Vector2Int.up;
                if (yOffset < 0) offsetCheck = Vector2Int.down;
            }

            return offsetCheck;
        }

        public static Vector2Int GetDirectionInverted(Vector3 offset)
        {
            var offsetCheck = Vector2Int.zero;

            if (Math.Abs(offset.x) < Math.Abs(offset.z))
            {
                var xOffset = Mathf.RoundToInt(offset.x);
                if (xOffset > 0) offsetCheck = Vector2Int.right;
                if (xOffset < 0) offsetCheck = Vector2Int.left;
            }
            else
            {
                var yOffset = Mathf.RoundToInt(offset.z);
                if (yOffset > 0) offsetCheck = Vector2Int.up;
                if (yOffset < 0) offsetCheck = Vector2Int.down;
            }

            return offsetCheck;
        }

        public static Vector2 GetDirectionNonRounded(Vector3 offset)
        {
            var offsetCheck = Math.Abs(offset.x) >= Math.Abs(offset.z)
                ? new Vector2(offset.x, 0)
                : new Vector2(0, offset.z);

            return offsetCheck;
        }





        public static Vector2Int GetDirectionNormalized(Vector3 offset)
        {
            var offsetCheck = Math.Abs(offset.x) >= Math.Abs(offset.z)
                ? new Vector2Int(Math.Sign(offset.x), 0)
                : new Vector2Int(0, Math.Sign(offset.z));

            return offsetCheck;
        }

        public static Vector2Int GetDirectionNormalizedInverted(Vector3 offset)
        {
            var offsetCheck = Math.Abs(offset.x) < Math.Abs(offset.z)
                ? new Vector2Int(Math.Sign(offset.x), 0)
                : new Vector2Int(0, Math.Sign(offset.z));

            return offsetCheck;
        }

        #endregion
    }
}
`,NA=`using System;
using System.Collections.Generic;
using DG.Tweening;
using UnityEngine;
using UnityEngine.EventSystems;
using System.Collections;

namespace IEC
{
    public class GridObjectDragger : _BaseBehaviour
    {
        private enum State
        {
            None,
            Dragging,
        }

        private const float Epsilon = 0.25f;

        public MovableObject movableObject;

        private State _currentState;

        private Vector3 _mouseOffset;
        private void Update()
        {
            if (_currentState == State.Dragging)
            {
                SmoothMoveToNewPosition(GetMousePositionOnPlane() + _mouseOffset);
            }
        }

        private void ChangeState(State state)
        {
            if (_currentState == state) return;
            // Exit current state
            switch (_currentState)
            {
                case State.None: break;
                case State.Dragging:
                    ExitDrag();
                    break;
            }

            _currentState = state;
            // Enter new state
            switch (_currentState)
            {
                case State.None: break;
                case State.Dragging:
                    OnDrag();
                    break;
            }
        }

        private bool IsCrossABlocker(GridTile startTile, int direction, bool isHorizontal, out GridTile blocker)
        {
            blocker = null;
            if (isHorizontal)
            {
                var (limit, step) = direction < 0 ? (99, 1) : (-99, -1);
                for (var i = startTile.gridPos.x; i != limit; i += step)
                {
                    var nextGridTile = InGame.gridManager.GetGridTile(i + step, startTile.gridPos.y);
                    if (nextGridTile != null && nextGridTile.status == GridStatus.Empty && !nextGridTile.IsActiveColorPlane) continue;
                    if (nextGridTile != null && nextGridTile.movableObject && nextGridTile.movableObject == movableObject) continue;
                    blocker = InGame.gridManager.GetGridTile(i, startTile.gridPos.y);
                    return true;
                }
            }
            else
            {

                var (limit, step) = direction < 0 ? (99, 1) : (-99, -1);
                for (var i = startTile.gridPos.y; i != limit; i += step)
                {
                    var nextGridTile = InGame.gridManager.GetGridTile(startTile.gridPos.x, i + step);
                    if (nextGridTile != null && nextGridTile.status == GridStatus.Empty && !nextGridTile.IsActiveColorPlane) continue;
                    if (nextGridTile != null && nextGridTile.movableObject && nextGridTile.movableObject == movableObject) continue;
                    blocker = InGame.gridManager.GetGridTile(startTile.gridPos.x, i);
                    return true;
                }
            }

            return false;
        }

        #region Pointer event

        private Vector3 _colliderOffset;
        private Vector2Int _fromPos;
        private Vector2Int _toPos;

        public void OnPointerDown(BaseEventData eventData)
        {
            if (InGame.gameState == GameState.UsingHelper)
            {
                return;
            }
            
            switch (_currentState)
            {
                case State.None:
                    _fromPos = InGame.gridManager.GetGridTile(movableObject.transform.position).gridPos;
                    _colliderOffset = gameObject.GetComponent<Collider>().transform.position -
                                      movableObject.transform.position;
                    //to make object fly a bit from ground
                    _colliderOffset += new Vector3(0, -0.3f, 0);
                    ChangeState(State.Dragging);
                    break;
                case State.Dragging:
                    break;
            }
            
        }

        public void OnPointerUp(BaseEventData eventData)
        {
            if (_currentState != State.Dragging) return;
            ChangeState(State.None);
            _colliderOffset = Vector3.zero;
            _toPos = InGame.gridManager.GetGridTile(movableObject.transform.position).gridPos;
        }

        private void OnDisable()
        {
            ChangeState(State.None);
            movableObject.ClearOccupiedTiles();
        }

        #endregion

        #region Drag move handle

        public Action<bool> onDrag;
        private void OnDrag()
        {
            var currentPos = transform.position - _colliderOffset;
            var mousePos = GetMousePositionOnPlane();
            _mouseOffset = currentPos - mousePos;
            onDrag?.Invoke(true);
        }
        private void ExitDrag()
        {
            movableObject.ClearOccupiedTiles();
            
            // Reset rotation to identity when drag ends
            movableObject.transform.rotation = Quaternion.identity;
                
            var targetedTile = InGame.gridManager.GetGridTile(movableObject.transform.position);
            movableObject.transform.position = targetedTile.transform.position;

            foreach (var tile in movableObject.tiles)
            {
                var grid = InGame.gridManager.GetGridTile(tile);
                movableObject.AddOccupiedTiles(grid);
            }
            onDrag?.Invoke(false);
        }

        private Vector3 GetMousePositionOnPlane()
        {
            return InGame.gridManager.GetMouseWorldPosition();
        }

        private void SmoothMoveToNewPosition(Vector3 targetPosition)
        {
            var currentPosition = movableObject.transform.position;
            var delta = targetPosition - currentPosition;
            
            if (movableObject.Direction != Direction.None)
            {
                switch (movableObject.Direction)
                {
                    case Direction.Vertical:
                        delta.x = 0;
                        break;
                    case Direction.Horizontal:
                        delta.z = 0;
                        break;
                }
            }

            delta *= GameConst.DragObjectSpeed * Time.deltaTime;
            if (delta.magnitude > 0.5f)
            {
                delta = delta.normalized * 0.5f;
            }

            var predictedPosition = currentPosition + delta;
            if (delta.x != 0)
                ProcessMovement(-delta.x, true, ref predictedPosition);
            if (delta.z != 0)
                ProcessMovement(-delta.z, false, ref predictedPosition);
            
            // Get final movement delta after collision checks
            Vector3 finalDelta = predictedPosition - currentPosition;
                
            // Apply movement
            movableObject.transform.position += finalDelta;
        }

        private void ProcessMovement(float deltaValue, bool isXAxis, ref Vector3 newPosition)
        {
            foreach (var tile in movableObject.tiles)
            {
                var tilePosition = tile;
                var offset = tilePosition - movableObject.transform.position;
                var gridTile = InGame.gridManager.GetGridTile(tilePosition);

                var extraGridTile = GetExtraGridTile(gridTile, tilePosition, isXAxis);

                // if (offset.z < 0) offset = -offset;
                AdjustPositionIfBlocked(deltaValue, isXAxis, gridTile, offset, ref newPosition);

                if (extraGridTile != null)
                {
                    AdjustPositionIfBlocked(deltaValue, isXAxis, extraGridTile, offset, ref newPosition);
                }
            }
        }

        private GridTile GetExtraGridTile(GridTile gridTile, Vector3 tilePosition, bool isXAxis)
        {
            if (gridTile == null) return null;
            var gridTilePosition = gridTile.transform.position;
            if (isXAxis)
            {
                return tilePosition.z - gridTilePosition.z < -Epsilon
                    ? InGame.gridManager.GetGridTileNeighbor(gridTile, Vector2Int.up)
                    : tilePosition.z - gridTilePosition.z > Epsilon
                        ? InGame.gridManager.GetGridTileNeighbor(gridTile, Vector2Int.down)
                        : null;
            }

            return tilePosition.x - gridTilePosition.x < -Epsilon
                ? InGame.gridManager.GetGridTileNeighbor(gridTile, Vector2Int.left)
                : tilePosition.x - gridTilePosition.x > Epsilon
                    ? InGame.gridManager.GetGridTileNeighbor(gridTile, Vector2Int.right)
                    : null;
        }

        private void AdjustPositionIfBlocked(float deltaValue, bool isXAxis, GridTile gridTile, Vector3 offset,
            ref Vector3 newPosition)
        {
            if (!IsCrossABlocker(gridTile, (int)Mathf.Sign(deltaValue), isXAxis, out var blocker)) return;

            var blockerPosition = blocker.transform.position;

            if (isXAxis)
                AdjustPosition(ref newPosition.x, offset.x, blockerPosition.x, deltaValue);
            else
                AdjustPosition(ref newPosition.z, offset.z, blockerPosition.z, deltaValue);
        }

        private void AdjustPosition(ref float newPosition, float offset, float blockerPosition, float deltaValue)
        {
            if (deltaValue > 0)
            {
                if (newPosition + offset < blockerPosition)
                    newPosition = blockerPosition - offset;
            }
            else
            {
                if (newPosition + offset > blockerPosition)
                    newPosition = blockerPosition - offset;
            }
        }

        #endregion
    }
}
`,sg={"BaseBehaviour.cs":ny,"GridInputHandler.cs":MA,"GridObjectDragger.cs":NA},RA=["GridInputHandler.cs","GridObjectDragger.cs"],IA=()=>{const[e,n]=ae.useState(""),[o,s]=ae.useState(!1),[r,u]=ae.useState(""),[f,h]=ae.useState(""),[g,m]=ae.useState("GridInputHandler.cs"),v=ae.useCallback(async()=>{if(!e){h("Please enter a prompt.");return}s(!0),h(""),u("");try{const T=new bA({apiKey:void 0});let E=`You are an expert C# Unity game developer. The user wants to modify the C# script '${g}'. Your task is to provide the complete, updated C# code for the file. Only output the raw C# code, without any markdown formatting, explanations, or enclosing tags.`,b=sg[g];RA.includes(g)&&(E=`You are an expert C# Unity game developer. The user wants to modify the C# script '${g}', which inherits from 'BaseBehaviour'. The code for BOTH files is provided below for full context. Your task is to provide the complete, updated C# code for the '${g}' file. Only output the raw C# code, without any markdown formatting, explanations, or enclosing tags.`,b+=`

// --- Base Class Context (Do Not Modify) ---
${ny}`);const A=`${e}

--- C# Context ---
${b}`,w=(await T.models.generateContent({model:"gemini-2.5-flash",contents:A,config:{systemInstruction:E}})).text;u(w)}catch(T){h(`An error occurred: ${T.message}`),console.error(T)}finally{s(!1)}},[e,g]),x=()=>{navigator.clipboard.writeText(r).then(()=>{alert("Code copied to clipboard!")}).catch(T=>{console.error("Failed to copy text: ",T)})};return S.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[S.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"AI Mechanic Coder"}),S.jsxs("div",{className:"flex flex-col gap-3",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"contextFile",className:"block text-sm font-medium text-gray-300 mb-1",children:"C# Context File"}),S.jsx("select",{id:"contextFile",value:g,onChange:T=>m(T.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500",children:Object.keys(sg).map(T=>S.jsx("option",{value:T,children:T},T))})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"aiPrompt",className:"block text-sm font-medium text-gray-300 mb-1",children:"Prompt"}),S.jsx("textarea",{id:"aiPrompt",rows:3,value:e,onChange:T=>n(T.target.value),placeholder:"e.g., 'Add a double-jump ability'",className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-teal-500 focus:border-teal-500"})]}),S.jsx("button",{onClick:v,disabled:o,className:"w-full px-4 py-3 bg-indigo-600 hover:bg-indigo-500 rounded-lg font-bold text-white transition-all transform hover:scale-105 disabled:bg-gray-500 disabled:cursor-not-allowed disabled:transform-none",children:o?"Generating...":"Generate Code"}),f&&S.jsx("p",{className:"text-red-400 text-sm",children:f}),r&&S.jsxs("div",{className:"relative",children:[S.jsx("textarea",{readOnly:!0,value:r,rows:10,className:"w-full bg-gray-900 border border-gray-600 rounded-md p-2 text-sm text-gray-300 font-mono resize-y"}),S.jsx("button",{onClick:x,className:"absolute top-2 right-2 px-2 py-1 bg-gray-600 hover:bg-gray-500 text-white text-xs font-bold rounded",children:"Copy"})]})]})]})},DA=({totalPets:e,totalHoles:n})=>S.jsxs("div",{children:[S.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"Level Stats"}),S.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center bg-gray-900/50 p-3 rounded-lg border border-gray-700",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-gray-400",children:"Total Pets"}),S.jsx("p",{className:"text-2xl font-bold text-teal-400","aria-label":`Total pets: ${e}`,children:e})]}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-gray-400",children:"Total Holes"}),S.jsx("p",{className:"text-2xl font-bold text-violet-400","aria-label":`Total holes: ${n}`,children:n})]})]})]});function wA(e,n){ae.useEffect(()=>{const o=s=>{e.current&&!e.current.contains(s.target)&&n()};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[e,n])}const kA=()=>{const[e,n]=ae.useState(!1);return S.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[S.jsxs("h2",{className:"text-lg font-semibold text-white mb-3 flex justify-between items-center cursor-pointer",onClick:()=>n(!e),"aria-expanded":e,"aria-controls":"game-rules-content",children:[S.jsx("span",{children:"Game Rules"}),S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 transition-transform transform ${e?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),e&&S.jsxs("div",{id:"game-rules-content",className:"text-sm text-gray-300 bg-gray-900/50 p-3 rounded-md border border-gray-700 space-y-3",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"font-bold text-teal-400",children:"Objective"}),S.jsx("p",{children:"Guide all pets to an exit of the matching color."})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-bold text-teal-400",children:"Core Mechanics"}),S.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-2",children:[S.jsxs("li",{children:[S.jsx("strong",{className:"text-white",children:"Movement:"})," Drag a pet from its head or tail. Pets cannot move through walls, obstacles, or other pets."]}),S.jsxs("li",{children:[S.jsx("strong",{className:"text-white",children:"Colored Paths:"})," Pets can only travel on colored paths that match their own color."]}),S.jsxs("li",{children:[S.jsx("strong",{className:"text-white",children:"Solving:"}),' A pet is "solved" when it enters a valid exit. This triggers various effects.']})]})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-bold text-teal-400",children:"Special Objects & Rules"}),S.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-2",children:[S.jsxs("li",{children:[S.jsx("strong",{className:"text-white",children:"Exits:"})," May have multiple layers of color or require a certain number of pets to enter before disappearing. Permanent exits never disappear."]}),S.jsxs("li",{children:[S.jsx("strong",{className:"text-white",children:"Stone Walls:"})," Are destroyed after a set number of pets are solved."]}),S.jsxs("li",{children:[S.jsx("strong",{className:"text-white",children:"Movable Boxes:"})," Can be pushed by the player to clear or block paths."]}),S.jsxs("li",{children:[S.jsx("strong",{className:"text-white",children:"Color Walls:"})," Disappear only when the very last pet of that color is solved."]}),S.jsxs("li",{children:[S.jsx("strong",{className:"text-white",children:"Ice/Leaves:"})," Freezes an object. One layer melts each time any pet is solved."]}),S.jsxs("li",{children:[S.jsx("strong",{className:"text-white",children:"Keys & Locks:"})," A pet with a key unlocks all pets with a matching lock color when solved."]}),S.jsxs("li",{children:[S.jsx("strong",{className:"text-white",children:"Scissors:"})," A pet with scissors will cut the ribbon when solved."]}),S.jsxs("li",{children:[S.jsx("strong",{className:"text-white",children:"Single Direction:"})," These pets can only be moved from their head."]}),S.jsxs("li",{children:[S.jsx("strong",{className:"text-white",children:"Hidden Pets:"})," Emerge after a specific number of other pets are solved."]}),S.jsxs("li",{children:[S.jsx("strong",{className:"text-white",children:"Bomb Pets:"})," Explodes when solved, destroying any adjacent breakable objects (like Stones or Crates)."]})]})]})]})]})},UA=({level:e,mode:n,selectedTool:o,selectedColor:s,selectedObject:r,drawingState:u,isSolving:f,isSolutionPlaying:h,solutionPlaybackIndex:g,fileInputRef:m,guideSolver:v,onGuideSolverChange:x,hasRecordedSolution:T,onLevelChange:E,onToolChange:b,onColorChange:A,onSizeChange:q,onLoadClick:w,onFileLoad:M,onSaveUnityAsset:k,onSolveLevel:P,onPlaySolution:N,onStopSolution:$,onDrawingStateChange:oe})=>{const[ce,Y]=ae.useState(!1),de=ae.useRef(null),Ee=Jx(e,r),{totalPets:O,totalHoles:Ce}=ae.useMemo(()=>{let G=0,se=0;return e.pets.forEach(pe=>{G+=1,pe.special.layerColors&&(G+=pe.special.layerColors.length)}),e.exits.forEach(pe=>{se+=1,pe.special.layerColors&&(se+=pe.special.layerColors.length)}),{totalPets:G,totalHoles:se}},[e.pets,e.exits]);wA(de,()=>Y(!1));const Oe=ae.useCallback(G=>{A(G),Y(!1)},[A]),Le=ae.useCallback(()=>{oe({type:"pet",id:null})},[oe]);return S.jsxs("aside",{className:"w-80 bg-gray-800/50 p-4 rounded-lg border border-gray-700 flex flex-col gap-6 overflow-y-auto",children:[S.jsx(zx,{selectedTool:o,isDrawing:u.id!==null,onToolChange:b,onFinishDrawing:Le}),S.jsx(DA,{totalPets:O,totalHoles:Ce}),S.jsx(Ox,{selectedTool:o,selectedColor:s,selectedObjectData:Ee,isOpen:ce,setIsOpen:Y,onColorChange:Oe,ref:de}),n==="edit"&&S.jsxs(S.Fragment,{children:[S.jsx(Fx,{level:e,onLevelChange:E,onSizeChange:q,isSolutionPlaying:h,solutionPlaybackIndex:g,onPlaySolution:N,onStopSolution:$}),S.jsx($x,{isSolving:f,guideSolver:v,hasRecordedSolution:T,onGuideSolverChange:x,onLoadClick:w,onSaveUnityAsset:k,onSolveLevel:P,fileInputRef:m,onFileLoad:M}),S.jsx(IA,{}),S.jsx(kA,{})]}),S.jsx(Yx,{selectedObjectData:Ee,level:e,onLevelChange:E})]})};/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function iy(e){return typeof e>"u"||e===null}function PA(e){return typeof e=="object"&&e!==null}function LA(e){return Array.isArray(e)?e:iy(e)?[]:[e]}function GA(e,n){var o,s,r,u;if(n)for(u=Object.keys(n),o=0,s=u.length;o<s;o+=1)r=u[o],e[r]=n[r];return e}function HA(e,n){var o="",s;for(s=0;s<n;s+=1)o+=e;return o}function BA(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var qA=iy,zA=PA,VA=LA,OA=HA,FA=BA,$A=GA,vt={isNothing:qA,isObject:zA,toArray:VA,repeat:OA,isNegativeZero:FA,extend:$A};function oy(e,n){var o="",s=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(o+='in "'+e.mark.name+'" '),o+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!n&&e.mark.snippet&&(o+=`

`+e.mark.snippet),s+" "+o):s}function Ql(e,n){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=n,this.message=oy(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ql.prototype=Object.create(Error.prototype);Ql.prototype.constructor=Ql;Ql.prototype.toString=function(n){return this.name+": "+oy(this,n)};var Lt=Ql;function ic(e,n,o,s,r){var u="",f="",h=Math.floor(r/2)-1;return s-n>h&&(u=" ... ",n=s-h+u.length),o-s>h&&(f=" ...",o=s+h-f.length),{str:u+e.slice(n,o).replace(/\t/g,"")+f,pos:s-n+u.length}}function oc(e,n){return vt.repeat(" ",n-e.length)+e}function YA(e,n){if(n=Object.create(n||null),!e.buffer)return null;n.maxLength||(n.maxLength=79),typeof n.indent!="number"&&(n.indent=1),typeof n.linesBefore!="number"&&(n.linesBefore=3),typeof n.linesAfter!="number"&&(n.linesAfter=2);for(var o=/\r?\n|\r|\0/g,s=[0],r=[],u,f=-1;u=o.exec(e.buffer);)r.push(u.index),s.push(u.index+u[0].length),e.position<=u.index&&f<0&&(f=s.length-2);f<0&&(f=s.length-1);var h="",g,m,v=Math.min(e.line+n.linesAfter,r.length).toString().length,x=n.maxLength-(n.indent+v+3);for(g=1;g<=n.linesBefore&&!(f-g<0);g++)m=ic(e.buffer,s[f-g],r[f-g],e.position-(s[f]-s[f-g]),x),h=vt.repeat(" ",n.indent)+oc((e.line-g+1).toString(),v)+" | "+m.str+`
`+h;for(m=ic(e.buffer,s[f],r[f],e.position,x),h+=vt.repeat(" ",n.indent)+oc((e.line+1).toString(),v)+" | "+m.str+`
`,h+=vt.repeat("-",n.indent+v+3+m.pos)+`^
`,g=1;g<=n.linesAfter&&!(f+g>=r.length);g++)m=ic(e.buffer,s[f+g],r[f+g],e.position-(s[f]-s[f+g]),x),h+=vt.repeat(" ",n.indent)+oc((e.line+g+1).toString(),v)+" | "+m.str+`
`;return h.replace(/\n$/,"")}var JA=YA,KA=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],XA=["scalar","sequence","mapping"];function QA(e){var n={};return e!==null&&Object.keys(e).forEach(function(o){e[o].forEach(function(s){n[String(s)]=o})}),n}function ZA(e,n){if(n=n||{},Object.keys(n).forEach(function(o){if(KA.indexOf(o)===-1)throw new Lt('Unknown option "'+o+'" is met in definition of "'+e+'" YAML type.')}),this.options=n,this.tag=e,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(o){return o},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.representName=n.representName||null,this.defaultStyle=n.defaultStyle||null,this.multi=n.multi||!1,this.styleAliases=QA(n.styleAliases||null),XA.indexOf(this.kind)===-1)throw new Lt('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Mt=ZA;function rg(e,n){var o=[];return e[n].forEach(function(s){var r=o.length;o.forEach(function(u,f){u.tag===s.tag&&u.kind===s.kind&&u.multi===s.multi&&(r=f)}),o[r]=s}),o}function WA(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},n,o;function s(r){r.multi?(e.multi[r.kind].push(r),e.multi.fallback.push(r)):e[r.kind][r.tag]=e.fallback[r.tag]=r}for(n=0,o=arguments.length;n<o;n+=1)arguments[n].forEach(s);return e}function gc(e){return this.extend(e)}gc.prototype.extend=function(n){var o=[],s=[];if(n instanceof Mt)s.push(n);else if(Array.isArray(n))s=s.concat(n);else if(n&&(Array.isArray(n.implicit)||Array.isArray(n.explicit)))n.implicit&&(o=o.concat(n.implicit)),n.explicit&&(s=s.concat(n.explicit));else throw new Lt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");o.forEach(function(u){if(!(u instanceof Mt))throw new Lt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(u.loadKind&&u.loadKind!=="scalar")throw new Lt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(u.multi)throw new Lt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),s.forEach(function(u){if(!(u instanceof Mt))throw new Lt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(gc.prototype);return r.implicit=(this.implicit||[]).concat(o),r.explicit=(this.explicit||[]).concat(s),r.compiledImplicit=rg(r,"implicit"),r.compiledExplicit=rg(r,"explicit"),r.compiledTypeMap=WA(r.compiledImplicit,r.compiledExplicit),r};var ly=gc,sy=new Mt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),ry=new Mt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),ay=new Mt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),uy=new ly({explicit:[sy,ry,ay]});function jA(e){if(e===null)return!0;var n=e.length;return n===1&&e==="~"||n===4&&(e==="null"||e==="Null"||e==="NULL")}function eb(){return null}function tb(e){return e===null}var cy=new Mt("tag:yaml.org,2002:null",{kind:"scalar",resolve:jA,construct:eb,predicate:tb,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function nb(e){if(e===null)return!1;var n=e.length;return n===4&&(e==="true"||e==="True"||e==="TRUE")||n===5&&(e==="false"||e==="False"||e==="FALSE")}function ib(e){return e==="true"||e==="True"||e==="TRUE"}function ob(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var fy=new Mt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:nb,construct:ib,predicate:ob,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function lb(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function sb(e){return 48<=e&&e<=55}function rb(e){return 48<=e&&e<=57}function ab(e){if(e===null)return!1;var n=e.length,o=0,s=!1,r;if(!n)return!1;if(r=e[o],(r==="-"||r==="+")&&(r=e[++o]),r==="0"){if(o+1===n)return!0;if(r=e[++o],r==="b"){for(o++;o<n;o++)if(r=e[o],r!=="_"){if(r!=="0"&&r!=="1")return!1;s=!0}return s&&r!=="_"}if(r==="x"){for(o++;o<n;o++)if(r=e[o],r!=="_"){if(!lb(e.charCodeAt(o)))return!1;s=!0}return s&&r!=="_"}if(r==="o"){for(o++;o<n;o++)if(r=e[o],r!=="_"){if(!sb(e.charCodeAt(o)))return!1;s=!0}return s&&r!=="_"}}if(r==="_")return!1;for(;o<n;o++)if(r=e[o],r!=="_"){if(!rb(e.charCodeAt(o)))return!1;s=!0}return!(!s||r==="_")}function ub(e){var n=e,o=1,s;if(n.indexOf("_")!==-1&&(n=n.replace(/_/g,"")),s=n[0],(s==="-"||s==="+")&&(s==="-"&&(o=-1),n=n.slice(1),s=n[0]),n==="0")return 0;if(s==="0"){if(n[1]==="b")return o*parseInt(n.slice(2),2);if(n[1]==="x")return o*parseInt(n.slice(2),16);if(n[1]==="o")return o*parseInt(n.slice(2),8)}return o*parseInt(n,10)}function cb(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!vt.isNegativeZero(e)}var dy=new Mt("tag:yaml.org,2002:int",{kind:"scalar",resolve:ab,construct:ub,predicate:cb,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),fb=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function db(e){return!(e===null||!fb.test(e)||e[e.length-1]==="_")}function pb(e){var n,o;return n=e.replace(/_/g,"").toLowerCase(),o=n[0]==="-"?-1:1,"+-".indexOf(n[0])>=0&&(n=n.slice(1)),n===".inf"?o===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:n===".nan"?NaN:o*parseFloat(n,10)}var hb=/^[-+]?[0-9]+e/;function mb(e,n){var o;if(isNaN(e))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(vt.isNegativeZero(e))return"-0.0";return o=e.toString(10),hb.test(o)?o.replace("e",".e"):o}function gb(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||vt.isNegativeZero(e))}var py=new Mt("tag:yaml.org,2002:float",{kind:"scalar",resolve:db,construct:pb,predicate:gb,represent:mb,defaultStyle:"lowercase"}),hy=uy.extend({implicit:[cy,fy,dy,py]}),my=hy,gy=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),yy=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function yb(e){return e===null?!1:gy.exec(e)!==null||yy.exec(e)!==null}function vb(e){var n,o,s,r,u,f,h,g=0,m=null,v,x,T;if(n=gy.exec(e),n===null&&(n=yy.exec(e)),n===null)throw new Error("Date resolve error");if(o=+n[1],s=+n[2]-1,r=+n[3],!n[4])return new Date(Date.UTC(o,s,r));if(u=+n[4],f=+n[5],h=+n[6],n[7]){for(g=n[7].slice(0,3);g.length<3;)g+="0";g=+g}return n[9]&&(v=+n[10],x=+(n[11]||0),m=(v*60+x)*6e4,n[9]==="-"&&(m=-m)),T=new Date(Date.UTC(o,s,r,u,f,h,g)),m&&T.setTime(T.getTime()-m),T}function xb(e){return e.toISOString()}var vy=new Mt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:yb,construct:vb,instanceOf:Date,represent:xb});function Tb(e){return e==="<<"||e===null}var xy=new Mt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Tb}),Dc=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Cb(e){if(e===null)return!1;var n,o,s=0,r=e.length,u=Dc;for(o=0;o<r;o++)if(n=u.indexOf(e.charAt(o)),!(n>64)){if(n<0)return!1;s+=6}return s%8===0}function Sb(e){var n,o,s=e.replace(/[\r\n=]/g,""),r=s.length,u=Dc,f=0,h=[];for(n=0;n<r;n++)n%4===0&&n&&(h.push(f>>16&255),h.push(f>>8&255),h.push(f&255)),f=f<<6|u.indexOf(s.charAt(n));return o=r%4*6,o===0?(h.push(f>>16&255),h.push(f>>8&255),h.push(f&255)):o===18?(h.push(f>>10&255),h.push(f>>2&255)):o===12&&h.push(f>>4&255),new Uint8Array(h)}function Eb(e){var n="",o=0,s,r,u=e.length,f=Dc;for(s=0;s<u;s++)s%3===0&&s&&(n+=f[o>>18&63],n+=f[o>>12&63],n+=f[o>>6&63],n+=f[o&63]),o=(o<<8)+e[s];return r=u%3,r===0?(n+=f[o>>18&63],n+=f[o>>12&63],n+=f[o>>6&63],n+=f[o&63]):r===2?(n+=f[o>>10&63],n+=f[o>>4&63],n+=f[o<<2&63],n+=f[64]):r===1&&(n+=f[o>>2&63],n+=f[o<<4&63],n+=f[64],n+=f[64]),n}function _b(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var Ty=new Mt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Cb,construct:Sb,predicate:_b,represent:Eb}),Ab=Object.prototype.hasOwnProperty,bb=Object.prototype.toString;function Mb(e){if(e===null)return!0;var n=[],o,s,r,u,f,h=e;for(o=0,s=h.length;o<s;o+=1){if(r=h[o],f=!1,bb.call(r)!=="[object Object]")return!1;for(u in r)if(Ab.call(r,u))if(!f)f=!0;else return!1;if(!f)return!1;if(n.indexOf(u)===-1)n.push(u);else return!1}return!0}function Nb(e){return e!==null?e:[]}var Cy=new Mt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Mb,construct:Nb}),Rb=Object.prototype.toString;function Ib(e){if(e===null)return!0;var n,o,s,r,u,f=e;for(u=new Array(f.length),n=0,o=f.length;n<o;n+=1){if(s=f[n],Rb.call(s)!=="[object Object]"||(r=Object.keys(s),r.length!==1))return!1;u[n]=[r[0],s[r[0]]]}return!0}function Db(e){if(e===null)return[];var n,o,s,r,u,f=e;for(u=new Array(f.length),n=0,o=f.length;n<o;n+=1)s=f[n],r=Object.keys(s),u[n]=[r[0],s[r[0]]];return u}var Sy=new Mt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Ib,construct:Db}),wb=Object.prototype.hasOwnProperty;function kb(e){if(e===null)return!0;var n,o=e;for(n in o)if(wb.call(o,n)&&o[n]!==null)return!1;return!0}function Ub(e){return e!==null?e:{}}var Ey=new Mt("tag:yaml.org,2002:set",{kind:"mapping",resolve:kb,construct:Ub}),wc=my.extend({implicit:[vy,xy],explicit:[Ty,Cy,Sy,Ey]}),Ei=Object.prototype.hasOwnProperty,Er=1,_y=2,Ay=3,_r=4,lc=1,Pb=2,ag=3,Lb=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Gb=/[\x85\u2028\u2029]/,Hb=/[,\[\]\{\}]/,by=/^(?:!|!!|![a-z\-]+!)$/i,My=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function ug(e){return Object.prototype.toString.call(e)}function Nn(e){return e===10||e===13}function Fi(e){return e===9||e===32}function $t(e){return e===9||e===32||e===10||e===13}function Bo(e){return e===44||e===91||e===93||e===123||e===125}function Bb(e){var n;return 48<=e&&e<=57?e-48:(n=e|32,97<=n&&n<=102?n-97+10:-1)}function qb(e){return e===120?2:e===117?4:e===85?8:0}function zb(e){return 48<=e&&e<=57?e-48:-1}function cg(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function Vb(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var Ny=new Array(256),Ry=new Array(256);for(var Lo=0;Lo<256;Lo++)Ny[Lo]=cg(Lo)?1:0,Ry[Lo]=cg(Lo);function Ob(e,n){this.input=e,this.filename=n.filename||null,this.schema=n.schema||wc,this.onWarning=n.onWarning||null,this.legacy=n.legacy||!1,this.json=n.json||!1,this.listener=n.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Iy(e,n){var o={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return o.snippet=JA(o),new Lt(n,o)}function xe(e,n){throw Iy(e,n)}function Ar(e,n){e.onWarning&&e.onWarning.call(null,Iy(e,n))}var fg={YAML:function(n,o,s){var r,u,f;n.version!==null&&xe(n,"duplication of %YAML directive"),s.length!==1&&xe(n,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(s[0]),r===null&&xe(n,"ill-formed argument of the YAML directive"),u=parseInt(r[1],10),f=parseInt(r[2],10),u!==1&&xe(n,"unacceptable YAML version of the document"),n.version=s[0],n.checkLineBreaks=f<2,f!==1&&f!==2&&Ar(n,"unsupported YAML version of the document")},TAG:function(n,o,s){var r,u;s.length!==2&&xe(n,"TAG directive accepts exactly two arguments"),r=s[0],u=s[1],by.test(r)||xe(n,"ill-formed tag handle (first argument) of the TAG directive"),Ei.call(n.tagMap,r)&&xe(n,'there is a previously declared suffix for "'+r+'" tag handle'),My.test(u)||xe(n,"ill-formed tag prefix (second argument) of the TAG directive");try{u=decodeURIComponent(u)}catch{xe(n,"tag prefix is malformed: "+u)}n.tagMap[r]=u}};function Si(e,n,o,s){var r,u,f,h;if(n<o){if(h=e.input.slice(n,o),s)for(r=0,u=h.length;r<u;r+=1)f=h.charCodeAt(r),f===9||32<=f&&f<=1114111||xe(e,"expected valid JSON character");else Lb.test(h)&&xe(e,"the stream contains non-printable characters");e.result+=h}}function dg(e,n,o,s){var r,u,f,h;for(vt.isObject(o)||xe(e,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(o),f=0,h=r.length;f<h;f+=1)u=r[f],Ei.call(n,u)||(n[u]=o[u],s[u]=!0)}function qo(e,n,o,s,r,u,f,h,g){var m,v;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),m=0,v=r.length;m<v;m+=1)Array.isArray(r[m])&&xe(e,"nested arrays are not supported inside keys"),typeof r=="object"&&ug(r[m])==="[object Object]"&&(r[m]="[object Object]");if(typeof r=="object"&&ug(r)==="[object Object]"&&(r="[object Object]"),r=String(r),n===null&&(n={}),s==="tag:yaml.org,2002:merge")if(Array.isArray(u))for(m=0,v=u.length;m<v;m+=1)dg(e,n,u[m],o);else dg(e,n,u,o);else!e.json&&!Ei.call(o,r)&&Ei.call(n,r)&&(e.line=f||e.line,e.lineStart=h||e.lineStart,e.position=g||e.position,xe(e,"duplicated mapping key")),r==="__proto__"?Object.defineProperty(n,r,{configurable:!0,enumerable:!0,writable:!0,value:u}):n[r]=u,delete o[r];return n}function kc(e){var n;n=e.input.charCodeAt(e.position),n===10?e.position++:n===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):xe(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function gt(e,n,o){for(var s=0,r=e.input.charCodeAt(e.position);r!==0;){for(;Fi(r);)r===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),r=e.input.charCodeAt(++e.position);if(n&&r===35)do r=e.input.charCodeAt(++e.position);while(r!==10&&r!==13&&r!==0);if(Nn(r))for(kc(e),r=e.input.charCodeAt(e.position),s++,e.lineIndent=0;r===32;)e.lineIndent++,r=e.input.charCodeAt(++e.position);else break}return o!==-1&&s!==0&&e.lineIndent<o&&Ar(e,"deficient indentation"),s}function kr(e){var n=e.position,o;return o=e.input.charCodeAt(n),!!((o===45||o===46)&&o===e.input.charCodeAt(n+1)&&o===e.input.charCodeAt(n+2)&&(n+=3,o=e.input.charCodeAt(n),o===0||$t(o)))}function Uc(e,n){n===1?e.result+=" ":n>1&&(e.result+=vt.repeat(`
`,n-1))}function Fb(e,n,o){var s,r,u,f,h,g,m,v,x=e.kind,T=e.result,E;if(E=e.input.charCodeAt(e.position),$t(E)||Bo(E)||E===35||E===38||E===42||E===33||E===124||E===62||E===39||E===34||E===37||E===64||E===96||(E===63||E===45)&&(r=e.input.charCodeAt(e.position+1),$t(r)||o&&Bo(r)))return!1;for(e.kind="scalar",e.result="",u=f=e.position,h=!1;E!==0;){if(E===58){if(r=e.input.charCodeAt(e.position+1),$t(r)||o&&Bo(r))break}else if(E===35){if(s=e.input.charCodeAt(e.position-1),$t(s))break}else{if(e.position===e.lineStart&&kr(e)||o&&Bo(E))break;if(Nn(E))if(g=e.line,m=e.lineStart,v=e.lineIndent,gt(e,!1,-1),e.lineIndent>=n){h=!0,E=e.input.charCodeAt(e.position);continue}else{e.position=f,e.line=g,e.lineStart=m,e.lineIndent=v;break}}h&&(Si(e,u,f,!1),Uc(e,e.line-g),u=f=e.position,h=!1),Fi(E)||(f=e.position+1),E=e.input.charCodeAt(++e.position)}return Si(e,u,f,!1),e.result?!0:(e.kind=x,e.result=T,!1)}function $b(e,n){var o,s,r;if(o=e.input.charCodeAt(e.position),o!==39)return!1;for(e.kind="scalar",e.result="",e.position++,s=r=e.position;(o=e.input.charCodeAt(e.position))!==0;)if(o===39)if(Si(e,s,e.position,!0),o=e.input.charCodeAt(++e.position),o===39)s=e.position,e.position++,r=e.position;else return!0;else Nn(o)?(Si(e,s,r,!0),Uc(e,gt(e,!1,n)),s=r=e.position):e.position===e.lineStart&&kr(e)?xe(e,"unexpected end of the document within a single quoted scalar"):(e.position++,r=e.position);xe(e,"unexpected end of the stream within a single quoted scalar")}function Yb(e,n){var o,s,r,u,f,h;if(h=e.input.charCodeAt(e.position),h!==34)return!1;for(e.kind="scalar",e.result="",e.position++,o=s=e.position;(h=e.input.charCodeAt(e.position))!==0;){if(h===34)return Si(e,o,e.position,!0),e.position++,!0;if(h===92){if(Si(e,o,e.position,!0),h=e.input.charCodeAt(++e.position),Nn(h))gt(e,!1,n);else if(h<256&&Ny[h])e.result+=Ry[h],e.position++;else if((f=qb(h))>0){for(r=f,u=0;r>0;r--)h=e.input.charCodeAt(++e.position),(f=Bb(h))>=0?u=(u<<4)+f:xe(e,"expected hexadecimal character");e.result+=Vb(u),e.position++}else xe(e,"unknown escape sequence");o=s=e.position}else Nn(h)?(Si(e,o,s,!0),Uc(e,gt(e,!1,n)),o=s=e.position):e.position===e.lineStart&&kr(e)?xe(e,"unexpected end of the document within a double quoted scalar"):(e.position++,s=e.position)}xe(e,"unexpected end of the stream within a double quoted scalar")}function Jb(e,n){var o=!0,s,r,u,f=e.tag,h,g=e.anchor,m,v,x,T,E,b=Object.create(null),A,q,w,M;if(M=e.input.charCodeAt(e.position),M===91)v=93,E=!1,h=[];else if(M===123)v=125,E=!0,h={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=h),M=e.input.charCodeAt(++e.position);M!==0;){if(gt(e,!0,n),M=e.input.charCodeAt(e.position),M===v)return e.position++,e.tag=f,e.anchor=g,e.kind=E?"mapping":"sequence",e.result=h,!0;o?M===44&&xe(e,"expected the node content, but found ','"):xe(e,"missed comma between flow collection entries"),q=A=w=null,x=T=!1,M===63&&(m=e.input.charCodeAt(e.position+1),$t(m)&&(x=T=!0,e.position++,gt(e,!0,n))),s=e.line,r=e.lineStart,u=e.position,Jo(e,n,Er,!1,!0),q=e.tag,A=e.result,gt(e,!0,n),M=e.input.charCodeAt(e.position),(T||e.line===s)&&M===58&&(x=!0,M=e.input.charCodeAt(++e.position),gt(e,!0,n),Jo(e,n,Er,!1,!0),w=e.result),E?qo(e,h,b,q,A,w,s,r,u):x?h.push(qo(e,null,b,q,A,w,s,r,u)):h.push(A),gt(e,!0,n),M=e.input.charCodeAt(e.position),M===44?(o=!0,M=e.input.charCodeAt(++e.position)):o=!1}xe(e,"unexpected end of the stream within a flow collection")}function Kb(e,n){var o,s,r=lc,u=!1,f=!1,h=n,g=0,m=!1,v,x;if(x=e.input.charCodeAt(e.position),x===124)s=!1;else if(x===62)s=!0;else return!1;for(e.kind="scalar",e.result="";x!==0;)if(x=e.input.charCodeAt(++e.position),x===43||x===45)lc===r?r=x===43?ag:Pb:xe(e,"repeat of a chomping mode identifier");else if((v=zb(x))>=0)v===0?xe(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):f?xe(e,"repeat of an indentation width identifier"):(h=n+v-1,f=!0);else break;if(Fi(x)){do x=e.input.charCodeAt(++e.position);while(Fi(x));if(x===35)do x=e.input.charCodeAt(++e.position);while(!Nn(x)&&x!==0)}for(;x!==0;){for(kc(e),e.lineIndent=0,x=e.input.charCodeAt(e.position);(!f||e.lineIndent<h)&&x===32;)e.lineIndent++,x=e.input.charCodeAt(++e.position);if(!f&&e.lineIndent>h&&(h=e.lineIndent),Nn(x)){g++;continue}if(e.lineIndent<h){r===ag?e.result+=vt.repeat(`
`,u?1+g:g):r===lc&&u&&(e.result+=`
`);break}for(s?Fi(x)?(m=!0,e.result+=vt.repeat(`
`,u?1+g:g)):m?(m=!1,e.result+=vt.repeat(`
`,g+1)):g===0?u&&(e.result+=" "):e.result+=vt.repeat(`
`,g):e.result+=vt.repeat(`
`,u?1+g:g),u=!0,f=!0,g=0,o=e.position;!Nn(x)&&x!==0;)x=e.input.charCodeAt(++e.position);Si(e,o,e.position,!1)}return!0}function pg(e,n){var o,s=e.tag,r=e.anchor,u=[],f,h=!1,g;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),g=e.input.charCodeAt(e.position);g!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,xe(e,"tab characters must not be used in indentation")),!(g!==45||(f=e.input.charCodeAt(e.position+1),!$t(f))));){if(h=!0,e.position++,gt(e,!0,-1)&&e.lineIndent<=n){u.push(null),g=e.input.charCodeAt(e.position);continue}if(o=e.line,Jo(e,n,Ay,!1,!0),u.push(e.result),gt(e,!0,-1),g=e.input.charCodeAt(e.position),(e.line===o||e.lineIndent>n)&&g!==0)xe(e,"bad indentation of a sequence entry");else if(e.lineIndent<n)break}return h?(e.tag=s,e.anchor=r,e.kind="sequence",e.result=u,!0):!1}function Xb(e,n,o){var s,r,u,f,h,g,m=e.tag,v=e.anchor,x={},T=Object.create(null),E=null,b=null,A=null,q=!1,w=!1,M;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=x),M=e.input.charCodeAt(e.position);M!==0;){if(!q&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,xe(e,"tab characters must not be used in indentation")),s=e.input.charCodeAt(e.position+1),u=e.line,(M===63||M===58)&&$t(s))M===63?(q&&(qo(e,x,T,E,b,null,f,h,g),E=b=A=null),w=!0,q=!0,r=!0):q?(q=!1,r=!0):xe(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,M=s;else{if(f=e.line,h=e.lineStart,g=e.position,!Jo(e,o,_y,!1,!0))break;if(e.line===u){for(M=e.input.charCodeAt(e.position);Fi(M);)M=e.input.charCodeAt(++e.position);if(M===58)M=e.input.charCodeAt(++e.position),$t(M)||xe(e,"a whitespace character is expected after the key-value separator within a block mapping"),q&&(qo(e,x,T,E,b,null,f,h,g),E=b=A=null),w=!0,q=!1,r=!1,E=e.tag,b=e.result;else if(w)xe(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=m,e.anchor=v,!0}else if(w)xe(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=m,e.anchor=v,!0}if((e.line===u||e.lineIndent>n)&&(q&&(f=e.line,h=e.lineStart,g=e.position),Jo(e,n,_r,!0,r)&&(q?b=e.result:A=e.result),q||(qo(e,x,T,E,b,A,f,h,g),E=b=A=null),gt(e,!0,-1),M=e.input.charCodeAt(e.position)),(e.line===u||e.lineIndent>n)&&M!==0)xe(e,"bad indentation of a mapping entry");else if(e.lineIndent<n)break}return q&&qo(e,x,T,E,b,null,f,h,g),w&&(e.tag=m,e.anchor=v,e.kind="mapping",e.result=x),w}function Qb(e){var n,o=!1,s=!1,r,u,f;if(f=e.input.charCodeAt(e.position),f!==33)return!1;if(e.tag!==null&&xe(e,"duplication of a tag property"),f=e.input.charCodeAt(++e.position),f===60?(o=!0,f=e.input.charCodeAt(++e.position)):f===33?(s=!0,r="!!",f=e.input.charCodeAt(++e.position)):r="!",n=e.position,o){do f=e.input.charCodeAt(++e.position);while(f!==0&&f!==62);e.position<e.length?(u=e.input.slice(n,e.position),f=e.input.charCodeAt(++e.position)):xe(e,"unexpected end of the stream within a verbatim tag")}else{for(;f!==0&&!$t(f);)f===33&&(s?xe(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(n-1,e.position+1),by.test(r)||xe(e,"named tag handle cannot contain such characters"),s=!0,n=e.position+1)),f=e.input.charCodeAt(++e.position);u=e.input.slice(n,e.position),Hb.test(u)&&xe(e,"tag suffix cannot contain flow indicator characters")}u&&!My.test(u)&&xe(e,"tag name cannot contain such characters: "+u);try{u=decodeURIComponent(u)}catch{xe(e,"tag name is malformed: "+u)}return o?e.tag=u:Ei.call(e.tagMap,r)?e.tag=e.tagMap[r]+u:r==="!"?e.tag="!"+u:r==="!!"?e.tag="tag:yaml.org,2002:"+u:xe(e,'undeclared tag handle "'+r+'"'),!0}function Zb(e){var n,o;if(o=e.input.charCodeAt(e.position),o!==38)return!1;for(e.anchor!==null&&xe(e,"duplication of an anchor property"),o=e.input.charCodeAt(++e.position),n=e.position;o!==0&&!$t(o)&&!Bo(o);)o=e.input.charCodeAt(++e.position);return e.position===n&&xe(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(n,e.position),!0}function Wb(e){var n,o,s;if(s=e.input.charCodeAt(e.position),s!==42)return!1;for(s=e.input.charCodeAt(++e.position),n=e.position;s!==0&&!$t(s)&&!Bo(s);)s=e.input.charCodeAt(++e.position);return e.position===n&&xe(e,"name of an alias node must contain at least one character"),o=e.input.slice(n,e.position),Ei.call(e.anchorMap,o)||xe(e,'unidentified alias "'+o+'"'),e.result=e.anchorMap[o],gt(e,!0,-1),!0}function Jo(e,n,o,s,r){var u,f,h,g=1,m=!1,v=!1,x,T,E,b,A,q;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,u=f=h=_r===o||Ay===o,s&&gt(e,!0,-1)&&(m=!0,e.lineIndent>n?g=1:e.lineIndent===n?g=0:e.lineIndent<n&&(g=-1)),g===1)for(;Qb(e)||Zb(e);)gt(e,!0,-1)?(m=!0,h=u,e.lineIndent>n?g=1:e.lineIndent===n?g=0:e.lineIndent<n&&(g=-1)):h=!1;if(h&&(h=m||r),(g===1||_r===o)&&(Er===o||_y===o?A=n:A=n+1,q=e.position-e.lineStart,g===1?h&&(pg(e,q)||Xb(e,q,A))||Jb(e,A)?v=!0:(f&&Kb(e,A)||$b(e,A)||Yb(e,A)?v=!0:Wb(e)?(v=!0,(e.tag!==null||e.anchor!==null)&&xe(e,"alias node should not have any properties")):Fb(e,A,Er===o)&&(v=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):g===0&&(v=h&&pg(e,q))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&xe(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),x=0,T=e.implicitTypes.length;x<T;x+=1)if(b=e.implicitTypes[x],b.resolve(e.result)){e.result=b.construct(e.result),e.tag=b.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Ei.call(e.typeMap[e.kind||"fallback"],e.tag))b=e.typeMap[e.kind||"fallback"][e.tag];else for(b=null,E=e.typeMap.multi[e.kind||"fallback"],x=0,T=E.length;x<T;x+=1)if(e.tag.slice(0,E[x].tag.length)===E[x].tag){b=E[x];break}b||xe(e,"unknown tag !<"+e.tag+">"),e.result!==null&&b.kind!==e.kind&&xe(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+b.kind+'", not "'+e.kind+'"'),b.resolve(e.result,e.tag)?(e.result=b.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):xe(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||v}function jb(e){var n=e.position,o,s,r,u=!1,f;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(f=e.input.charCodeAt(e.position))!==0&&(gt(e,!0,-1),f=e.input.charCodeAt(e.position),!(e.lineIndent>0||f!==37));){for(u=!0,f=e.input.charCodeAt(++e.position),o=e.position;f!==0&&!$t(f);)f=e.input.charCodeAt(++e.position);for(s=e.input.slice(o,e.position),r=[],s.length<1&&xe(e,"directive name must not be less than one character in length");f!==0;){for(;Fi(f);)f=e.input.charCodeAt(++e.position);if(f===35){do f=e.input.charCodeAt(++e.position);while(f!==0&&!Nn(f));break}if(Nn(f))break;for(o=e.position;f!==0&&!$t(f);)f=e.input.charCodeAt(++e.position);r.push(e.input.slice(o,e.position))}f!==0&&kc(e),Ei.call(fg,s)?fg[s](e,s,r):Ar(e,'unknown document directive "'+s+'"')}if(gt(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,gt(e,!0,-1)):u&&xe(e,"directives end mark is expected"),Jo(e,e.lineIndent-1,_r,!1,!0),gt(e,!0,-1),e.checkLineBreaks&&Gb.test(e.input.slice(n,e.position))&&Ar(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&kr(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,gt(e,!0,-1));return}if(e.position<e.length-1)xe(e,"end of the stream or a document separator is expected");else return}function Dy(e,n){e=String(e),n=n||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var o=new Ob(e,n),s=e.indexOf("\0");for(s!==-1&&(o.position=s,xe(o,"null byte is not allowed in input")),o.input+="\0";o.input.charCodeAt(o.position)===32;)o.lineIndent+=1,o.position+=1;for(;o.position<o.length-1;)jb(o);return o.documents}function e1(e,n,o){n!==null&&typeof n=="object"&&typeof o>"u"&&(o=n,n=null);var s=Dy(e,o);if(typeof n!="function")return s;for(var r=0,u=s.length;r<u;r+=1)n(s[r])}function t1(e,n){var o=Dy(e,n);if(o.length!==0){if(o.length===1)return o[0];throw new Lt("expected a single document in the stream, but found more")}}var n1=e1,i1=t1,wy={loadAll:n1,load:i1},ky=Object.prototype.toString,Uy=Object.prototype.hasOwnProperty,Pc=65279,o1=9,Zl=10,l1=13,s1=32,r1=33,a1=34,yc=35,u1=37,c1=38,f1=39,d1=42,Py=44,p1=45,br=58,h1=61,m1=62,g1=63,y1=64,Ly=91,Gy=93,v1=96,Hy=123,x1=124,By=125,Dt={};Dt[0]="\\0";Dt[7]="\\a";Dt[8]="\\b";Dt[9]="\\t";Dt[10]="\\n";Dt[11]="\\v";Dt[12]="\\f";Dt[13]="\\r";Dt[27]="\\e";Dt[34]='\\"';Dt[92]="\\\\";Dt[133]="\\N";Dt[160]="\\_";Dt[8232]="\\L";Dt[8233]="\\P";var T1=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],C1=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function S1(e,n){var o,s,r,u,f,h,g;if(n===null)return{};for(o={},s=Object.keys(n),r=0,u=s.length;r<u;r+=1)f=s[r],h=String(n[f]),f.slice(0,2)==="!!"&&(f="tag:yaml.org,2002:"+f.slice(2)),g=e.compiledTypeMap.fallback[f],g&&Uy.call(g.styleAliases,h)&&(h=g.styleAliases[h]),o[f]=h;return o}function E1(e){var n,o,s;if(n=e.toString(16).toUpperCase(),e<=255)o="x",s=2;else if(e<=65535)o="u",s=4;else if(e<=4294967295)o="U",s=8;else throw new Lt("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+o+vt.repeat("0",s-n.length)+n}var _1=1,Wl=2;function A1(e){this.schema=e.schema||wc,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=vt.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=S1(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Wl:_1,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function hg(e,n){for(var o=vt.repeat(" ",n),s=0,r=-1,u="",f,h=e.length;s<h;)r=e.indexOf(`
`,s),r===-1?(f=e.slice(s),s=h):(f=e.slice(s,r+1),s=r+1),f.length&&f!==`
`&&(u+=o),u+=f;return u}function vc(e,n){return`
`+vt.repeat(" ",e.indent*n)}function b1(e,n){var o,s,r;for(o=0,s=e.implicitTypes.length;o<s;o+=1)if(r=e.implicitTypes[o],r.resolve(n))return!0;return!1}function Mr(e){return e===s1||e===o1}function jl(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Pc||65536<=e&&e<=1114111}function mg(e){return jl(e)&&e!==Pc&&e!==l1&&e!==Zl}function gg(e,n,o){var s=mg(e),r=s&&!Mr(e);return(o?s:s&&e!==Py&&e!==Ly&&e!==Gy&&e!==Hy&&e!==By)&&e!==yc&&!(n===br&&!r)||mg(n)&&!Mr(n)&&e===yc||n===br&&r}function M1(e){return jl(e)&&e!==Pc&&!Mr(e)&&e!==p1&&e!==g1&&e!==br&&e!==Py&&e!==Ly&&e!==Gy&&e!==Hy&&e!==By&&e!==yc&&e!==c1&&e!==d1&&e!==r1&&e!==x1&&e!==h1&&e!==m1&&e!==f1&&e!==a1&&e!==u1&&e!==y1&&e!==v1}function N1(e){return!Mr(e)&&e!==br}function Yl(e,n){var o=e.charCodeAt(n),s;return o>=55296&&o<=56319&&n+1<e.length&&(s=e.charCodeAt(n+1),s>=56320&&s<=57343)?(o-55296)*1024+s-56320+65536:o}function qy(e){var n=/^\n* /;return n.test(e)}var zy=1,xc=2,Vy=3,Oy=4,Go=5;function R1(e,n,o,s,r,u,f,h){var g,m=0,v=null,x=!1,T=!1,E=s!==-1,b=-1,A=M1(Yl(e,0))&&N1(Yl(e,e.length-1));if(n||f)for(g=0;g<e.length;m>=65536?g+=2:g++){if(m=Yl(e,g),!jl(m))return Go;A=A&&gg(m,v,h),v=m}else{for(g=0;g<e.length;m>=65536?g+=2:g++){if(m=Yl(e,g),m===Zl)x=!0,E&&(T=T||g-b-1>s&&e[b+1]!==" ",b=g);else if(!jl(m))return Go;A=A&&gg(m,v,h),v=m}T=T||E&&g-b-1>s&&e[b+1]!==" "}return!x&&!T?A&&!f&&!r(e)?zy:u===Wl?Go:xc:o>9&&qy(e)?Go:f?u===Wl?Go:xc:T?Oy:Vy}function I1(e,n,o,s,r){e.dump=(function(){if(n.length===0)return e.quotingType===Wl?'""':"''";if(!e.noCompatMode&&(T1.indexOf(n)!==-1||C1.test(n)))return e.quotingType===Wl?'"'+n+'"':"'"+n+"'";var u=e.indent*Math.max(1,o),f=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-u),h=s||e.flowLevel>-1&&o>=e.flowLevel;function g(m){return b1(e,m)}switch(R1(n,h,e.indent,f,g,e.quotingType,e.forceQuotes&&!s,r)){case zy:return n;case xc:return"'"+n.replace(/'/g,"''")+"'";case Vy:return"|"+yg(n,e.indent)+vg(hg(n,u));case Oy:return">"+yg(n,e.indent)+vg(hg(D1(n,f),u));case Go:return'"'+w1(n)+'"';default:throw new Lt("impossible error: invalid scalar style")}})()}function yg(e,n){var o=qy(e)?String(n):"",s=e[e.length-1]===`
`,r=s&&(e[e.length-2]===`
`||e===`
`),u=r?"+":s?"":"-";return o+u+`
`}function vg(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function D1(e,n){for(var o=/(\n+)([^\n]*)/g,s=(function(){var m=e.indexOf(`
`);return m=m!==-1?m:e.length,o.lastIndex=m,xg(e.slice(0,m),n)})(),r=e[0]===`
`||e[0]===" ",u,f;f=o.exec(e);){var h=f[1],g=f[2];u=g[0]===" ",s+=h+(!r&&!u&&g!==""?`
`:"")+xg(g,n),r=u}return s}function xg(e,n){if(e===""||e[0]===" ")return e;for(var o=/ [^ ]/g,s,r=0,u,f=0,h=0,g="";s=o.exec(e);)h=s.index,h-r>n&&(u=f>r?f:h,g+=`
`+e.slice(r,u),r=u+1),f=h;return g+=`
`,e.length-r>n&&f>r?g+=e.slice(r,f)+`
`+e.slice(f+1):g+=e.slice(r),g.slice(1)}function w1(e){for(var n="",o=0,s,r=0;r<e.length;o>=65536?r+=2:r++)o=Yl(e,r),s=Dt[o],!s&&jl(o)?(n+=e[r],o>=65536&&(n+=e[r+1])):n+=s||E1(o);return n}function k1(e,n,o){var s="",r=e.tag,u,f,h;for(u=0,f=o.length;u<f;u+=1)h=o[u],e.replacer&&(h=e.replacer.call(o,String(u),h)),(Xn(e,n,h,!1,!1)||typeof h>"u"&&Xn(e,n,null,!1,!1))&&(s!==""&&(s+=","+(e.condenseFlow?"":" ")),s+=e.dump);e.tag=r,e.dump="["+s+"]"}function Tg(e,n,o,s){var r="",u=e.tag,f,h,g;for(f=0,h=o.length;f<h;f+=1)g=o[f],e.replacer&&(g=e.replacer.call(o,String(f),g)),(Xn(e,n+1,g,!0,!0,!1,!0)||typeof g>"u"&&Xn(e,n+1,null,!0,!0,!1,!0))&&((!s||r!=="")&&(r+=vc(e,n)),e.dump&&Zl===e.dump.charCodeAt(0)?r+="-":r+="- ",r+=e.dump);e.tag=u,e.dump=r||"[]"}function U1(e,n,o){var s="",r=e.tag,u=Object.keys(o),f,h,g,m,v;for(f=0,h=u.length;f<h;f+=1)v="",s!==""&&(v+=", "),e.condenseFlow&&(v+='"'),g=u[f],m=o[g],e.replacer&&(m=e.replacer.call(o,g,m)),Xn(e,n,g,!1,!1)&&(e.dump.length>1024&&(v+="? "),v+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Xn(e,n,m,!1,!1)&&(v+=e.dump,s+=v));e.tag=r,e.dump="{"+s+"}"}function P1(e,n,o,s){var r="",u=e.tag,f=Object.keys(o),h,g,m,v,x,T;if(e.sortKeys===!0)f.sort();else if(typeof e.sortKeys=="function")f.sort(e.sortKeys);else if(e.sortKeys)throw new Lt("sortKeys must be a boolean or a function");for(h=0,g=f.length;h<g;h+=1)T="",(!s||r!=="")&&(T+=vc(e,n)),m=f[h],v=o[m],e.replacer&&(v=e.replacer.call(o,m,v)),Xn(e,n+1,m,!0,!0,!0)&&(x=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,x&&(e.dump&&Zl===e.dump.charCodeAt(0)?T+="?":T+="? "),T+=e.dump,x&&(T+=vc(e,n)),Xn(e,n+1,v,!0,x)&&(e.dump&&Zl===e.dump.charCodeAt(0)?T+=":":T+=": ",T+=e.dump,r+=T));e.tag=u,e.dump=r||"{}"}function Cg(e,n,o){var s,r,u,f,h,g;for(r=o?e.explicitTypes:e.implicitTypes,u=0,f=r.length;u<f;u+=1)if(h=r[u],(h.instanceOf||h.predicate)&&(!h.instanceOf||typeof n=="object"&&n instanceof h.instanceOf)&&(!h.predicate||h.predicate(n))){if(o?h.multi&&h.representName?e.tag=h.representName(n):e.tag=h.tag:e.tag="?",h.represent){if(g=e.styleMap[h.tag]||h.defaultStyle,ky.call(h.represent)==="[object Function]")s=h.represent(n,g);else if(Uy.call(h.represent,g))s=h.represent[g](n,g);else throw new Lt("!<"+h.tag+'> tag resolver accepts not "'+g+'" style');e.dump=s}return!0}return!1}function Xn(e,n,o,s,r,u,f){e.tag=null,e.dump=o,Cg(e,o,!1)||Cg(e,o,!0);var h=ky.call(e.dump),g=s,m;s&&(s=e.flowLevel<0||e.flowLevel>n);var v=h==="[object Object]"||h==="[object Array]",x,T;if(v&&(x=e.duplicates.indexOf(o),T=x!==-1),(e.tag!==null&&e.tag!=="?"||T||e.indent!==2&&n>0)&&(r=!1),T&&e.usedDuplicates[x])e.dump="*ref_"+x;else{if(v&&T&&!e.usedDuplicates[x]&&(e.usedDuplicates[x]=!0),h==="[object Object]")s&&Object.keys(e.dump).length!==0?(P1(e,n,e.dump,r),T&&(e.dump="&ref_"+x+e.dump)):(U1(e,n,e.dump),T&&(e.dump="&ref_"+x+" "+e.dump));else if(h==="[object Array]")s&&e.dump.length!==0?(e.noArrayIndent&&!f&&n>0?Tg(e,n-1,e.dump,r):Tg(e,n,e.dump,r),T&&(e.dump="&ref_"+x+e.dump)):(k1(e,n,e.dump),T&&(e.dump="&ref_"+x+" "+e.dump));else if(h==="[object String]")e.tag!=="?"&&I1(e,e.dump,n,u,g);else{if(h==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Lt("unacceptable kind of an object to dump "+h)}e.tag!==null&&e.tag!=="?"&&(m=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?m="!"+m:m.slice(0,18)==="tag:yaml.org,2002:"?m="!!"+m.slice(18):m="!<"+m+">",e.dump=m+" "+e.dump)}return!0}function L1(e,n){var o=[],s=[],r,u;for(Tc(e,o,s),r=0,u=s.length;r<u;r+=1)n.duplicates.push(o[s[r]]);n.usedDuplicates=new Array(u)}function Tc(e,n,o){var s,r,u;if(e!==null&&typeof e=="object")if(r=n.indexOf(e),r!==-1)o.indexOf(r)===-1&&o.push(r);else if(n.push(e),Array.isArray(e))for(r=0,u=e.length;r<u;r+=1)Tc(e[r],n,o);else for(s=Object.keys(e),r=0,u=s.length;r<u;r+=1)Tc(e[s[r]],n,o)}function G1(e,n){n=n||{};var o=new A1(n);o.noRefs||L1(e,o);var s=e;return o.replacer&&(s=o.replacer.call({"":s},"",s)),Xn(o,0,s,!0,!0)?o.dump+`
`:""}var H1=G1,B1={dump:H1};function Lc(e,n){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+n+" instead, which is now safe by default.")}}var q1=Mt,z1=ly,V1=uy,O1=hy,F1=my,$1=wc,Y1=wy.load,J1=wy.loadAll,K1=B1.dump,X1=Lt,Q1={binary:Ty,float:py,map:ay,null:cy,pairs:Sy,set:Ey,timestamp:vy,bool:fy,int:dy,merge:xy,omap:Cy,seq:ry,str:sy},Z1=Lc("safeLoad","load"),W1=Lc("safeLoadAll","loadAll"),j1=Lc("safeDump","dump"),yr={Type:q1,Schema:z1,FAILSAFE_SCHEMA:V1,JSON_SCHEMA:O1,CORE_SCHEMA:F1,DEFAULT_SCHEMA:$1,load:Y1,loadAll:J1,dump:K1,YAMLException:X1,types:Q1,safeLoad:Z1,safeLoadAll:W1,safeDump:j1};const eM=(e,n,o)=>{const s=new Blob([n],{type:o}),r=URL.createObjectURL(s),u=document.createElement("a");u.href=r,u.download=e,document.body.appendChild(u),u.click(),setTimeout(()=>{document.body.removeChild(u),URL.revokeObjectURL(r)},100)},Sg=e=>!e||e.length===0?null:e.map(n=>n.toString(16).padStart(2,"0").padEnd(8,"0")).join(""),tM=e=>{var r,u,f,h,g,m,v,x,T,E,b,A,q;const n=structuredClone(e),o=w=>`{x: ${w.x}, y: ${w.y}}`,s=[];return s.push("%YAML 1.1","%TAG !u! tag:unity3d.com,2011:","--- !u!114 &11400000"),s.push("MonoBehaviour:"),s.push("  m_ObjectHideFlags: 0","  m_CorrespondingSourceObject: {fileID: 0}","  m_PrefabInstance: {fileID: 0}","  m_PrefabAsset: {fileID: 0}"),s.push("  m_GameObject: {fileID: 0}","  m_Enabled: 1","  m_EditorHideFlags: 0","  m_Script: {fileID: 11500000, guid: dda3f1ef032d9a3458c0a85fc2dcc90c, type: 3}"),s.push(`  m_Name: ${n.levelName}`,"  m_EditorClassIdentifier: "),s.push(`  level: ${n.level}`,`  time: ${n.time}`,`  isHardLevel: ${n.isHardLevel?1:0}`),n.theme&&n.theme!==Rn.Classic&&s.push(`  theme: ${n.theme}`),((r=n.solution)==null?void 0:r.length)>0?(s.push("  solution:"),n.solution.forEach(w=>s.push(`  - ${w}`))):s.push("  solution: []"),((u=n.pets)==null?void 0:u.length)>0?(s.push("  pets: "),n.pets.forEach(w=>{var P;s.push(`  - headPos: ${o(w.headPos)}`),s.push("    positions: "),(P=w.positions)==null||P.forEach(N=>s.push(`    - ${o(N)}`)),s.push(`    color: ${w.color}`),s.push("    special:");const M=w.special.rawLayerColors??Sg(w.special.layerColors);s.push(`      layerColors: ${M??""}`),s.push(`      iceCount: ${w.special.iceCount}`),s.push(`      hiddenCount: ${w.special.hiddenCount}`),w.special.count&&w.special.count>0&&s.push(`      count: ${w.special.count}`);const k=w.special.keyLock||{keyColor:-1,lockColor:-1};s.push("      keyLock:"),s.push(`        keyColor: ${k.keyColor}`),s.push(`        lockColor: ${k.lockColor}`),s.push(`      hasScissor: ${w.special.hasScissor?1:0}`),s.push(`      isSingleDirection: ${w.special.isSingleDirection?1:0}`),s.push(`      timeExplode: ${w.special.timeExplode??0}`)})):s.push("  pets: []"),s.push("  gridData:"),s.push(`    width: ${n.gridData.width}`),s.push(`    height: ${n.gridData.height}`),s.push("    strGrid: "),(f=n.gridData.strGrid)==null||f.forEach(w=>s.push(`    - ${w}`)),((h=n.exits)==null?void 0:h.length)>0?(s.push("  exits: "),n.exits.forEach(w=>{var k,P,N;s.push(`  - position: ${o(w.position)}`),s.push(`    color: ${w.color}`),s.push("    special:");const M=w.special.rawLayerColors??Sg(w.special.layerColors);(k=w.special)!=null&&k.count&&w.special.count>0&&s.push(`      count: ${w.special.count}`),s.push(`      iceCount: ${((P=w.special)==null?void 0:P.iceCount)||0}`),s.push(`      layerColors: ${M??""}`),s.push(`      isPermanent: ${(N=w.special)!=null&&N.isPermanent?1:0}`)})):s.push("  exits: []"),((g=n.stoneWalls)==null?void 0:g.length)>0?(s.push("  stoneWalls: "),n.stoneWalls.forEach(w=>{s.push(`  - position: ${o(w.position)}`),s.push(`    count: ${w.count}`)})):s.push("  stoneWalls: []"),((m=n.coloredPaths)==null?void 0:m.length)>0?(s.push("  coloredPaths: "),n.coloredPaths.forEach(w=>{s.push(`  - position: ${o(w.position)}`),s.push(`    color: ${w.color}`)})):s.push("  coloredPaths: []"),((v=n.colorWalls)==null?void 0:v.length)>0?(s.push("  colorWalls: "),n.colorWalls.forEach(w=>{s.push(`  - position: ${o(w.position)}`),s.push(`    color: ${w.color}`)})):s.push("  colorWalls: []"),((x=n.crateInfos)==null?void 0:x.length)>0?(s.push("  crateInfos: "),n.crateInfos.forEach(w=>{var M;s.push("  - listPositions: "),(M=w.listPositions)==null||M.forEach(k=>s.push(`    - ${o(k)}`)),s.push(`    id: ${w.id}`),s.push(`    requiredSnake: ${w.requiredSnake}`)})):s.push("  crateInfos: []"),s.push("  ribbonInfo:"),((E=(T=n.ribbonInfo)==null?void 0:T.listPositions)==null?void 0:E.length)>0?(s.push("    listPositions: "),n.ribbonInfo.listPositions.forEach(w=>s.push(`    - ${o(w)}`))):s.push("    listPositions: []"),((b=n.movableBoxes)==null?void 0:b.length)>0?(s.push("  movableBoxes: "),n.movableBoxes.forEach(w=>{var M;s.push("  - points: "),(M=w.listPositions)==null||M.forEach(k=>s.push(`    - ${o(k)}`)),s.push(`    direction: ${w.direction}`)})):s.push("  movableBoxes: []"),((A=n.obstacleInfos)==null?void 0:A.length)>0&&(s.push("  obstacleInfos: "),n.obstacleInfos.forEach(w=>{var M;s.push("  - listPositions: "),(M=w.listPositions)==null||M.forEach(k=>s.push(`    - ${o(k)}`))})),((q=n.treeRoots)==null?void 0:q.length)>0?(s.push("  treeRoots: "),n.treeRoots.forEach(w=>{s.push(`  - position: ${o(w.position)}`),s.push(`    direction: ${o(w.direction)}`),s.push(`    length: ${w.length}`)})):s.push("  treeRoots: []"),s.push(`  levelDifficulty: ${n.levelDifficulty}`),s.push(`  levelName: ${n.levelName}`),s.join(`
`)+`
`},Eg=e=>{if(e==null)return null;const n=e.toString();if(n==="")return null;if(n.length<8&&/^\d+$/.test(n)){const s=parseInt(n,10);if(!isNaN(s))return[s]}const o=[];if(n.length>0&&n.length%8===0)for(let s=0;s<n.length;s+=8){const r=n.substring(s,s+8);if(r.length<2)continue;const u=parseInt(r.substring(0,2),16);isNaN(u)||o.push(u)}return o.length>0?o:null},nM=e=>new Promise((n,o)=>{const s=new FileReader;s.onload=r=>{var u,f,h,g;try{const m=(u=r.target)==null?void 0:u.result;if(typeof m!="string")throw new Error("File content is not text.");const v=e.name.endsWith(".asset");let x;if(v){let $=m.replace(/--- !u!\d+ &(\d+)/g,"---").replace(/(^\s*layerColors:)\s*$/gm,'$1 ""').replace(/(layerColors:\s*)(?!")(\S+)/g,'$1"$2"');if(x=(f=yr.loadAll($,void 0,{schema:yr.JSON_SCHEMA}).find(ce=>{var Y;return(Y=ce==null?void 0:ce.MonoBehaviour)==null?void 0:Y.gridData}))==null?void 0:f.MonoBehaviour,!x)throw new Error("Could not find LevelSO data in the .asset file.")}else e.name.endsWith(".yaml")||e.name.endsWith(".yml")?x=yr.load(m,{schema:yr.JSON_SCHEMA}):x=JSON.parse(m);if(typeof x!="object"||x===null)throw new Error("Parsed data is not an object.");const T={...Rg(((h=x.gridData)==null?void 0:h.width)||8,((g=x.gridData)==null?void 0:g.height)||10),...x};if(!T.gridData||!Array.isArray(T.pets)||!Array.isArray(T.exits))throw new Error("Invalid level file format.");T.theme=x.theme||Rn.Classic,T.levelDifficulty=T.levelDifficulty??(T.isHardLevel?3:0);let E=0,b=0,A=0,q=0,w=0;const M={layerColors:null,iceCount:0,hiddenCount:0,keyLock:null,hasScissor:!1,isSingleDirection:!1,count:0,timeExplode:0},k={count:0,iceCount:0,layerColors:null,isPermanent:!1},P=Array.isArray(T.pets)?T.pets:[];T.pets=[],P.forEach((N,$)=>{if(N.id=N.id??$+1,N.editorName=String.fromCharCode(65+$),N.special={...M,...N.special||{}},N.positions=(Array.isArray(N.positions)?N.positions:[]).filter(ce=>ce&&typeof ce.x=="number"&&typeof ce.y=="number"),N.positions.length===0)return;N.headPos=N.positions[0];const oe=N.special.layerColors;v&&(N.special.rawLayerColors=oe,N.special.layerColors=Eg(oe)),E=Math.max(E,N.id),T.pets.push(N)}),T.exits.forEach(N=>{N.special={...k,...N.special||{}},N.special.isPermanent=!!N.special.isPermanent&&N.special.isPermanent!==0;const $=N.special.layerColors;v&&(N.special.rawLayerColors=$,N.special.layerColors=Eg($))}),T.stoneWalls=T.stoneWalls||[],T.stoneWalls.forEach(N=>{N.iceCount=N.iceCount??0}),T.crateInfos=T.crateInfos||[],T.crateInfos.forEach((N,$)=>{N.id=N.id??$+1,b=Math.max(b,N.id)}),T.ribbonInfo=T.ribbonInfo||{listPositions:[]},T.movableBoxes=T.movableBoxes||[],T.movableBoxes.forEach((N,$)=>{N.id=N.id??$+1,N.listPositions=N.points||N.offsetPoints||N.listPositions,delete N.points,delete N.offsetPoints,A=Math.max(A,N.id)}),T.obstacleInfos=T.obstacleInfos||[],T.obstacleInfos.forEach((N,$)=>{N.id=N.id??$+1,q=Math.max(q,N.id)}),T.treeRoots=T.treeRoots||[],T.treeRoots.forEach((N,$)=>{N.id=N.id??$+1,w=Math.max(w,N.id)}),T.levelName=`Level_${T.level}`,n({loadedLevel:T,newNextId:{pet:E+1,crate:b+1,movableBox:A+1,obstacle:q+1,treeRoot:w+1}})}catch(m){o(m)}},s.onerror=r=>o(r),s.readAsText(e)}),Fy=(e,n)=>{const o=[];let s=e.x,r=e.y;const u=n.x,f=n.y,h=Math.abs(u-s),g=s<u?1:-1,m=-Math.abs(f-r),v=r<f?1:-1;let x=h+m;for(;o.push({x:s,y:r}),!(s===u&&r===f);){const T=2*x;T>=m&&(x+=m,s+=g),T<=h&&(x+=h,r+=v)}return o},zo=e=>{let n=0;for(const o of e.pets){const s=e.exits.filter(u=>u.color===o.color);if(s.length===0){n+=1e3;continue}let r=1/0;for(const u of s){const f=o.positions[0].x,h=o.positions[0].y,g=Math.abs(u.position.x-f)+Math.abs(u.position.y-h);g<r&&(r=g)}n+=r}return n},_g=(e,n)=>{if(e.type!==n.type)return!1;const[o,s]=e.path,[r,u]=n.path;return o.x===u.x&&o.y===u.y&&s.x===r.x&&s.y===r.y?(e.type==="reposition"||e.type==="solve")&&(n.type==="reposition"||n.type==="solve")?e.petId===n.petId&&e.end===n.end:e.type==="move_box"&&n.type==="move_box"?e.boxId===n.boxId:!1:!1};function $y(e){if(e.length<3)return!1;const n=e[e.length-3],o=e[e.length-2],s=e[e.length-1];return _g(n,o)&&_g(o,s)}function Gc(e,n){for(const g of e.exits)if(g.position.x===n.listPositions[0].x&&g.position.y===n.listPositions[0].y)return!1;const{width:o,height:s}=e.gridData,r=new Set;e.gridData.strGrid.forEach((g,m)=>g.split(",").forEach((v,x)=>{v==="0"&&r.add(`${x},${s-1-m}`)})),e.stoneWalls.forEach(g=>r.add(`${g.position.x},${g.position.y}`)),e.colorWalls.forEach(g=>r.add(`${g.position.x},${g.position.y}`)),e.crateInfos.forEach(g=>g.listPositions.forEach(m=>r.add(`${m.x},${m.y}`))),e.pets.forEach(g=>g.positions.forEach(m=>r.add(`${m.x},${m.y}`))),e.movableBoxes.forEach(g=>g.listPositions.forEach(m=>r.add(`${m.x},${m.y}`)));const u=n.listPositions[0],h=[{x:u.x+1,y:u.y},{x:u.x-1,y:u.y},{x:u.x,y:u.y+1},{x:u.x,y:u.y-1}].map(g=>g.x<0||g.x>=o||g.y<0||g.y>=s||r.has(`${g.x},${g.y}`));return!!(h[0]&&h[2]||h[0]&&h[3]||h[1]&&h[2]||h[1]&&h[3])}const Yy=(e,n)=>{var s,r;if(e.special.iceCount>0||((s=e.special.keyLock)==null?void 0:s.lockColor)!==nt.Unk&&((r=e.special.keyLock)==null?void 0:r.lockColor)!==void 0)return!1;const o=new Set;return n.crateInfos.forEach(u=>{u.requiredSnake>0&&u.listPositions.forEach(f=>o.add(`${f.x},${f.y}`))}),!e.positions.some(u=>o.has(`${u.x},${u.y}`))};function Cc(e){const n=[...e.pets].sort((g,m)=>g.id-m.id),o=[...e.movableBoxes].sort((g,m)=>g.id-m.id),s=[...e.crateInfos].sort((g,m)=>g.id-m.id),r=[...e.stoneWalls].sort((g,m)=>g.position.x-m.position.x||g.position.y-m.position.y),u=[...e.colorWalls].sort((g,m)=>g.position.x-m.position.x||g.position.y-m.position.y),f=[...e.exits].sort((g,m)=>g.position.x-m.position.x||g.position.y-m.position.y),h=[];return n.forEach(g=>{var T,E,b;const m=g.special,x=`L:${(T=m.layerColors)!=null&&T.length?m.layerColors.join(","):""}|I:${m.iceCount}|H:${m.hiddenCount}|C:${m.count}|Lock:${((E=m.keyLock)==null?void 0:E.lockColor)??-1}|Key:${((b=m.keyLock)==null?void 0:b.keyColor)??-1}|Sc:${m.hasScissor?1:0}|Sd:${m.isSingleDirection?1:0}`;h.push(`P(${g.id}):clr${g.color}@[${g.positions.map(A=>`${A.x},${A.y}`).join(";")}]<${x}>`)}),o.forEach(g=>h.push(`B(${g.id}):[${g.listPositions.map(m=>`${m.x},${m.y}`).join(";")}]`)),s.forEach(g=>h.push(`C(${g.id}):${g.requiredSnake}`)),r.forEach(g=>h.push(`S(${g.position.x},${g.position.y}):C${g.count},I${g.iceCount??0}`)),u.forEach(g=>h.push(`W(${g.position.x},${g.position.y}):${g.color}`)),f.forEach(g=>{var v;const m=`Clr:${g.color}|I:${g.special.iceCount}|C:${g.special.count}|L:${((v=g.special.layerColors)==null?void 0:v.join(","))||""}`;h.push(`E(${g.position.x},${g.position.y})<${m}>`)}),e.ribbonInfo&&e.ribbonInfo.listPositions.length>0&&h.push(`R:[${e.ribbonInfo.listPositions.map(g=>`${g.x},${g.y}`).join(";")}]`),h.join("||")}const $o=(e,n)=>{const o=structuredClone(e);if(n.type==="solve"){const s=o.pets.find(u=>u.id===n.petId),r=o.exits.find(u=>u.position.x===n.exit.position.x&&u.position.y===n.exit.position.y);if(s&&r){const u=[...s.positions],[f,h]=n.path;return s.positions=n.end==="head"?[h,...u.slice(0,-1)]:[...u.slice(1),h],s.headPos=s.positions[0],rc(o,s,r,n.end,u).nextLevel}}else if(n.type==="reposition"){const s=o.pets.find(r=>r.id===n.petId);if(s){const[r,u]=n.path;s.positions=n.end==="head"?[u,...s.positions.slice(0,-1)]:[...s.positions.slice(1),u],s.headPos=s.positions[0]}}else if(n.type==="move_box"){const s=o.movableBoxes.find(r=>r.id===n.boxId);if(s){const[r,u]=n.path,f={x:u.x-r.x,y:u.y-r.y};s.listPositions=s.listPositions.map(h=>({x:h.x+f.x,y:h.y+f.y}))}}return o},sc=(e,n)=>n.reduce((o,s)=>$o(o,s),e),Ag=(e,n)=>{if(n.length===0)return[];const o=[];let s=structuredClone(e),r=null;const u=()=>{r&&r.path.length>1&&o.push(`PET:${r.petId}:${r.end}:${r.path.map(f=>`${f.x},${f.y}`).join(">")}`),r=null};for(const f of n){if(f.type==="move_box"){u();const h=s.movableBoxes.find(g=>g.id===f.boxId);if(h){const g=h.listPositions.map(E=>`${E.x},${E.y}`).join(";"),[m,v]=f.path,x={x:v.x-m.x,y:v.y-m.y},T=h.listPositions.map(E=>`${E.x+x.x},${E.y+x.y}`).join(";");o.push(`BOX:${f.boxId}:${g}>${T}`)}}else{const[h,g]=f.path;r&&(r.petId!==f.petId||r.end!==f.end)&&u(),r?r.path.push(g):r={petId:f.petId,end:f.end,path:[h,g]}}s=$o(s,f)}return u(),o},iM=(e,n,o,s,r)=>{const{width:u,height:f}=o.gridData,h=o.pets.find(E=>E.id===s),g=new Set;if(o.gridData.strGrid.forEach((E,b)=>E.split(",").forEach((A,q)=>{A==="0"&&g.add(`${q},${f-1-b}`)})),o.pets.forEach(E=>{E.id!==s&&E.positions.forEach(b=>g.add(`${b.x},${b.y}`))}),o.stoneWalls.forEach(E=>g.add(`${E.position.x},${E.position.y}`)),o.crateInfos.forEach(E=>E.listPositions.forEach(b=>g.add(`${b.x},${b.y}`))),o.movableBoxes.forEach(E=>E.listPositions.forEach(b=>g.add(`${b.x},${b.y}`))),o.colorWalls.forEach(E=>g.add(`${E.position.x},${E.position.y}`)),o.obstacleInfos.forEach(E=>E.listPositions.forEach(b=>g.add(`${b.x},${b.y}`))),o.exits.forEach(E=>{(E.position.x!==n.x||E.position.y!==n.y)&&g.add(`${E.position.x},${E.position.y}`)}),o.ribbonInfo&&o.ribbonInfo.listPositions.length>0){const E=o.ribbonInfo.listPositions;E.length>1?Fy(E[0],E[1]).forEach(A=>g.add(`${A.x},${A.y}`)):E.length===1&&g.add(`${E[0].x},${E[0].y}`)}const m=new Map;o.coloredPaths.forEach(E=>m.set(`${E.position.x},${E.position.y}`,E.color));const v=[[e]],x=new Set([`${e.x},${e.y}`]);let T=0;for(;T<v.length;){const E=v[T++],b=E[E.length-1];if(b.x===n.x&&b.y===n.y)return E.slice(1);let A=[...h.positions];E.length>1&&(A=r==="head"?[E[1],...h.positions.slice(0,-1)]:[...h.positions.slice(1),E[1]]);const q=new Set(A.map(w=>`${w.x},${w.y}`));q.delete(`${b.x},${b.y}`);for(const w of[{x:0,y:1},{x:0,y:-1},{x:1,y:0},{x:-1,y:0}]){const M={x:b.x+w.x,y:b.y+w.y},k=`${M.x},${M.y}`;if(M.x>=0&&M.x<u&&M.y>=0&&M.y<f&&!x.has(k)&&!g.has(k)&&!q.has(k)){const P=m.get(k);if(P!==void 0&&P!==h.color)continue;x.add(k),v.push([...E,M])}}}return null},Jy=e=>{const n=[],{width:o,height:s}=e.gridData,r=new Map;if(e.gridData.strGrid.forEach((u,f)=>u.split(",").forEach((h,g)=>{h==="0"&&r.set(`${g},${s-1-f}`,{type:"wall"})})),e.coloredPaths.forEach(u=>r.set(`${u.position.x},${u.position.y}`,{...u,type:"colored_path"})),e.exits.forEach(u=>r.set(`${u.position.x},${u.position.y}`,{...u,type:"exit"})),e.stoneWalls.forEach(u=>r.set(`${u.position.x},${u.position.y}`,{...u,type:"stone"})),e.crateInfos.forEach(u=>u.listPositions.forEach(f=>r.set(`${f.x},${f.y}`,{...u,type:"crate"}))),e.colorWalls.forEach(u=>r.set(`${u.position.x},${u.position.y}`,{...u,type:"color_wall"})),e.obstacleInfos.forEach(u=>u.listPositions.forEach(f=>r.set(`${f.x},${f.y}`,{...u,type:"obstacle"}))),e.movableBoxes.forEach(u=>u.listPositions.forEach(f=>r.set(`${f.x},${f.y}`,{...u,type:"movable_box"}))),e.pets.forEach(u=>u.positions.forEach(f=>r.set(`${f.x},${f.y}`,{...u,type:"pet"}))),e.ribbonInfo&&e.ribbonInfo.listPositions.length>0){const{listPositions:u}=e.ribbonInfo;u.length>1?Fy(u[0],u[1]).forEach(h=>r.set(`${h.x},${h.y}`,{type:"ribbon"})):u.length===1&&r.set(`${u[0].x},${u[0].y}`,{type:"ribbon"})}for(const u of e.pets){if(!Yy(u,e))continue;const f=u.special.isSingleDirection?["head"]:["head","tail"];if(!(u.positions.length<=1))for(const h of f){const g=h==="head"?u.positions[0]:u.positions[u.positions.length-1],m=h==="head"?[{x:-1,y:-1},...u.positions.slice(0,-1)]:[...u.positions.slice(1),{x:-1,y:-1}],v=new Set(m.map(x=>`${x.x},${x.y}`));for(const x of[{x:0,y:1},{x:0,y:-1},{x:1,y:0},{x:-1,y:0}]){const T={x:g.x+x.x,y:g.y+x.y};if(T.x<0||T.x>=o||T.y<0||T.y>=s||v.has(`${T.x},${T.y}`))continue;const E=r.get(`${T.x},${T.y}`);(!E||E.type==="colored_path"&&E.color===u.color)&&n.push({type:"reposition",petId:u.id,end:h,path:[g,T]})}}}for(const u of e.movableBoxes)if(!Gc(e,u))for(const f of[{x:0,y:1},{x:0,y:-1},{x:1,y:0},{x:-1,y:0}]){if(!(u.direction===jt.None||u.direction===jt.Horizontal&&f.y===0||u.direction===jt.Vertical&&f.x===0))continue;const g=u.listPositions.map(v=>({x:v.x+f.x,y:v.y+f.y}));g.every(v=>{if(v.x<0||v.x>=o||v.y<0||v.y>=s)return!1;const x=r.get(`${v.x},${v.y}`);return!x||x.type==="movable_box"&&x.id===u.id})&&n.push({type:"move_box",boxId:u.id,path:[u.listPositions[0],g[0]]})}return n},Hc=e=>{let n=null;for(const f of e.pets)if(Yy(f,e)){for(const h of e.exits)if(f.color===h.color&&(h.special.iceCount??0)===0){const g=f.special.isSingleDirection?["head"]:["head","tail"];f.positions.length<=1&&g.includes("tail")&&g.splice(g.indexOf("tail"),1);for(const m of g){const v=m==="head"?f.positions[0]:f.positions[f.positions.length-1],x=iM(v,h.position,e,f.id,m);x&&(!n||x.length<n.path.length)&&(n={petId:f.id,end:m,exit:h,path:x})}}}if(!n)return null;const o=[],s=e.pets.find(f=>f.id===n.petId),u=[n.end==="head"?s.positions[0]:s.positions[s.positions.length-1],...n.path];for(let f=0;f<u.length-1;f++){const g=f===u.length-2?{type:"solve",petId:n.petId,end:n.end,path:[u[f],u[f+1]],exit:n.exit}:{type:"reposition",petId:n.petId,end:n.end,path:[u[f],u[f+1]]};o.push(g)}return o};let Jl=0,Sc=0,Kl=0;class oM{constructor(n){this.items=[],this.compare=n}size(){return this.items.length}push(n){this.items.push(n),this._siftUp(this.items.length-1)}pop(){if(this.items.length===0)return;const n=this.items[0],o=this.items.pop();return this.items.length>0&&(this.items[0]=o,this._siftDown(0)),n}_siftUp(n){for(;n>0;){const o=Math.floor((n-1)/2);if(this.compare(this.items[n],this.items[o])<0)[this.items[n],this.items[o]]=[this.items[o],this.items[n]],n=o;else break}}_siftDown(n){const o=this.items.length;for(;;){let s=n;const r=2*n+1,u=2*n+2;if(r<o&&this.compare(this.items[r],this.items[s])<0&&(s=r),u<o&&this.compare(this.items[u],this.items[s])<0&&(s=u),s===n)break;[this.items[n],this.items[s]]=[this.items[s],this.items[n]],n=s}}}const lM=e=>{const n=Date.now();Jl=0,Kl=0;const o=new oM((h,g)=>h.f-g.f),s=Cc(e),r=zo(e);o.push({state:e,path:[],g:0,h:r,f:r,key:s});const u=new Map;u.set(s,{g:0,h:r}),Jl=0;const f=4e4;for(;o.size()>0&&Jl<f;){const h=o.pop();Jl++;const{state:g,path:m,g:v}=h;if(Hc(g))return Sc=Date.now()-n,Kl=u.size,m;const T=Jy(g),E=h.h;for(const b of T){const A=$o(g,b),q=[...m,b],w=v+1,M=Cc(A),k=zo(A),P=w+k;if($y(q))continue;if(b.type==="move_box"){const $=A.movableBoxes.find(oe=>oe.id===b.boxId);if($&&Gc(A,$))continue}const N=u.get(M);N&&(Kl++,N.g<=w&&N.h<=k)||E!==void 0&&k>E&&w>8||(u.set(M,{g:w,h:k}),o.push({state:A,path:q,g:w,h:k,f:P,key:M}))}}return Sc=Date.now()-n,Kl=u.size,null},sM=(e,n=500)=>{const o=Date.now();let s=0,r=0,f=zo(e);const h=new Map;function g(m,v,x,T,E){s++,r=Math.max(r,x.length);const b=Cc(m),A=zo(m),q=v+A;if(q>T)return{found:!1,nextBound:q};if(Hc(m))return{found:!0,nextBound:null,result:x.slice()};const w=h.get(b);if(w!==void 0&&w<=v)return{found:!1,nextBound:null};h.set(b,v);const M=Jy(m);if(M.length===0)return{found:!1,nextBound:null};const k=M.map(N=>({mv:N,score:zo($o(m,N))})).sort((N,$)=>N.score-$.score);let P=null;for(const{mv:N,score:$}of k){const oe=[...x,N];if($y(oe))continue;if(N.type==="move_box"){const de=$o(m,N),Ee=de.movableBoxes.find(O=>O.id===N.boxId);if(Ee&&Gc(de,Ee))continue}if(E!==null&&$>E&&v+1>8)continue;const ce=$o(m,N),Y=g(ce,v+1,oe,T,$);if(Y.found)return{found:!0,nextBound:null,result:Y.result};Y.nextBound!==null&&(P===null||Y.nextBound<P)&&(P=Y.nextBound)}return{found:!1,nextBound:P}}for(;f<=n;){h.clear();const m=g(e,0,[],f,zo(e));if(m.found){const v=Date.now()-o;return{moves:m.result??[],nodes:s,maxDepthReached:r,timeMs:v}}if(m.nextBound===null||(f=Math.ceil(m.nextBound),f>n))break}return{moves:null,nodes:s,maxDepthReached:r,timeMs:Date.now()-o}},rM=async(e,n)=>{if(n&&n.length>0)return console.log("Using provided hint as solution."),n;let o=structuredClone(e);const s=[],r=100;for(let u=1;u<=r;u++){if(o.pets.length===0)return Ag(e,s);await new Promise(m=>setTimeout(m,0));const f=Hc(o);if(f){console.log(`Stage ${u}: Direct solve found (${f.length} moves).`),s.push(...f),o=sc(o,f);continue}const h=lM(o);if(h&&h.length>0){console.log(`Stage ${u}: A* setup found ${h.length} moves (nodes ${Jl}, time ${Sc}ms, cacheSize ${Kl}).`),s.push(...h),o=sc(o,h);continue}console.warn(`Stage ${u}: A* failed  attempting IDA* fallback...`);const g=sM(o,800);if(console.log(`Stage ${u}: IDA* nodes ${g.nodes}, maxDepth ${g.maxDepthReached}, time ${g.timeMs}ms.`),g.moves!==null)if(g.moves.length>0){console.log(`Stage ${u}: IDA* produced ${g.moves.length} setup moves.`),s.push(...g.moves),o=sc(o,g.moves);continue}else{console.log(`Stage ${u}: IDA* found state with direct solve (no setup moves needed). Re-evaluating direct solves.`);continue}return console.error(`Stage ${u}: Solver exhausted A* and IDA*  giving up.`),null}return o.pets.length===0?Ag(e,s):null},aM=(e,n)=>{var s,r;if((e.special.iceCount??0)>0||((s=e.special.keyLock)==null?void 0:s.lockColor)!==nt.Unk&&((r=e.special.keyLock)==null?void 0:r.lockColor)!==void 0)return!1;const o=new Set;return n.crateInfos.forEach(u=>{u.requiredSnake>0&&u.listPositions.forEach(f=>o.add(`${f.x},${f.y}`))}),!e.positions.some(u=>o.has(`${u.x},${u.y}`))},uM=()=>{const[e,n]=ae.useState(()=>Rg(12,18)),o=ae.useRef(e);ae.useEffect(()=>{o.current=e},[e]);const[s,r]=ae.useState(null),[u,f]=ae.useState("edit"),[h,g]=ae.useState("pet"),[m,v]=ae.useState(Pt.LightGreen),[x,T]=ae.useState(null),[E,b]=ae.useState({type:"pet",id:null}),[A,q]=ae.useState(!1),[w,M]=ae.useState(null),k=ae.useRef(null);ae.useEffect(()=>{k.current=w},[w]);const[P,N]=ae.useState(null),[$,oe]=ae.useState(null),ce=ae.useRef(null),[Y,de]=ae.useState(null),[Ee,O]=ae.useState(!1),[Ce,Oe]=ae.useState(!1),[Le,G]=ae.useState(!1),se=ae.useRef([]),[pe,ke]=ae.useState(!1),[Ge,I]=ae.useState(!0),[j,re]=ae.useState(null),ue=ae.useRef(null);ae.useEffect(()=>{ue.current=j},[j]);const[L,X]=ae.useState(!1),K=ae.useRef(null),[ve,_e]=ae.useState(-1),[Ie,Ae]=ae.useState(!1),[Cn,Sn]=ae.useState([]),[en,tn]=ae.useState(null),He=ae.useRef({pet:1,crate:1,movableBox:1,obstacle:1,treeRoot:1}),lt=ae.useRef(null),rt=ae.useRef(null),St=ae.useRef(null),mn=ae.useRef(null),Qe=ae.useCallback(ie=>{n(le=>{const z=structuredClone(le),J=ie(z)||z;return o.current=J,J})},[]);ae.useEffect(()=>{if(x){const ie=o.current;let le;switch(x.type){case"pet":{const z=ie.pets.find(ee=>ee.id===x.id);z&&(le=z.color);break}case"exit":{const z=ie.exits.find(ee=>ee.position.x===x.pos.x&&ee.position.y===x.pos.y);z&&(le=z.color);break}case"colored_path":{const z=ie.coloredPaths.find(ee=>ee.position.x===x.pos.x&&ee.position.y===x.pos.y);z&&(le=z.color);break}case"color_wall":{const z=ie.colorWalls.find(ee=>ee.position.x===x.pos.x&&ee.position.y===x.pos.y);z&&(le=z.color);break}}le!==void 0&&v(le)}},[x]),ae.useEffect(()=>{if(u!=="edit"){tn(null);return}let ie=null,le=null;if(w&&w.object.type==="pet"?(ie=o.current.pets.find(W=>W.id===w.object.id)??null,ie&&w.isValidDrop&&(le=w.currentPositions)):x&&x.type==="pet"&&!A&&(ie=o.current.pets.find(W=>W.id===x.id)??null,ie&&(le=ie.positions)),!ie||!le){tn(null);return}const z={...ie,positions:le,headPos:le[0]},ee=structuredClone(o.current),J=ee.pets.findIndex(W=>W.id===z.id);if(J===-1){tn(null);return}ee.pets[J]=z;const fe=ee.exits.filter(W=>W.color===z.color&&(W.special.iceCount??0)===0);if(fe.length===0){tn(null);return}const Z=[];for(const W of fe){let Me=["head"];!z.special.isSingleDirection&&z.positions.length>1&&Me.push("tail");for(const We of Me){const ye=We==="head"?z.positions[0]:z.positions[z.positions.length-1],it=Lx(ye,W.position,ee,z.id);it&&Z.push([ye,...it])}}tn(Z.length>0?Z:null)},[x,w,e,u,A]);const Zn=ae.useCallback(ie=>{const le=o.current;if(!le)return[];switch(ie.type){case"pet":{const z=le.pets.find(ee=>ee.id===ie.id);return z?[...z.positions]:[]}case"crate":{const z=le.crateInfos.find(ee=>ee.id===ie.id);return z?[...z.listPositions]:[]}case"movable_box":{const z=le.movableBoxes.find(ee=>ee.id===ie.id);return z?[...z.listPositions]:[]}case"obstacle":{const z=le.obstacleInfos.find(ee=>ee.id===ie.id);return z?[...z.listPositions]:[]}case"tree_root":{const z=le.treeRoots.find(ee=>ee.id===ie.id);return z?Yo(z):[]}case"ribbon":return le.ribbonInfo.listPositions?[...le.ribbonInfo.listPositions]:[];case"exit":case"stone":case"colored_path":case"color_wall":case"wall":return[ie.pos];default:return[]}},[]),Ur=ae.useCallback(ie=>{g(ie),T(null),b({type:"pet",id:null})},[]),wt=ae.useCallback(ie=>{v(ie);const le=x;le&&Qe(z=>{switch(le.type){case"pet":z.pets.find(ee=>ee.id===le.id).color=ie;break;case"exit":z.exits.find(ee=>ee.position.x===le.pos.x&&ee.position.y===le.pos.y).color=ie;break;case"colored_path":z.coloredPaths.find(ee=>ee.position.x===le.pos.x&&ee.position.y===le.pos.y).color=ie;break;case"color_wall":z.colorWalls.find(ee=>ee.position.x===le.pos.x&&ee.position.y===le.pos.y).color=ie;break}})},[x,Qe]),Pr=ae.useCallback((ie,le)=>{const z=Math.max(3,Math.min(30,ie)),ee=Math.max(3,Math.min(30,le));Qe(J=>{const fe=Array.from({length:ee},(W,Me)=>Array.from({length:z},(We,ye)=>{const it=J.gridData.strGrid[J.gridData.height-1-Me];return(it==null?void 0:it.split(",")[ye])??"1"}).join(",")).reverse();J.gridData.width=z,J.gridData.height=ee,J.gridData.strGrid=fe;const Z=W=>W.x<z&&W.y<ee;J.pets=J.pets.filter(W=>W.positions.every(Z)),J.exits=J.exits.filter(W=>Z(W.position)),J.stoneWalls=J.stoneWalls.filter(W=>Z(W.position)),J.coloredPaths=J.coloredPaths.filter(W=>Z(W.position)),J.colorWalls=J.colorWalls.filter(W=>Z(W.position)),J.crateInfos=J.crateInfos.filter(W=>W.listPositions.every(Z)),J.movableBoxes=J.movableBoxes.filter(W=>W.listPositions.every(Z)),J.obstacleInfos=J.obstacleInfos.filter(W=>W.listPositions.every(Z)),J.treeRoots=J.treeRoots.filter(W=>Yo(W).every(Z)),J.ribbonInfo&&(J.ribbonInfo.listPositions=J.ribbonInfo.listPositions.filter(Z))}),T(null)},[Qe]),ts=ae.useCallback(()=>{var ie;return(ie=lt.current)==null?void 0:ie.click()},[]),ns=ae.useCallback(async ie=>{var z;const le=(z=ie.target.files)==null?void 0:z[0];if(le)try{const{loadedLevel:ee,newNextId:J}=await nM(le);n(ee),He.current=J,T(null),o.current=ee}catch(ee){console.error("Failed to load level:",ee),alert("Failed to parse level file. Check console for details.")}ie.target&&(ie.target.value="")},[]),Ji=ae.useCallback(()=>{const ie=tM(e);eM(`${e.levelName}.asset`,ie,"application/x-yaml")},[e]),Lr=ae.useCallback(async()=>{var le;ke(!0);const ie=Ge&&((le=e.solution)==null?void 0:le.length)>0?e.solution:null;try{const z=await rM(e,ie);z?(Qe(ee=>{ee.solution=z}),alert(`Solver found a solution with ${z.length} steps!`)):alert("Solver could not find a solution.")}catch(z){console.error("Solver failed with an error:",z),alert("Solver encountered an error. Check console for details.")}ke(!1)},[e,Ge,Qe]),Ai=ae.useCallback(()=>{X(!1),_e(-1),K.current&&clearTimeout(K.current),re(null)},[]),Gr=ae.useCallback(()=>{!e.solution||e.solution.length===0||(X(!0),_e(-1),re(s??e))},[s,e]);ae.useEffect(()=>{if(!L||!e.solution)return;const ie=(le,z)=>{if(le>=e.solution.length){Ai();return}_e(le);const J=e.solution[le].split(":"),fe=J[0];let Z=z;if(fe==="PET"){const W=parseInt(J[1],10),Me=J[2],We=J[3].split(">").map(it=>{const[nn,xt]=it.split(",").map(Number);return{x:nn,y:xt}}),ye=z.pets.find(it=>it.id===W);if(ye){const it=Vh(ye.positions,We,Me),nn=it[it.length-1];Z=structuredClone(z);const xt=Z.pets.find(st=>st.id===W);xt.positions=nn,xt.headPos=nn[0];const Gt=Z.exits.find(st=>st.position.x===We[We.length-1].x&&st.position.y===We[We.length-1].y);Gt&&(Z=rc(Z,ye,Gt,Me,ye.positions).nextLevel)}}else if(fe==="BOX"){Z=structuredClone(z);const W=parseInt(J[1],10),We=J[2].split(">")[1].split(";").map(it=>{const[nn,xt]=it.split(",").map(Number);return{x:nn,y:xt}}),ye=Z.movableBoxes.find(it=>it.id===W);ye&&(ye.listPositions=We)}re(Z),K.current=setTimeout(()=>ie(le+1,Z),300)};return ie(0,j??e),()=>{K.current&&clearTimeout(K.current)}},[L,e.solution]);const Zo=ae.useCallback(()=>{Le&&Qe(ie=>{ie.solution=se.current}),f("edit"),O(!1),Oe(!1),se.current=[],G(!1),r(null),re(null)},[Le,Qe]),bi=ae.useCallback(()=>{s&&(n(s),o.current=s,O(!1),Oe(!1),se.current=[],G(!1))},[s]),kt=ae.useCallback(()=>{u==="edit"?(r(structuredClone(e)),f("play"),T(null),Ai(),G(!1)):Zo()},[u,e,Zo,Ai]),En=ae.useCallback(()=>{Ce?(Oe(!1),se.current.length>0&&(Qe(ie=>{ie.solution=se.current}),se.current=[])):(Oe(!0),G(!0),se.current=[])},[Ce,Qe]),Nt=ae.useCallback(()=>b({type:"pet",id:null}),[]),Wo=ae.useCallback(ie=>{de(le=>{var Z;if(!le||!((Z=k.current)!=null&&Z.startMouse))return null;const z=mn.current??k.current.startMouse,ee={x:z.x-k.current.startMouse.x,y:z.y-k.current.startMouse.y},J=(W,Me,We)=>W+(Me-W)*We,fe={x:J(le.offset.x,ee.x,.2),y:J(le.offset.y,ee.y,.2)};return{...le,offset:fe}}),rt.current=requestAnimationFrame(Wo)},[]);ae.useEffect(()=>()=>{rt.current&&cancelAnimationFrame(rt.current),St.current&&cancelAnimationFrame(St.current),K.current&&clearTimeout(K.current)},[]);const Hr=ae.useCallback((ie,le)=>{if(E.id!==null){Nt();return}le.button===2&&le.preventDefault();const z=gr(ie,o.current);if(T(z),(le.button===2||h==="eraser")&&z){const ee=z;Qe(J=>{let fe=!1;switch(ee.type){case"pet":{const Z=ee.id;J.pets=J.pets.filter(W=>W.id!==Z),fe=!0;break}case"exit":{const Z=ee.pos;J.exits=J.exits.filter(W=>W.position.x!==Z.x||W.position.y!==Z.y),fe=!0;break}case"stone":{const Z=ee.pos;J.stoneWalls=J.stoneWalls.filter(W=>W.position.x!==Z.x||W.position.y!==Z.y),fe=!0;break}case"colored_path":{const Z=ee.pos;J.coloredPaths=J.coloredPaths.filter(W=>W.position.x!==Z.x||W.position.y!==Z.y),fe=!0;break}case"color_wall":{const Z=ee.pos;J.colorWalls=J.colorWalls.filter(W=>W.position.x!==Z.x||W.position.y!==Z.y),fe=!0;break}case"crate":{const Z=ee.id;J.crateInfos=J.crateInfos.filter(W=>W.id!==Z),fe=!0;break}case"movable_box":{const Z=ee.id;J.movableBoxes=J.movableBoxes.filter(W=>W.id!==Z),fe=!0;break}case"obstacle":{const Z=ee.id;J.obstacleInfos=J.obstacleInfos.filter(W=>W.id!==Z),fe=!0;break}case"tree_root":{const Z=ee.id;J.treeRoots=J.treeRoots.filter(W=>W.id!==Z),fe=!0;break}case"ribbon":J.ribbonInfo.listPositions=[],fe=!0;break;case"wall":{const Z=ee.pos,W=J.gridData.height-1-Z.y,Me=J.gridData.strGrid[W].split(",");Me[Z.x]="1",J.gridData.strGrid[W]=Me.join(","),fe=!0;break}}fe&&T(null)});return}if(z&&z.type!=="wall"){q(!0);const ee=Zn(z);let J;switch(z.type){case"pet":J=z.id;break;case"crate":J=z.id;break;case"movable_box":J=z.id;break;case"obstacle":J=z.id;break;case"tree_root":J=z.id;break;case"exit":case"stone":case"colored_path":case"color_wall":J=z.pos;break;case"ribbon":J="ribbon";break}const fe={object:z,startCoords:ie,startMouse:{x:le.clientX,y:le.clientY},currentPositions:ee,isValidDrop:!1};M(fe),k.current=fe,de({type:z.type,id:J,offset:{x:0,y:0}}),mn.current={x:le.clientX,y:le.clientY},rt.current||(rt.current=requestAnimationFrame(Wo))}else z||Qe(ee=>{let J;switch(h){case"pet":J=He.current.pet++,ee.pets.push({id:J,editorName:String.fromCharCode(64+J),headPos:ie,positions:[ie],color:m,special:{layerColors:null,iceCount:0,hiddenCount:0,keyLock:null,hasScissor:!1,isSingleDirection:!1,count:0,timeExplode:0}}),b({type:"pet",id:J});break;case"exit":ee.exits.push({position:ie,color:m,special:{count:0,iceCount:0,layerColors:null,isPermanent:!1}});break;case"stone":ee.stoneWalls.push({position:ie,count:3,iceCount:0});break;case"colored_path":ee.coloredPaths.push({position:ie,color:m});break;case"color_wall":ee.colorWalls.push({position:ie,color:m});break;case"wall":const fe=ee.gridData.height-1-ie.y,Z=ee.gridData.strGrid[fe].split(",");Z[ie.x]="0",ee.gridData.strGrid[fe]=Z.join(",");break;case"crate":J=He.current.crate++,ee.crateInfos.push({id:J,listPositions:[ie],requiredSnake:1}),b({type:"crate",id:J});break;case"movable_box":J=He.current.movableBox++,ee.movableBoxes.push({id:J,listPositions:[ie],direction:jt.None}),b({type:"movable_box",id:J});break;case"obstacle":J=He.current.obstacle++,ee.obstacleInfos.push({id:J,listPositions:[ie]}),b({type:"obstacle",id:J});break;case"tree_root":J=He.current.treeRoot++,ee.treeRoots.push({id:J,position:ie,direction:{x:1,y:0},length:3});break;case"ribbon":ee.ribbonInfo.listPositions.length<2&&ee.ribbonInfo.listPositions.push(ie);break}})},[E,h,m,Qe,Nt,Zn,Wo]),Br=ae.useCallback((ie,le)=>{if(E.id!==null){Qe(z=>{let ee,J={};switch(E.type){case"pet":ee=z.pets.find(ye=>ye.id===E.id),J={ignorePetId:E.id};break;case"crate":ee=z.crateInfos.find(ye=>ye.id===E.id),J={ignoreCrateId:E.id};break;case"movable_box":ee=z.movableBoxes.find(ye=>ye.id===E.id),J={ignoreBoxId:E.id};break;case"obstacle":ee=z.obstacleInfos.find(ye=>ye.id===E.id),J={ignoreObstacleId:E.id};break}if(!ee)return;const fe="positions"in ee?ee.positions:ee.listPositions;if(fe.length===0)return;const Z=fe[fe.length-1],W=Math.abs(ie.x-Z.x)+Math.abs(ie.y-Z.y)===1,Me=gr(ie,z,J),We=fe.some(ye=>ye.x===ie.x&&ye.y===ie.y);W&&!Me&&!We&&(fe.push(ie),"headPos"in ee&&(ee.headPos=ee.positions[0]))});return}!A||!k.current||(mn.current={x:le.clientX,y:le.clientY},!St.current&&(St.current=requestAnimationFrame(()=>{St.current=null;const z=k.current;if(!z)return;de(ye=>ye?{...ye,offset:{x:le.clientX-z.startMouse.x,y:le.clientY-z.startMouse.y}}:null);const ee={x:ie.x-z.startCoords.x,y:ie.y-z.startCoords.y},fe=Zn(z.object).map(ye=>({x:ye.x+ee.x,y:ye.y+ee.y})),Z=o.current,W=ye=>ye.x>=0&&ye.x<Z.gridData.width&&ye.y>=0&&ye.y<Z.gridData.height;let Me={};switch(z.object.type){case"pet":Me={ignorePetId:z.object.id};break;case"crate":Me={ignoreCrateId:z.object.id};break;case"movable_box":Me={ignoreBoxId:z.object.id};break;case"obstacle":Me={ignoreObstacleId:z.object.id};break}let We=!0;for(const ye of fe)if(!W(ye)||gr(ye,Z,Me)){We=!1;break}M(ye=>ye&&{...ye,currentPositions:fe,isValidDrop:We})})))},[A,E,Zn,Qe]),Ki=ae.useCallback(ie=>{if(rt.current&&(cancelAnimationFrame(rt.current),rt.current=null),St.current&&(cancelAnimationFrame(St.current),St.current=null),E.id!==null)return;const le=k.current;q(!1),de(null),le&&le.isValidDrop&&ie&&Qe(z=>{const ee={x:ie.x-le.startCoords.x,y:ie.y-le.startCoords.y},J=Z=>({x:Z.x+ee.x,y:Z.y+ee.y}),fe=le.object;switch(fe.type){case"pet":{const Z=z.pets.find(W=>W.id===fe.id);Z&&(Z.positions=Z.positions.map(J),Z.headPos=Z.positions[0]);break}case"exit":{const Z=z.exits.find(W=>W.position.x===fe.pos.x&&W.position.y===fe.pos.y);Z&&(Z.position=J(Z.position));break}case"stone":{const Z=z.stoneWalls.find(W=>W.position.x===fe.pos.x&&W.position.y===fe.pos.y);Z&&(Z.position=J(Z.position));break}case"colored_path":{const Z=z.coloredPaths.find(W=>W.position.x===fe.pos.x&&W.position.y===fe.pos.y);Z&&(Z.position=J(Z.position));break}case"color_wall":{const Z=z.colorWalls.find(W=>W.position.x===fe.pos.x&&W.position.y===fe.pos.y);Z&&(Z.position=J(Z.position));break}case"crate":{const Z=z.crateInfos.find(W=>W.id===fe.id);Z&&(Z.listPositions=Z.listPositions.map(J));break}case"movable_box":{const Z=z.movableBoxes.find(W=>W.id===fe.id);Z&&(Z.listPositions=Z.listPositions.map(J));break}case"obstacle":{const Z=z.obstacleInfos.find(W=>W.id===fe.id);Z&&(Z.listPositions=Z.listPositions.map(J));break}case"tree_root":{const Z=z.treeRoots.find(W=>W.id===fe.id);Z&&(Z.position=J(Z.position));break}case"ribbon":z.ribbonInfo.listPositions=z.ribbonInfo.listPositions.map(J);break}}),M(null)},[E,Qe]),Xi=ae.useCallback(ie=>{if(Ie)return;const le=gr(ie,o.current);if((le==null?void 0:le.type)==="pet"){const z=o.current.pets.find(ee=>ee.id===le.id);if(z&&aM(z,o.current)){const ee=z.headPos.x===ie.x&&z.headPos.y===ie.y,J=z.positions.length>1&&z.positions[z.positions.length-1].x===ie.x&&z.positions[z.positions.length-1].y===ie.y;let fe=null;ee?fe="head":J&&!z.special.isSingleDirection&&(fe="tail"),fe&&(N({pet:z,end:fe,dragPath:[ie]}),re(structuredClone(o.current)))}}else if((le==null?void 0:le.type)==="movable_box"){const z=o.current.movableBoxes.find(ee=>ee.id===le.id);z&&(oe({box:z,startCoords:ie,initialBoxPositions:[...z.listPositions]}),re(structuredClone(o.current)))}},[Ie]),Qi=ae.useCallback(ie=>{if(!(Ie||!(P||$)||!ue.current)){if(P){if(ce.current&&ce.current.x===ie.x&&ce.current.y===ie.y)return;ce.current=ie;const{pet:le,dragPath:z,end:ee}=P,J=z[z.length-1];if(z.length>1&&ie.x===z[z.length-2].x&&ie.y===z[z.length-2].y){const Me=z.slice(0,-1);let ye=[...P.pet.positions];for(let xt=1;xt<Me.length;xt++){const Gt=Me[xt];ye=ee==="head"?[Gt,...ye.slice(0,-1)]:[...ye.slice(1),Gt]}const it=structuredClone(ue.current),nn=it.pets.find(xt=>xt.id===le.id);nn.positions=ye,nn.headPos=ye[0],re(it),N(xt=>xt?{...xt,dragPath:Me}:null);return}if(!(Math.abs(ie.x-J.x)+Math.abs(ie.y-J.y)===1))return;const Z=ue.current.pets.find(Me=>Me.id===le.id),W=ee==="head"?[ie,...Z.positions.slice(0,-1)]:[...Z.positions.slice(1),ie];if(Hx(W,le,ue.current)){const Me=structuredClone(ue.current),We=Me.pets.find(ye=>ye.id===le.id);We.positions=W,We.headPos=W[0],re(Me),N(ye=>ye?{...ye,dragPath:[...ye.dragPath,ie]}:null)}}else if($){if(ce.current&&ce.current.x===ie.x&&ce.current.y===ie.y)return;ce.current=ie;const{box:le}=$,ee=ue.current.movableBoxes.find(W=>W.id===le.id).listPositions;if(ee.some(W=>W.x===ie.x&&W.y===ie.y))return;let J={x:0,y:0},fe=!1;for(const W of ee){for(const Me of[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}])if(W.x+Me.x===ie.x&&W.y+Me.y===ie.y){J=Me,fe=!0;break}if(fe)break}if(!fe||(le.direction===jt.Horizontal&&(J.y=0),le.direction===jt.Vertical&&(J.x=0),J.x===0&&J.y===0))return;const Z=ee.map(W=>({x:W.x+J.x,y:W.y+J.y}));if(Gx(le.id,Z,ue.current)){const W=structuredClone(ue.current),Me=W.movableBoxes.find(We=>We.id===le.id);Me.listPositions=Z,re(W)}}}},[Ie,P,$]),In=ae.useCallback(ie=>{if(P){if(ue.current){const le=structuredClone(ue.current),z=le.pets.find(Z=>Z.id===P.pet.id),ee=P.end==="head"?z.positions[0]:z.positions[z.positions.length-1],J=le.exits.find(Z=>Z.position.x===ee.x&&Z.position.y===ee.y);let fe=le;if(J&&J.color===z.color&&(J.special.iceCount??0)===0){let Z;if(P.dragPath.length>1){const Me=Vh(P.pet.positions,P.dragPath,P.end);Z=Me[Me.length-2]}else Z=z.positions;const W=rc(le,z,J,P.end,Z);fe=W.nextLevel,W.removedWalls.length>0&&(Sn(W.removedWalls),setTimeout(()=>Sn([]),500)),fe.pets.length===0&&O(!0)}n(fe),o.current=fe,Ce&&P.dragPath.length>1&&se.current.push(`PET:${z.id}:${P.end}:${P.dragPath.map(Z=>`${Z.x},${Z.y}`).join(">")}`)}N(null)}else if($){if(ue.current){const le=structuredClone(ue.current);if(n(le),o.current=le,Ce){const z=le.movableBoxes.find(fe=>fe.id===$.box.id),ee=$.initialBoxPositions;if(JSON.stringify(ee)!==JSON.stringify(z.listPositions)){const fe=ee.map(W=>`${W.x},${W.y}`).join(";"),Z=z.listPositions.map(W=>`${W.x},${W.y}`).join(";");se.current.push(`BOX:${z.id}:${fe}>${Z}`)}}}oe(null)}else return;re(null),ce.current=null},[P,$,Ce]);return{level:j??e,mode:u,selectedTool:h,selectedColor:m,selectedObject:x,drawingState:E,isDragging:A,editDragState:w,playDragState:P,levelSolved:Ee,fileInputRef:lt,isRecording:Ce,isSolving:pe,animatedLevel:j,isSolutionPlaying:L,isAnimating:Ie,solutionPlaybackIndex:ve,guideSolver:Ge,disappearingWalls:Cn,draggedVisuals:Y,pathVisualization:en,handlers:{setLevel:n,setGuideSolver:I,setDrawingState:b,handleToolChange:Ur,handleColorChange:wt,handleSizeChange:Pr,handleLoadClick:ts,handleFileLoad:ns,handleSaveUnityAsset:Ji,handleSolveLevel:Lr,handlePlaySolution:Gr,handleStopSolution:Ai,toggleMode:kt,toggleRecording:En,handleEditorMouseDown:Hr,handleEditorMouseMove:Br,handleEditorMouseUp:Ki,handlePlayModeMouseDown:Xi,handlePlayModeMouseMove:Qi,handlePlayModeMouseUp:In,handleResetToEditState:bi,handleSaveAndReturnToEdit:Zo}}},cM=({onReset:e,onSaveAndEdit:n})=>S.jsxs("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center z-50 text-white",children:[S.jsx("h2",{className:"text-5xl font-bold text-yellow-400 mb-4",children:"Level Solved!"}),S.jsxs("div",{className:"flex gap-4",children:[S.jsx("button",{onClick:e,className:"px-6 py-3 rounded-lg font-bold bg-blue-600 hover:bg-blue-500 transition-transform transform hover:scale-105",children:"Reset & Play Again"}),S.jsx("button",{onClick:n,className:"px-6 py-3 rounded-lg font-bold bg-teal-600 hover:bg-teal-500 transition-transform transform hover:scale-105",children:"Save Progress & Edit"})]})]}),fM=()=>{const{level:e,mode:n,selectedTool:o,selectedColor:s,selectedObject:r,drawingState:u,isDragging:f,editDragState:h,playDragState:g,levelSolved:m,fileInputRef:v,isRecording:x,isSolving:T,animatedLevel:E,isSolutionPlaying:b,isAnimating:A,solutionPlaybackIndex:q,guideSolver:w,disappearingWalls:M,draggedVisuals:k,pathVisualization:P,handlers:N}=uM();return S.jsxs("div",{className:"min-h-screen flex flex-col font-sans antialiased relative",children:[S.jsx("header",{className:"p-4 text-center border-b border-gray-700 shadow-lg bg-gray-800/50",children:S.jsx("h1",{className:"text-3xl font-bold text-teal-400 tracking-wider",children:"Pet Tunnel Puzzle - Editor"})}),S.jsxs("div",{className:`flex-1 flex w-full max-w-screen-2xl mx-auto p-4 gap-4 ${b||A?"pointer-events-none":""}`,children:[S.jsx(UA,{level:e,mode:n,selectedTool:o,selectedColor:s,selectedObject:r,drawingState:u,isSolving:T,isSolutionPlaying:b,solutionPlaybackIndex:q,fileInputRef:v,guideSolver:w,onGuideSolverChange:N.setGuideSolver,hasRecordedSolution:e.solution&&e.solution.length>0,onLevelChange:N.setLevel,onToolChange:N.handleToolChange,onColorChange:N.handleColorChange,onSizeChange:N.handleSizeChange,onLoadClick:N.handleLoadClick,onFileLoad:N.handleFileLoad,onSaveUnityAsset:N.handleSaveUnityAsset,onSolveLevel:N.handleSolveLevel,onPlaySolution:N.handlePlaySolution,onStopSolution:N.handleStopSolution,onDrawingStateChange:N.setDrawingState}),S.jsxs("main",{className:"flex-1 flex flex-col items-center p-4 bg-gray-800/50 rounded-lg border border-gray-700",children:[S.jsxs("div",{className:"flex justify-between w-full items-center mb-4 px-2",children:[S.jsxs("h2",{className:"text-2xl font-bold text-white",children:[e.levelName," ",S.jsxs("span",{className:"text-lg font-normal text-gray-400",children:["- ",n==="edit"?"Editing":"Playing"]})]}),S.jsxs("div",{className:"flex items-center gap-4",children:[n==="play"&&S.jsxs("button",{onClick:N.toggleRecording,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-white transition-all transform hover:scale-105 ${x?"bg-red-600 hover:bg-red-500 animate-pulse":"bg-gray-600 hover:bg-gray-500"}`,"aria-pressed":x,children:[S.jsx("span",{className:`w-3 h-3 rounded-full ${x?"bg-white":"bg-red-500"}`}),x?"Recording":"Record Solution"]}),S.jsx("button",{onClick:N.toggleMode,className:`px-6 py-2 rounded-lg font-bold text-white transition-transform transform hover:scale-105 ${n==="edit"?"bg-green-600 hover:bg-green-500":"bg-red-600 hover:bg-red-500"}`,children:n==="edit"?"Play Level":"Save & Edit"})]})]}),S.jsxs("div",{className:"relative flex items-center justify-center bg-gray-900/50 p-4 rounded-lg overflow-auto",children:[S.jsx(Bx,{level:E??e,mode:n,selectedObject:r,isDragging:f,editDragState:n==="edit"?h:null,playDragState:n==="play"?g:null,disappearingWalls:M,draggedVisuals:n==="edit"?k:null,pathVisualization:n==="edit"?P:null,onGridMouseDown:n==="edit"?N.handleEditorMouseDown:N.handlePlayModeMouseDown,onGridMouseMove:n==="edit"?N.handleEditorMouseMove:N.handlePlayModeMouseMove,onGridMouseUp:n==="edit"?N.handleEditorMouseUp:N.handlePlayModeMouseUp,onGridMouseLeave:n==="edit"?()=>N.handleEditorMouseUp(null):()=>N.handlePlayModeMouseUp(null)}),m&&S.jsx(cM,{onReset:N.handleResetToEditState,onSaveAndEdit:N.handleSaveAndReturnToEdit})]})]})]})]})},Ky=document.getElementById("root");if(!Ky)throw new Error("Could not find root element to mount to");const dM=yx.createRoot(Ky);dM.render(S.jsx(ux.StrictMode,{children:S.jsx(fM,{})}));
